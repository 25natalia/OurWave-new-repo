/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={471:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".card {\n\tfont-family: 'inter';\n\tbackground-color: rgb(237, 237, 237);\n\twidth: 90%;\n\tpadding: 10px;\n\tborder-radius: 10px;\n\tmargin-left: 5%;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: rgb(30, 30, 30);\n}\n\n.top {\n\tmargin: 10px;\n\tmargin-right: 20px;\n\tfont-family: 'inter';\n\tfont-weight: 600;\n\tcolor: rgba(30, 30, 30, 0.7);\n}\n\n.artist {\n\tfont-size: 12px;\n\tmargin-top: 2px;\n}\n\n.title {\n\tfont-size: 15px;\n\tfont-weight: 600;\n\tmargin: 0;\n}\n\n.letters {\n\tmargin-left: 10px;\n}\n\nimg {\n\theight: 50px;\n\twidth: 50px;\n\tborder-radius: 5px;\n}\n\n.imagen {\n\tjustify-content: center;\n}\n\np {\n\tmargin-top: 0%;\n\tmargin-bottom: 0%;\n}\n",""]);const a=o},357:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n#wave {\n\tmargin-left: 10px;\n\tmargin-top: 10px;\n}\n\n.image {\n\twidth: 30px;\n\theight: 30px;\n\tborder-radius: 50%;\n\toverflow: hidden;\n\tmargin: 10px;\n}\n\n.comment,\n.like_group,\n.share {\n\tmargin-left: 15px;\n\tmargin-right: 15px;\n}\n\n.cardEntera {\n\tbackground-color: rgb(255, 255, 255);\n\twidth: 70%;\n\theight: 15%;\n\tpadding: 10px;\n\tmargin-bottom: 10px;\n\tborder-radius: 10px;\n\tbox-shadow: 0 4px 8px rgba(0, 0, 0.3, 0.3);\n\tmargin-left: 15%;\n\tmargin-top: 2%;\n\tfont-family: 'inter';\n\tcolor: #1e1e1e;\n}\n\n.profile {\n\tdisplay: flex;\n\talign-items: center;\n}\n.interacciones {\n\tdisplay: flex;\n\tcolor: #2ec4b6;\n\talign-items: center;\n\tjustify-content: end;\n}\n.like_group,\n.share,\n.comment {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n#svg {\n\twidth: 26px;\n\theight: 26px;\n\tmargin: 3px;\n}\n\n#svg_like {\n\twidth: 26px;\n\theight: 26px;\n\tmargin: 3px;\n}\n\n.username {\n\tfont-weight: 700;\n}\n\np {\n\tmargin: 0;\n}\n",""]);const a=o},499:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"p {\n\tfont-family: 'inter';\n\tfont-size: 14px;\n\tcolor: white;\n}\n.image img {\n\twidth: 30px;\n\theight: 30px; /* Ancho del contenedor */ /* Altura del contenedor */\n\toverflow: hidden; /* Oculta cualquier contenido que exceda los lÃ­mites del contenedor */\n\tdisplay: block; /* Asegura que la imagen se comporte como un bloque */\n\tborder-radius: 50%; /* Hace que la imagen sea circular */\n\tmargin: 10px;\n}\n\n.image {\n\tdisplay: flex;\n}\n\n.song {\n\tfont-family: 'inter';\n\tfont-weight: 400;\n\tfont-size: 20px;\n\twidth: 280px;\n\talign-items: flex-start;\n\tcolor: white;\n\tmargin-left: 65px;\n\tmargin-top: 0;\n}\n\nh3 {\n\tmargin-top: 0;\n}\n.card {\n\twidth: 400px;\n\theight: 180px;\n\tborder-radius: 20px;\n\tmargin: 20px;\n}\n\n.todo {\n\tposition: relative;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tz-index: 1;\n\tborder-radius: 20px;\n}\n",""]);const a=o},507:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".header {\n\tbackground-color: rgb(255, 255, 255);\n\theight: 10vh;\n\tbox-shadow: 0 4px 4px rgba(0, 0, 0, 0.1);\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n#perfil {\n\theight: 50px;\n\twidth: 50px;\n\tmargin-right: 2%;\n}\n\n.header img {\n\tmargin-left: 5%;\n}\n\n.logo img {\n\theight: 10vh;\n\tmargin-left: 20px;\n\tcursor: pointer;\n}\n\nsvg {\n\tmargin-right: 20px;\n\tcursor: pointer;\n}\n",""]);const a=o},67:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".menubar {\n\tdisplay: flex;\n\tjustify-content: space-evenly;\n\tposition: fixed;\n\tbottom: 0;\n\talign-items: center;\n\twidth: 100%;\n\theight: 10vh;\n\tbackground-color: white;\n\tz-index: 2;\n\tbox-shadow: 0 -4px 4px rgba(0, 0, 0, 0.1);\n}\n\n#home,\n#chats,\n#profile {\n\theight: 30px;\n\twidth: 30px;\n\tcursor: pointer;\n}\n\n#explore {\n\theight: 24px;\n\twidth: 34px;\n\tcursor: pointer;\n}\n\n@media screen and (max-width: 768px) {\n\t.menubar {\n\t\tdisplay: flex;\n\t\tjustify-content: space-evenly;\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\theight: 8vh;\n\t\tbackground-color: white;\n\t\tbox-shadow: 0 -4px 4px rgba(0, 0, 0, 0.1);\n\t}\n}\n",""]);const a=o},831:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,".profile {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-direction: column;\n\tfont-family: 'inter';\n\tmargin-top: 30px;\n}\n\n#ButtonSong {\n\tbackground-color: transparent;\n\tborder: none;\n\tcursor: pointer;\n}\n\n#writtenSong {\n\tpadding: 4%;\n\tmargin-top: 2%;\n\tmargin-bottom: 6%;\n\twidth: 40%;\n\tborder-radius: 30px;\n}\n\n.waveSong {\n\tbackground-color: white;\n\tpadding: 20px;\n\tborder-radius: 40px;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\twidth: 60%;\n\theight: 40%;\n\toverflow-y: auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tmargin: auto;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.modalContainer {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-family: Arial;\n}\n\n.post {\n\tbackground-color: #2ec4b6;\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 40px;\n\twidth: 120px;\n\ttransition: background-color 0.2s ease;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\nh2 {\n\tcolor: #ff9f1c;\n\tfont-size: 25px;\n}\n\n.close {\n\tmargin-left: 90%;\n\tmargin-top: 2%;\n\tright: 50px;\n\tcursor: pointer;\n\tfont-family: Arial;\n\tcolor: #2ec4b6;\n}\n\n.image {\n\theight: 200px;\n\tborder-radius: 100px;\n}\n\n.pin {\n\theight: 24px;\n\twidth: 24px;\n}\n\nh1 {\n\tfont-size: 24px;\n\tmargin-bottom: 0;\n\tfont-weight: 700;\n\tcolor: #1e1e1e;\n}\n\n.edit {\n\tbackground-color: transparent;\n\tborder-width: 0;\n\tcolor: #ff9f1c;\n\tcursor: pointer;\n\tfont-family: 'inter';\n\tfont-size: 16px;\n\tmargin-top: 0;\n\tfont-weight: 500;\n}\n\n.fav_song {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-weight: 500;\n\tfont-size: 25px;\n\tcolor: rgb(46, 196, 182);\n\tcursor: pointer;\n}\n\n.name-following {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: center;\n\tfont-family: 'Inter';\n}\n\n.name {\n\tmargin: 5px;\n\tborder: 2px solid rgba(30, 30, 30, 0.2);\n\tborder-radius: 10px;\n\theight: 30px;\n\twidth: 193px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 16px;\n\tcolor: #1e1e1e;\n}\n\n.following {\n\tmargin: 5px;\n\tborder: 2px solid rgba(30, 30, 30, 0.2);\n\tborder-radius: 10px;\n\theight: 30px;\n\twidth: 193px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 16px;\n\tcolor: #1e1e1e;\n\tcursor: pointer;\n}\n\n.followers {\n\theight: 55px;\n\twidth: 400px;\n\tbackground-color: #2ec4b6;\n\tfont-weight: 500;\n\tcolor: white;\n\tborder-radius: 12px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 18px;\n\tmargin: 4px;\n\tbox-shadow: 2px 2px 7px rgba(0, 0, 0, 0.4);\n\tcursor: pointer;\n}\n\n.playlist {\n\theight: 35px;\n\twidth: 400px;\n\tbackground-color: #ff9f1c;\n\tfont-weight: 500;\n\tcolor: white;\n\tborder-radius: 10px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 15px;\n\tmargin: 4px;\n\tborder: none;\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\tmargin-top: 8px;\n\tcursor: pointer;\n}\n\n.todo {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tfont-family: 'inter';\n}\n\n.h1Add {\n\tfont-size: 24px;\n\tmargin-bottom: 15px;\n\tcolor: #1e1e1e;\n\tfont-weight: 700;\n\tfont-family: 'Inter';\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-top: 30px;\n}\n\n.artist,\n.title,\n.coverImage {\n\twidth: 20%;\n\tpadding: 10px;\n\tmargin: 4px;\n\theight: 12px;\n\tborder: 2px solid #ccc;\n\tborder-radius: 10px;\n\tfont-size: 15px;\n}\n\n.create-song {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.artist:focus,\n.title:focus,\n.coverImage:focus {\n\tborder-color: #ff9f1c;\n\toutline: none;\n}\n\n.save {\n\tpadding: 10px 65px;\n\tfont-size: 16px;\n\tborder: none;\n\tborder-radius: 5px;\n\tbackground-color: #ff9f1c;\n\tcolor: white;\n\tcursor: pointer;\n\ttransition: 0.3s;\n\tmargin-left: 45%;\n\tmargin-top: 20px;\n\tmargin-bottom: 20px;\n}\n.save:hover {\n\tbackground-color: #ffbf69;\n}\n\n.playlist:hover {\n\tbackground-color: #ffbf69;\n}\n",""]);const a=o},835:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"input {\n\twidth: 70vh;\n\tpadding: 10px;\n\tmargin: 2vh;\n\tborder: none;\n\tborder-radius: 12px;\n\tfont-size: 15px;\n\tcolor: rgba(30, 30, 30, 0.8);\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\theight: 4vh;\n}\n\n.info {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n\nsvg {\n\tmargin-top: 40px;\n\theight: 35px;\n\twidth: 35px;\n\tcursor: pointer;\n\tposition: absolute;\n\tmargin-right: 90%;\n}\n\ninput:focus {\n\tborder-color: #2ec4b6;\n\toutline: none;\n}\n\n.logo {\n\twidth: 40vh;\n}\n\n.todo {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\talign-content: center;\n\tfont-family: 'inter';\n}\n\n.google {\n\twidth: 9vh;\n\tmargin-right: 100px;\n\tbox-shadow: 2px 2px 9px rgba(0, 0, 0, 0.2);\n\tborder-radius: 2vh;\n\tcursor: pointer;\n}\n\n.facebook {\n\twidth: 6vh;\n\tmargin-right: 100px;\n\tbox-shadow: 2px 2px 9px rgba(0, 0, 0, 0.2);\n\tborder-radius: 2vh;\n\tpadding: 8px;\n\tbackground-color: #fdfdfd;\n\tcursor: pointer;\n}\n\n.outlook {\n\twidth: 6vh;\n\tmargin: 10px;\n\tbox-shadow: 2px 2px 9px rgba(0, 0, 0, 0.2);\n\tborder-radius: 2vh;\n\tpadding: 8px;\n\tbackground-color: #fdfdfd;\n\tcursor: pointer;\n}\n\n#apps {\n\tdisplay: flex;\n\talign-items: center;\n}\n\nbutton {\n\twidth: 73vh;\n\tpadding: 10px;\n\tmargin: 2vh;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 15px;\n\tcolor: white;\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\theight: 6vh;\n\tbackground-color: #2ec4b6;\n\tcursor: pointer;\n\ttransition: 0.3s;\n}\n\nbutton:hover {\n\tbackground-color: #ffbf69;\n}\n\nform {\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n}\n\n.text_create {\n\tcolor: rgba(30, 30, 30, 0.6);\n\tmargin-bottom: 25px;\n\tmargin-left: 12px;\n\tmargin-top: 0;\n\tfont-weight: 600;\n}\n\n.text {\n\tcolor: rgba(30, 30, 30, 0.6);\n\tmargin-top: 45px;\n\tmargin-bottom: 45px;\n\tmargin-right: 10px;\n\tfont-weight: 500;\n}\n\n.already_have {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.signup_btn {\n\tcursor: pointer;\n\tcolor: #ff9f1c;\n}\n\n@media screen and (max-width: 768px) {\n\tinput {\n\t\twidth: 50vh;\n\t\tpadding: 10px;\n\t\tmargin: 2vh;\n\t\tborder: none;\n\t\tborder-radius: 12px;\n\t\tfont-size: 15px;\n\t\tcolor: rgba(30, 30, 30, 0.8);\n\t\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\t\theight: 4vh;\n\t}\n}\n\n.inputs {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: column;\n}\n",""]);const a=o},9:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"input {\n\twidth: 30%;\n\theight: 15%;\n\tpadding: 10px;\n\tmargin: 10px;\n\tborder: 2px solid #ccc;\n\tborder-radius: 10px;\n\tfont-size: 15px;\n\tmargin-left: 15%;\n\tmargin-bottom: 30px;\n}\n\nbody {\n\tcolor: #ccc;\n}\n\nh1 {\n\tfont-family: 'inter';\n\tmargin-left: 15%;\n\tfont-size: 30px;\n\tpadding-top: 50px;\n\tcolor: #1e1e1e;\n\tmargin-top: 0;\n}\n\nh2 {\n\tfont-family: 'inter';\n\tmargin-left: 15%;\n\tfont-size: 30px;\n\tmargin-top: 10px;\n\tcolor: #969696;\n\tmargin-bottom: 20px;\n}\n\ninput:focus {\n\tborder-color: #ff9f1c;\n\toutline: none;\n}\n\nbutton {\n\tpadding: 10px 40px;\n\tfont-size: 16px;\n\tborder: none;\n\tborder-radius: 5px;\n\tbackground-color: #ff9f1c;\n\tcolor: white;\n\tcursor: pointer;\n\ttransition: 0.3s;\n\tmargin-top: 20px;\n\tmargin-bottom: 20px;\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n}\n\nbutton:hover {\n\tbackground-color: #ffbf69;\n}\n\n.input-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n",""]);const a=o},628:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"h1 {\n\tfont-family: 'inter';\n\tmargin-left: 20px;\n\tfont-size: 30px;\n\tmargin-top: 60px;\n\tcolor: #1e1e1e;\n}\n\n.playlists {\n\tdisplay: flex;\n\toverflow-x: auto;\n\tmax-width: 100%;\n\tpadding-bottom: 20px;\n}\n\n.my-friend {\n\tflex: 0 0 auto;\n\tmargin-right: 20px;\n}\n",""]);const a=o},11:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),r=n.n(i),s=n(314),o=n.n(s)()(r());o.push([t.id,"",""]);const a=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},601:t=>{t.exports=function(t){return t[1]}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t=[{id:1,iconohome:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#ff9f1c" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>',iconoexplore:'"https://i.pinimg.com/originals/94/67/f5/9467f504e83345d60816f9b87ac84588.jpg"',iconoprofile:'<svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" style="fill: rgb(32, 32, 32);transform: ;msFilter:;"><path d="M12 2C6.579 2 2 6.579 2 12s4.579 10 10 10 10-4.579 10-10S17.421 2 12 2zm0 5c1.727 0 3 1.272 3 3s-1.273 3-3 3c-1.726 0-3-1.272-3-3s1.274-3 3-3zm-5.106 9.772c.897-1.32 2.393-2.2 4.106-2.2h2c1.714 0 3.209.88 4.106 2.2C15.828 18.14 14.015 19 12 19s-3.828-.86-5.106-2.228z"></path></svg>'}];var e=n(67);const i=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==o||null==a||null==c)throw new s;const l=r<<2|o>>4;if(i.push(l),64!==a){const t=o<<4&240|a>>2;if(i.push(t),64!==c){const t=a<<6&192|c;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=i(t);return r.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=function(t){try{return r.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&a(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},l=t=>{var e,n;return null===(n=null===(e=c())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},h=()=>{var t;return null===(t=c())||void 0===t?void 0:t.config},u=t=>{var e;return null===(e=c())||void 0===e?void 0:e[`_${t}`]};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"object"==typeof indexedDB}catch(t){return!1}}class m extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,m.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,g.prototype.create)}}class g{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(v,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new m(i,o,n)}}const v=/\{\$([^}]+)}/g;function y(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(w(n)&&w(s)){if(!y(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function w(t){return null!==t&&"object"==typeof t}function b(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function E(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function _(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class T{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=I),void 0===i.error&&(i.error=I),void 0===i.complete&&(i.complete=I);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function I(){}function C(t){return t&&t._delegate?t._delegate:t}class S{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const k="[DEFAULT]";class A{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new d;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:k})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=k){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=k){return this.instances.has(t)}getOptions(t=k){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===k?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=k){return this.component?this.component.multipleInstances?t:k:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class x{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new A(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const R=[];var N;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(N||(N={}));const D={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},L=N.INFO,O={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},P=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=O[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class M{constructor(t){this.name=t,this._logLevel=L,this._logHandler=P,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in N))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?D[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...t),this._logHandler(this,N.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...t),this._logHandler(this,N.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,N.INFO,...t),this._logHandler(this,N.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,N.WARN,...t),this._logHandler(this,N.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...t),this._logHandler(this,N.ERROR,...t)}}const F=(t,e)=>e.some((e=>t instanceof e));let U,V;const j=new WeakMap,B=new WeakMap,z=new WeakMap,q=new WeakMap,H=new WeakMap;let $={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return B.get(t);if("objectStoreNames"===e)return t.objectStoreNames||z.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return G(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function K(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(W(this),t),G(j.get(this))}:function(...t){return G(e.apply(W(this),t))}:function(t,...n){const i=e.call(W(this),t,...n);return z.set(i,t.sort?t.sort():[t]),G(i)}:(t instanceof IDBTransaction&&function(t){if(B.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));B.set(t,e)}(t),F(t,U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,$):t);var e}function G(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(G(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&j.set(e,t)})).catch((()=>{})),H.set(e,t),e}(t);if(q.has(t))return q.get(t);const e=K(t);return e!==t&&(q.set(t,e),H.set(e,t)),e}const W=t=>H.get(t),Q=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],J=new Map;function Y(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(J.get(e))return J.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=X.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Q.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return J.set(e,s),s}var Z;Z=$,$={...Z,get:(t,e,n)=>Y(t,e)||Z.get(t,e,n),has:(t,e)=>!!Y(t,e)||Z.has(t,e)};class tt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const et="@firebase/app",nt="0.9.26",it=new M("@firebase/app"),rt="[DEFAULT]",st={[et]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ot=new Map,at=new Map;function ct(t,e){try{t.container.addComponent(e)}catch(n){it.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lt(t){const e=t.name;if(at.has(e))return it.debug(`There were multiple attempts to register component ${e}.`),!1;at.set(e,t);for(const e of ot.values())ct(e,t);return!0}function ht(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ut=new g("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new S("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ut.create("app-deleted",{appName:this._name})}}const ft="10.7.2";function pt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:rt,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw ut.create("bad-app-name",{appName:String(r)});if(n||(n=h()),!n)throw ut.create("no-options");const s=ot.get(r);if(s){if(y(n,s.options)&&y(i,s.config))return s;throw ut.create("duplicate-app",{appName:r})}const o=new x(r);for(const t of at.values())o.addComponent(t);const a=new dt(n,i,o);return ot.set(r,a),a}function mt(t=rt){const e=ot.get(t);if(!e&&t===rt&&h())return pt();if(!e)throw ut.create("no-app",{appName:t});return e}function gt(t,e,n){var i;let r=null!==(i=st[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void it.warn(t.join(" "))}lt(new S(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const vt="firebase-heartbeat-database",yt=1,wt="firebase-heartbeat-store";let bt=null;function Et(){return bt||(bt=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=G(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(G(o.result),t.oldVersion,t.newVersion,G(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(vt,yt,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(wt)}catch(t){console.warn(t)}}}).catch((t=>{throw ut.create("idb-open",{originalErrorMessage:t.message})}))),bt}async function _t(t,e){try{const n=(await Et()).transaction(wt,"readwrite"),i=n.objectStore(wt);await i.put(e,Tt(t)),await n.done}catch(t){if(t instanceof m)it.warn(t.message);else{const e=ut.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});it.warn(e.message)}}}function Tt(t){return`${t.name}!${t.options.appId}`}class It{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new St(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ct();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ct(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),kt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),kt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=o(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Ct(){return(new Date).toISOString().substring(0,10)}class St{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await Et();return await e.transaction(wt).objectStore(wt).get(Tt(t))}catch(t){if(t instanceof m)it.warn(t.message);else{const e=ut.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});it.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return _t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return _t(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function kt(t){return o(JSON.stringify({version:2,heartbeats:t})).length}function At(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}lt(new S("platform-logger",(t=>new tt(t)),"PRIVATE")),lt(new S("heartbeat",(t=>new It(t)),"PRIVATE")),gt(et,nt,""),gt(et,nt,"esm2017"),gt("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const xt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Rt=new g("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nt=new M("@firebase/auth");function Dt(t,...e){Nt.logLevel<=N.ERROR&&Nt.error(`Auth (${ft}): ${t}`,...e)}function Lt(t,...e){throw Pt(t,...e)}function Ot(t,...e){return Pt(t,...e)}function Pt(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Rt.create(t,...e)}function Mt(t,e,...n){if(!t)throw Pt(e,...n)}function Ft(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dt(e),new Error(e)}function Ut(t,e){t||Ft(e)}function Vt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function jt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===jt()||"https:"===jt()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class zt{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ut(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Bt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(t,e){Ut(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Ht{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Kt=new zt(3e4,6e4);function Gt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wt(t,e,n,i,r={}){return Qt(t,r,(async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=b(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Ht.fetch()(Jt(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Qt(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},$t),e);try{const e=new Zt(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw te(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw te(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw te(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw te(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},xt()),{[e]:n});return new g("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);Lt(t,a)}}catch(e){if(e instanceof m)throw e;Lt(t,"network-request-failed",{message:String(e)})}}async function Xt(t,e,n,i,r={}){const s=await Wt(t,e,n,i,r);return"mfaPendingCredential"in s&&Lt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Jt(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?qt(t.config,r):`${t.config.apiScheme}://${r}`}function Yt(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Ot(this.auth,"network-request-failed"))),Kt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function te(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ot(t,e,i);return r.customData._tokenResponse=n,r}function ee(t){return void 0!==t&&void 0!==t.enterprise}class ne{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return Yt(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}function ie(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function re(t){return 1e3*Number(t)}function se(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Dt("JWT malformed, contained fewer than 3 sections"),null;try{const t=a(n);return t?JSON.parse(t):(Dt("Failed to decode base64 JWT payload"),null)}catch(t){return Dt("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function oe(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof m&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class ae{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class ce{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=ie(this.lastLoginAt),this.creationTime=ie(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function le(t){var e;const n=t.auth,i=await t.getIdToken(),r=await oe(t,async function(t,e){return Wt(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Mt(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=At(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ce(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class he{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Mt(t.idToken,"internal-error"),Mt(void 0!==t.idToken,"internal-error"),Mt(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=se(t);return Mt(e,"internal-error"),Mt(void 0!==e.exp,"internal-error"),Mt(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Mt(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await Qt(t,{},(async()=>{const n=b({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Jt(t,i,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new he;return n&&(Mt("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Mt("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Mt("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new he,this.toJSON())}_performRefresh(){return Ft("not implemented")}}function ue(t,e){Mt("string"==typeof t||void 0===t,"internal-error",{appName:e})}class de{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=At(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ce(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await oe(this,this.stsTokenManager.getToken(this.auth,t));return Mt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=C(t),i=await n.getIdToken(e),r=se(i);Mt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ie(re(r.auth_time)),issuedAtTime:ie(re(r.iat)),expirationTime:ie(re(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=C(t);await le(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Mt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new de(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await le(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await oe(this,async function(t,e){return Wt(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:E,stsTokenManager:_}=e;Mt(y&&_,t,"internal-error");const T=he.fromJSON(this.name,_);Mt("string"==typeof y,t,"internal-error"),ue(h,t.name),ue(u,t.name),Mt("boolean"==typeof w,t,"internal-error"),Mt("boolean"==typeof b,t,"internal-error"),ue(d,t.name),ue(f,t.name),ue(p,t.name),ue(m,t.name),ue(g,t.name),ue(v,t.name);const I=new de({uid:y,auth:t,email:u,emailVerified:w,displayName:h,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:v});return E&&Array.isArray(E)&&(I.providerData=E.map((t=>Object.assign({},t)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new he;i.updateFromServerResponse(e);const r=new de({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await le(r),r}}const fe=new Map;function pe(t){Ut(t instanceof Function,"Expected a class definition");let e=fe.get(t);return e?(Ut(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fe.set(t,e),e)}class me{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}me.type="NONE";const ge=me;function ve(t,e,n){return`firebase:${t}:${e}:${n}`}class ye{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ve(this.userKey,i.apiKey,r),this.fullPersistenceKey=ve("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?de._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new ye(pe(ge),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||pe(ge);const s=ve(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=de._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new ye(r,t,n)):new ye(r,t,n)}}function we(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Te(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(be(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ce(e))return"Blackberry";if(Se(e))return"Webos";if(Ee(e))return"Safari";if((e.includes("chrome/")||_e(e))&&!e.includes("edge/"))return"Chrome";if(Ie(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function be(t=f()){return/firefox\//i.test(t)}function Ee(t=f()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _e(t=f()){return/crios\//i.test(t)}function Te(t=f()){return/iemobile/i.test(t)}function Ie(t=f()){return/android/i.test(t)}function Ce(t=f()){return/blackberry/i.test(t)}function Se(t=f()){return/webos/i.test(t)}function ke(t=f()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ae(t=f()){return ke(t)||Ie(t)||Se(t)||Ce(t)||/windows phone/i.test(t)||Te(t)}function xe(t,e=[]){let n;switch(t){case"Browser":n=we(f());break;case"Worker":n=`${we(f())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ft}/${i}`}class Re{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class Ne{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class De{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oe(this),this.idTokenSubscription=new Oe(this),this.beforeStateQueue=new Re(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=pe(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ye.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await le(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?C(t):null;return e&&Mt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(pe(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return Wt(t,"GET","/v2/passwordPolicy",Gt(t,e))}(this),e=new Ne(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new g("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Wt(t,"POST","/v2/accounts:revokeToken",Gt(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&pe(t)||this._popupRedirectResolver;Mt(e,this,"argument-error"),this.redirectPersistenceManager=await ye.create(this,[pe(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Mt(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){Nt.logLevel<=N.WARN&&Nt.warn(`Auth (${ft}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Le(t){return C(t)}class Oe{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new T(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pe(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Ot("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function Me(t){return`__${t}${Math.floor(1e6*Math.random())}`}class Fe{constructor(t){this.type="recaptcha-enterprise",this.auth=Le(t)}async verify(t="verify",e=!1){function n(e,n,i){const r=window.grecaptcha;ee(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{(async function(t,e){return Wt(t,"GET","/v2/recaptchaConfig",Gt(t,e))})(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new ne(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((r=>{if(!e&&ee(window.grecaptcha))n(r,t,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Pe("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function Ue(t,e,n,i=!1){const r=new Fe(t);let s;try{s=await r.verify(n)}catch(t){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ve(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Ue(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await Ue(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}function je(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Be(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class ze{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ft("not implemented")}_getIdTokenResponse(t){return Ft("not implemented")}_linkToIdToken(t,e){return Ft("not implemented")}_getReauthenticationResolver(t){return Ft("not implemented")}}async function qe(t,e){return Wt(t,"POST","/v1/accounts:signUp",e)}async function He(t,e){return Xt(t,"POST","/v1/accounts:signInWithPassword",Gt(t,e))}class $e extends ze{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new $e(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new $e(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Ve(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",He);case"emailLink":return async function(t,e){return Xt(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}(t,{email:this._email,oobCode:this._password});default:Lt(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Ve(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qe);case"emailLink":return async function(t,e){return Xt(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Lt(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Ke(t,e){return Xt(t,"POST","/v1/accounts:signInWithIdp",Gt(t,e))}class Ge extends ze{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ge(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Lt("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=At(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Ge(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Ke(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Ke(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ke(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=b(e)}return t}}const We={USER_NOT_FOUND:"user-not-found"};class Qe extends ze{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Qe({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Qe({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Xt(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Xt(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,e));if(n.temporaryProof)throw te(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Xt(t,"POST","/v1/accounts:signInWithPhoneNumber",Gt(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),We)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Qe({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Xe{constructor(t){var e,n,i,r,s,o;const a=E(_(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Mt(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=E(_(t)).link,n=e?E(_(e)).deep_link_id:null,i=E(_(t)).deep_link_id;return(i?E(_(i)).link:null)||i||n||e||t}(t);try{return new Xe(e)}catch(t){return null}}}class Je{constructor(){this.providerId=Je.PROVIDER_ID}static credential(t,e){return $e._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Xe.parseLink(e);return Mt(n,"argument-error"),$e._fromEmailAndCode(t,n.code,n.tenantId)}}Je.PROVIDER_ID="password",Je.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Je.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ye{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ze extends Ye{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class tn extends Ze{constructor(){super("facebook.com")}static credential(t){return Ge._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tn.credentialFromTaggedObject(t)}static credentialFromError(t){return tn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return tn.credential(t.oauthAccessToken)}catch(t){return null}}}tn.FACEBOOK_SIGN_IN_METHOD="facebook.com",tn.PROVIDER_ID="facebook.com";class en extends Ze{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ge._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return en.credentialFromTaggedObject(t)}static credentialFromError(t){return en.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return en.credential(e,n)}catch(t){return null}}}en.GOOGLE_SIGN_IN_METHOD="google.com",en.PROVIDER_ID="google.com";class nn extends Ze{constructor(){super("github.com")}static credential(t){return Ge._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return nn.credentialFromTaggedObject(t)}static credentialFromError(t){return nn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nn.credential(t.oauthAccessToken)}catch(t){return null}}}nn.GITHUB_SIGN_IN_METHOD="github.com",nn.PROVIDER_ID="github.com";class rn extends Ze{constructor(){super("twitter.com")}static credential(t,e){return Ge._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return rn.credentialFromTaggedObject(t)}static credentialFromError(t){return rn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return rn.credential(e,n)}catch(t){return null}}}async function sn(t,e){return Xt(t,"POST","/v1/accounts:signUp",Gt(t,e))}rn.TWITTER_SIGN_IN_METHOD="twitter.com",rn.PROVIDER_ID="twitter.com";class on{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await de._fromIdTokenResponse(t,n,i),s=an(n);return new on({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=an(n);return new on({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function an(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class cn extends m{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,cn.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new cn(t,e,n,i)}}function ln(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw cn._fromErrorAndOperation(t,n,e,i);throw n}))}async function hn(t,e,n=!1){const i="signIn",r=await ln(t,i,e),s=await on._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function un(t){const e=Le(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}new WeakMap;const dn="__sak";class fn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(dn,"1"),this.storage.removeItem(dn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class pn extends fn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=f();return Ee(t)||ke(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Ae(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);!function(){const t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||r===t.newValue||t.newValue===t.oldValue?i():setTimeout(i,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}pn.type="LOCAL";const mn=pn;class gn extends fn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}gn.type="SESSION";const vn=gn;class yn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new yn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function wn(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}yn.receivers=[];class bn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=wn("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function En(){return window}function _n(){return void 0!==En().WorkerGlobalScope&&"function"==typeof En().importScripts}const Tn="firebaseLocalStorageDb",In="firebaseLocalStorage",Cn="fbase_key";class Sn{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function kn(t,e){return t.transaction([In],e?"readwrite":"readonly").objectStore(In)}function An(){const t=indexedDB.open(Tn,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(In,{keyPath:Cn})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(In)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Tn);return new Sn(t).toPromise()}(),e(await An()))}))}))}async function xn(t,e,n){const i=kn(t,!0).put({[Cn]:e,value:n});return new Sn(i).toPromise()}function Rn(t,e){const n=kn(t,!0).delete(e);return new Sn(n).toPromise()}class Nn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await An()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _n()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yn._getInstance(_n()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new bn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await An();return await xn(t,dn,"1"),await Rn(t,dn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>xn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=kn(t,!1).get(e),i=await new Sn(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Rn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=kn(t,!1).getAll();return new Sn(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Nn.type="LOCAL";const Dn=Nn;Me("rcb"),new zt(3e4,6e4);class Ln{constructor(t){this.providerId=Ln.PROVIDER_ID,this.auth=Le(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(Mt("string"==typeof r,t,"argument-error"),Mt("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Mt("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Wt(t,"POST","/v2/accounts/mfaEnrollment:start",Gt(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Mt("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Mt(n,t,"missing-multi-factor-info");const o=await function(t,e){return Wt(t,"POST","/v2/accounts/mfaSignIn:start",Gt(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Wt(t,"POST","/v1/accounts:sendVerificationCode",Gt(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,C(e))}static credential(t,e){return Qe._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Ln.credentialFromTaggedObject(e)}static credentialFromError(t){return Ln.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Qe._fromTokenResponse(e,n):null}}Ln.PROVIDER_ID="phone",Ln.PHONE_SIGN_IN_METHOD="phone";class On extends ze{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ke(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ke(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ke(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Pn(t){return hn(t.auth,new On(t),t.bypassAuthState)}function Mn(t){const{auth:e,user:n}=t;return Mt(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await oe(t,ln(i,r,e,t),n);Mt(s.idToken,i,"internal-error");const o=se(s.idToken);Mt(o,i,"internal-error");const{sub:a}=o;return Mt(t.uid===a,i,"user-mismatch"),on._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Lt(i,"user-mismatch"),t}}(n,new On(t),t.bypassAuthState)}async function Fn(t){const{auth:e,user:n}=t;return Mt(n,e,"internal-error"),async function(t,e,n=!1){const i=await oe(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return on._forOperation(t,"link",i)}(n,new On(t),t.bypassAuthState)}class Un{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Pn;case"linkViaPopup":case"linkViaRedirect":return Fn;case"reauthViaPopup":case"reauthViaRedirect":return Mn;default:Lt(this.auth,"internal-error")}}resolve(t){Ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vn=new zt(2e3,1e4);class jn extends Un{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,jn.currentPopupAction&&jn.currentPopupAction.cancel(),jn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Mt(t,this.auth,"internal-error"),t}async onExecution(){Ut(1===this.filter.length,"Popup operations only handle one event");const t=wn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Ot(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Vn.get())};t()}}jn.currentPopupAction=null;const Bn="pendingRedirect",zn=new Map;class qn extends Un{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=zn.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return ve(Bn,t.config.apiKey,t.name)}(e),i=function(t){return pe(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}zn.set(this.auth._key(),t)}return this.bypassAuthState||zn.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Hn(t,e){zn.set(t._key(),e)}async function $n(t,e,n=!1){const i=Le(t),r=function(t,e){return e?pe(e):(Mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new qn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Kn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Wn(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Ot(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gn(t))}saveEventToCache(t){this.cachedEventUids.add(Gn(t)),this.lastProcessedEventTime=Date.now()}}function Gn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Wn({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xn=/^https?/;function Jn(t){const e=Vt(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Xn.test(n))return!1;if(Qn.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Yn=new zt(3e4,6e4);function Zn(){const t=En().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let ti=null;function ei(t){return ti=ti||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){Zn(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zn(),n(Ot(t,"network-request-failed"))},timeout:Yn.get()})}if(null===(r=null===(i=En().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=En().gapi)||void 0===s?void 0:s.load)){const e=Me("iframefcb");return En()[e]=()=>{gapi.load?o():n(Ot(t,"network-request-failed"))},Pe(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw ti=null,t}))}(t),ti}const ni=new zt(5e3,15e3),ii={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ri=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function si(t){const e=t.config;Mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qt(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:ft},r=ri.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${b(i).slice(1)}`}const oi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ai{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const ci=encodeURIComponent("fac");async function li(t,e,n,i,r,s){Mt(t.config.authDomain,t,"auth-domain-config-required"),Mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ft,eventId:r};if(e instanceof Ye){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Ze){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${ci}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?qt(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${b(a).slice(1)}${l}`}const hi="webStorageSupport",ui=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vn,this._completeRedirectFn=$n,this._overrideRedirectResult=Hn}async _openPopup(t,e,n,i){var r;return Ut(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},oi),{width:i.toString(),height:r.toString(),top:s,left:o}),l=f().toLowerCase();n&&(a=_e(l)?"_blank":n),be(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=f()){var e;return ke(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new ai(null);const u=window.open(e||"",a,h);Mt(u,t,"popup-blocked");try{u.focus()}catch(t){}return new ai(u)}(t,await li(t,e,n,Vt(),i),wn())}async _openRedirect(t,e,n,i){return await this._originValidation(t),r=await li(t,e,n,Vt(),i),En().location.href=r,new Promise((()=>{}));var r}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Ut(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await ei(t),n=En().gapi;return Mt(n,t,"internal-error"),e.open({where:document.body,url:si(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ii,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=Ot(t,"network-request-failed"),s=En().setTimeout((()=>{i(r)}),ni.get());function o(){En().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new Kn(t);return e.register("authEvent",(e=>(Mt(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(hi,{type:hi},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[hi];void 0!==r&&e(!!r),Lt(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Wt(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(Jn(t))return}catch(t){}Lt(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Ae()||Ee()||ke()}};var di="@firebase/auth",fi="1.5.1";class pi{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const mi=u("authIdTokenMaxAge")||300;let gi=null;var vi;vi="Browser",lt(new S("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Mt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:vi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xe(vi)},c=new De(n,i,r,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(pe);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),lt(new S("auth-internal",(t=>(t=>new pi(t))(Le(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),gt(di,fi,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(vi)),gt(di,fi,"esm2017"),gt("firebase","10.7.2","app");var yi,wi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bi={},Ei=Ei||{},_i=wi||self;function Ti(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ii(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ci="closure_uid_"+(1e9*Math.random()>>>0),Si=0;function ki(t,e,n){return t.call.apply(t.bind,arguments)}function Ai(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function xi(t,e,n){return(xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ki:Ai).apply(null,arguments)}function Ri(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ni(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function Di(){this.s=this.s,this.o=this.o}Di.prototype.s=!1,Di.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Ci)&&t[Ci]||(t[Ci]=++Si))},Di.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Li=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Oi(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Pi(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Ti(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function Mi(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Mi.prototype.h=function(){this.defaultPrevented=!0};var Fi=function(){if(!_i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};_i.addEventListener("test",t,e),_i.removeEventListener("test",t,e)}catch(t){}return t}();function Ui(t){return/^[\s\xa0]*$/.test(t)}function Vi(){var t=_i.navigator;return t&&(t=t.userAgent)?t:""}function ji(t){return-1!=Vi().indexOf(t)}function Bi(t){return Bi[" "](t),t}Bi[" "]=function(){};var zi,qi,Hi,$i=ji("Opera"),Ki=ji("Trident")||ji("MSIE"),Gi=ji("Edge"),Wi=Gi||Ki,Qi=ji("Gecko")&&!(-1!=Vi().toLowerCase().indexOf("webkit")&&!ji("Edge"))&&!(ji("Trident")||ji("MSIE"))&&!ji("Edge"),Xi=-1!=Vi().toLowerCase().indexOf("webkit")&&!ji("Edge");function Ji(){var t=_i.document;return t?t.documentMode:void 0}t:{var Yi="",Zi=(qi=Vi(),Qi?/rv:([^\);]+)(\)|;)/.exec(qi):Gi?/Edge\/([\d\.]+)/.exec(qi):Ki?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qi):Xi?/WebKit\/(\S+)/.exec(qi):$i?/(?:Version)[ \/]?(\S+)/.exec(qi):void 0);if(Zi&&(Yi=Zi?Zi[1]:""),Ki){var tr=Ji();if(null!=tr&&tr>parseFloat(Yi)){zi=String(tr);break t}}zi=Yi}_i.document&&Ki?Hi=Ji()||parseInt(zi,10)||void 0:Hi=void 0;var er=Hi;function nr(t,e){if(Mi.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Qi){t:{try{Bi(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ir[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&nr.$.h.call(this)}}Ni(nr,Mi);var ir={2:"touch",3:"pen",4:"mouse"};nr.prototype.h=function(){nr.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var rr="closure_listenable_"+(1e6*Math.random()|0),sr=0;function or(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++sr,this.fa=this.ia=!1}function ar(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function cr(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function lr(t){const e={};for(const n in t)e[n]=t[n];return e}const hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ur(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<hr.length;e++)n=hr[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function dr(t){this.src=t,this.g={},this.h=0}function fr(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Li(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ar(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function pr(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}dr.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=pr(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new or(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var mr="closure_lm_"+(1e6*Math.random()|0),gr={};function vr(t,e,n,i,r){if(i&&i.once)return wr(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vr(t,e[s],n,i,r);return null}return n=Sr(n),t&&t[rr]?t.O(e,n,Ii(i)?!!i.capture:!!i,r):yr(t,e,n,!1,i,r)}function yr(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Ii(r)?!!r.capture:!!r,a=Ir(t);if(a||(t[mr]=a=new dr(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Tr;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Fi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(_r(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function wr(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)wr(t,e[s],n,i,r);return null}return n=Sr(n),t&&t[rr]?t.P(e,n,Ii(i)?!!i.capture:!!i,r):yr(t,e,n,!0,i,r)}function br(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)br(t,e[s],n,i,r);else i=Ii(i)?!!i.capture:!!i,n=Sr(n),t&&t[rr]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=pr(s=t.g[e],n,i,r))&&(ar(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Ir(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pr(e,n,i,r)),(n=-1<t?e[t]:null)&&Er(n))}function Er(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[rr])fr(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(_r(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Ir(e))?(fr(n,t),0==n.h&&(n.src=null,e[mr]=null)):ar(t)}}}function _r(t){return t in gr?gr[t]:gr[t]="on"+t}function Tr(t,e){if(t.fa)t=!0;else{e=new nr(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Er(t),t=n.call(i,e)}return t}function Ir(t){return(t=t[mr])instanceof dr?t:null}var Cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sr(t){return"function"==typeof t?t:(t[Cr]||(t[Cr]=function(e){return t.handleEvent(e)}),t[Cr])}function kr(){Di.call(this),this.i=new dr(this),this.S=this,this.J=null}function Ar(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new Mi(e,t);else if(e instanceof Mi)e.target=e.target||t;else{var r=e;ur(e=new Mi(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=xr(o,i,!0,e)&&r}if(r=xr(o=e.g=t,i,!0,e)&&r,r=xr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=xr(o=e.g=n[s],i,!1,e)&&r}function xr(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&fr(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Ni(kr,Di),kr.prototype[rr]=!0,kr.prototype.removeEventListener=function(t,e,n,i){br(this,t,e,n,i)},kr.prototype.N=function(){if(kr.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)ar(n[i]);delete e.g[t],e.h--}}this.J=null},kr.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},kr.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Rr=_i.JSON.stringify;function Nr(){var t=Ur;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Dr=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Lr),(t=>t.reset()));class Lr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Or(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Pr(t){_i.setTimeout((()=>{throw t}),0)}let Mr,Fr=!1,Ur=new class{constructor(){this.h=this.g=null}add(t,e){const n=Dr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Vr=()=>{const t=_i.Promise.resolve(void 0);Mr=()=>{t.then(jr)}};var jr=()=>{for(var t;t=Nr();){try{t.h.call(t.g)}catch(t){Pr(t)}var e=Dr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Fr=!1};function Br(t,e){kr.call(this),this.h=t||1,this.g=e||_i,this.j=xi(this.qb,this),this.l=Date.now()}function zr(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function qr(t,e,n){if("function"==typeof t)n&&(t=xi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=xi(t.handleEvent,t)}return 2147483647<Number(e)?-1:_i.setTimeout(t,e||0)}function Hr(t){t.g=qr((()=>{t.g=null,t.i&&(t.i=!1,Hr(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Ni(Br,kr),(yi=Br.prototype).ga=!1,yi.T=null,yi.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ar(this,"tick"),this.ga&&(zr(this),this.start()))}},yi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yi.N=function(){Br.$.N.call(this),zr(this),delete this.g};class $r extends Di{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(_i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(t){Di.call(this),this.h=t,this.g={}}Ni(Kr,Di);var Gr=[];function Wr(t,e,n,i){Array.isArray(n)||(n&&(Gr[0]=n.toString()),n=Gr);for(var r=0;r<n.length;r++){var s=vr(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Qr(t){cr(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Er(t)}),t),t.g={}}function Xr(){this.g=!0}function Jr(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Rr(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}Kr.prototype.N=function(){Kr.$.N.call(this),Qr(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xr.prototype.Ea=function(){this.g=!1},Xr.prototype.info=function(){};var Yr={},Zr=null;function ts(){return Zr=Zr||new kr}function es(t){Mi.call(this,Yr.Ta,t)}function ns(t){const e=ts();Ar(e,new es(e))}function is(t,e){Mi.call(this,Yr.STAT_EVENT,t),this.stat=e}function rs(t){const e=ts();Ar(e,new is(e,t))}function ss(t,e){Mi.call(this,Yr.Ua,t),this.size=e}function os(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return _i.setTimeout((function(){t()}),e)}Yr.Ta="serverreachability",Ni(es,Mi),Yr.STAT_EVENT="statevent",Ni(is,Mi),Yr.Ua="timingevent",Ni(ss,Mi);var as={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ls(){}function hs(t){return t.h||(t.h=t.i())}function us(){}ls.prototype.h=null;var ds,fs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ps(){Mi.call(this,"d")}function ms(){Mi.call(this,"c")}function gs(){}function vs(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Kr(this),this.P=ws,t=Wi?125:void 0,this.V=new Br(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ys}function ys(){this.i=null,this.g="",this.h=!1}Ni(ps,Mi),Ni(ms,Mi),Ni(gs,ls),gs.prototype.g=function(){return new XMLHttpRequest},gs.prototype.i=function(){return{}},ds=new gs;var ws=45e3,bs={},Es={};function _s(t,e,n){t.L=1,t.A=Bs(Ms(e)),t.u=n,t.S=!0,Ts(t,null)}function Ts(t,e){t.G=Date.now(),ks(t),t.B=Ms(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),to(n.i,"t",i),t.o=0,n=t.l.J,t.h=new ys,t.g=ea(t.l,n?e:null,!t.u),0<t.O&&(t.M=new $r(xi(t.Pa,t,t.g),t.O)),Wr(t.U,t.g,"readystatechange",t.nb),e=t.I?lr(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ns(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Is(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Cs(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Ss(t,n),i==Es){4==e&&(t.s=4,rs(14),r=!1),Jr(t.j,t.m,null,"[Incomplete Response]");break}if(i==bs){t.s=4,rs(15),Jr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Jr(t.j,t.m,i,null),Ds(t,i)}Is(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,rs(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Go(e),e.M=!0,rs(11))):(Jr(t.j,t.m,n,"[Invalid Chunked Response]"),Ns(t),Rs(t))}function Ss(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Es:(n=Number(e.substring(n,i)),isNaN(n)?bs:(i+=1)+n>e.length?Es:(e=e.slice(i,i+n),t.o=i+n,e))}function ks(t){t.Y=Date.now()+t.P,As(t,t.P)}function As(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=os(xi(t.lb,t),e)}function xs(t){t.C&&(_i.clearTimeout(t.C),t.C=null)}function Rs(t){0==t.l.H||t.J||Xo(t.l,t)}function Ns(t){xs(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,zr(t.V),Qr(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ds(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||ao(n.i,t)))if(!t.K&&ao(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Qo(n),Vo(n)}Ko(n),rs(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=os(xi(n.ib,n),6e3));if(1>=oo(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Yo(n,11)}else if((t.K||n.g==t)&&Qo(n),!Ui(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(co(s,s.h),s.h=null))}if(i.F){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,js(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=ta(i,i.J?i.pa:null,i.Y),o.K){lo(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(xs(a),ks(a)),i.g=o}else $o(i);0<n.j.length&&Bo(n)}else"stop"!=l[0]&&"close"!=l[0]||Yo(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Yo(n,7):Uo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ns()}catch(t){}}function Ls(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ti(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Ti(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Ti(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(yi=vs.prototype).setTimeout=function(t){this.P=t},yi.nb=function(t){t=t.target;const e=this.M;e&&3==Do(t)?e.l():this.Pa(t)},yi.Pa=function(t){try{if(t==this.g)t:{const h=Do(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||Wi||this.g&&(this.h.h||this.g.ja()||Lo(this.g)))){this.J||4!=h||7==e||ns(),xs(this);var n=this.g.da();this.ca=n;e:if(Is(this)){var i=Lo(this.g);t="";var r=i.length,s=4==Do(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ns(this),Rs(this);var o="";break e}this.h.i=new _i.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ui(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,rs(12),Ns(this),Rs(this);break t}Jr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ds(this,n)}this.S?(Cs(this,h,o),Wi&&this.i&&3==h&&(Wr(this.U,this.V,"tick",this.mb),this.V.start())):(Jr(this.j,this.m,o,null),Ds(this,o)),4==h&&Ns(this),this.i&&!this.J&&(4==h?Xo(this.l,this):(this.i=!1,ks(this)))}else(function(t){const e={};t=(t.g&&2<=Do(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(Ui(t[i]))continue;var n=Or(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,rs(12)):(this.s=0,rs(13)),Ns(this),Rs(this)}}}catch(t){}},yi.mb=function(){if(this.g){var t=Do(this.g),e=this.g.ja();this.o<e.length&&(xs(this),Cs(this,t,e),this.i&&4!=t&&ks(this))}},yi.cancel=function(){this.J=!0,Ns(this)},yi.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(ns(),rs(17)),Ns(this),this.s=2,Rs(this)):As(this,this.Y-t)};var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ps(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ps){this.h=t.h,Fs(this,t.j),this.s=t.s,this.g=t.g,Us(this,t.m),this.l=t.l;var e=t.i,n=new Xs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Vs(this,n),this.o=t.o}else t&&(e=String(t).match(Os))?(this.h=!1,Fs(this,e[1]||"",!0),this.s=zs(e[2]||""),this.g=zs(e[3]||"",!0),Us(this,e[4]),this.l=zs(e[5]||"",!0),Vs(this,e[6]||"",!0),this.o=zs(e[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}function Ms(t){return new Ps(t)}function Fs(t,e,n){t.j=n?zs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Us(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Vs(t,e,n){e instanceof Xs?(t.i=e,function(t,e){e&&!t.j&&(Js(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ys(this,e),to(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=qs(e,Ws)),t.i=new Xs(e,t.h))}function js(t,e,n){t.i.set(e,n)}function Bs(t){return js(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function zs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hs),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hs(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ps.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qs(e,$s,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qs(e,$s,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qs(n,"/"==n.charAt(0)?Gs:Ks,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qs(n,Qs)),t.join("")};var $s=/[#\/\?@]/g,Ks=/[#\?:]/g,Gs=/[#\?]/g,Ws=/[#\?@]/g,Qs=/#/g;function Xs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Js(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ys(t,e){Js(t),e=eo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Zs(t,e){return Js(t),e=eo(t,e),t.g.has(e)}function to(t,e,n){Ys(t,e),0<n.length&&(t.i=null,t.g.set(eo(t,e),Oi(n)),t.h+=n.length)}function eo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(yi=Xs.prototype).add=function(t,e){Js(this),this.i=null,t=eo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},yi.forEach=function(t,e){Js(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},yi.ta=function(){Js(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},yi.Z=function(t){Js(this);let e=[];if("string"==typeof t)Zs(this,t)&&(e=e.concat(this.g.get(eo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},yi.set=function(t,e){return Js(this),this.i=null,Zs(this,t=eo(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},yi.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},yi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var no=class{constructor(t,e){this.g=t,this.map=e}};function io(t){this.l=t||ro,t=_i.PerformanceNavigationTiming?0<(t=_i.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(_i.g&&_i.g.Ka&&_i.g.Ka()&&_i.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ro=10;function so(t){return!!t.h||!!t.g&&t.g.size>=t.j}function oo(t){return t.h?1:t.g?t.g.size:0}function ao(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function co(t,e){t.g?t.g.add(e):t.h=e}function lo(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ho(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Oi(t.i)}io.prototype.cancel=function(){if(this.i=ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var uo=class{stringify(t){return _i.JSON.stringify(t,void 0)}parse(t){return _i.JSON.parse(t,void 0)}};function fo(){this.g=new uo}function po(t,e,n){const i=n||"";try{Ls(t,(function(t,n){let r=t;Ii(t)&&(r=Rr(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function mo(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function go(t){this.l=t.ec||null,this.j=t.ob||!1}function vo(t,e){kr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=yo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ni(go,ls),go.prototype.g=function(){return new vo(this.l,this.j)},go.prototype.i=function(t){return function(){return t}}({}),Ni(vo,kr);var yo=0;function wo(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function bo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Eo(t)}function Eo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(yi=vo.prototype).open=function(t,e){if(this.readyState!=yo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Eo(this)},yi.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||_i).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},yi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bo(this)),this.readyState=yo},yi.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==_i.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wo(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},yi.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?bo(this):Eo(this),3==this.readyState&&wo(this)}},yi.Za=function(t){this.g&&(this.response=this.responseText=t,bo(this))},yi.Ya=function(t){this.g&&(this.response=t,bo(this))},yi.ka=function(){this.g&&bo(this)},yi.setRequestHeader=function(t,e){this.v.append(t,e)},yi.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},yi.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var _o=_i.JSON.parse;function To(t){kr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Io,this.L=this.M=!1}Ni(To,kr);var Io="",Co=/^https?$/i,So=["POST","PUT"];function ko(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ao(t),Ro(t)}function Ao(t){t.F||(t.F=!0,Ar(t,"complete"),Ar(t,"error"))}function xo(t){if(t.h&&void 0!==Ei&&(!t.C[1]||4!=Do(t)||2!=t.da()))if(t.v&&4==Do(t))qr(t.La,0,t);else if(Ar(t,"readystatechange"),4==Do(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(Os)[1]||null;!r&&_i.self&&_i.self.location&&(r=_i.self.location.protocol.slice(0,-1)),i=!Co.test(r?r.toLowerCase():"")}n=i}if(n)Ar(t,"complete"),Ar(t,"success");else{t.m=6;try{var s=2<Do(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Ao(t)}}finally{Ro(t)}}}function Ro(t,e){if(t.g){No(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ar(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function No(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(_i.clearTimeout(t.A),t.A=null)}function Do(t){return t.g?t.g.readyState:0}function Lo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Io:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Oo(t){let e="";return cr(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Po(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Oo(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):js(t,e,n))}function Mo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fo(t){this.Ga=0,this.j=[],this.l=new Xr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Mo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Mo("baseRetryDelayMs",5e3,t),this.hb=Mo("retryDelaySeedMs",1e4,t),this.eb=Mo("forwardChannelMaxRetries",2,t),this.xa=Mo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new io(t&&t.concurrentRequestLimit),this.Ja=new fo,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Uo(t){if(jo(t),3==t.H){var e=t.W++,n=Ms(t.I);if(js(n,"SID",t.K),js(n,"RID",e),js(n,"TYPE","terminate"),qo(t,n),(e=new vs(t,t.l,e)).L=2,e.A=Bs(Ms(n)),n=!1,_i.navigator&&_i.navigator.sendBeacon)try{n=_i.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&_i.Image&&((new Image).src=e.A,n=!0),n||(e.g=ea(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ks(e)}Zo(t)}function Vo(t){t.g&&(Go(t),t.g.cancel(),t.g=null)}function jo(t){Vo(t),t.u&&(_i.clearTimeout(t.u),t.u=null),Qo(t),t.i.cancel(),t.m&&("number"==typeof t.m&&_i.clearTimeout(t.m),t.m=null)}function Bo(t){if(!so(t.i)&&!t.m){t.m=!0;var e=t.Na;Mr||Vr(),Fr||(Mr(),Fr=!0),Ur.add(e,t),t.C=0}}function zo(t,e){var n;n=e?e.m:t.W++;const i=Ms(t.I);js(i,"SID",t.K),js(i,"RID",n),js(i,"AID",t.V),qo(t,i),t.o&&t.s&&Po(i,t.o,t.s),n=new vs(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ho(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),co(t.i,n),_s(n,i,e)}function qo(t,e){t.na&&cr(t.na,(function(t,n){js(e,n,t)})),t.h&&Ls({},(function(t,n){js(e,n,t)}))}function Ho(t,e,n){n=Math.min(t.j.length,n);var i=t.h?xi(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{po(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function $o(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Mr||Vr(),Fr||(Mr(),Fr=!0),Ur.add(e,t),t.A=0}}function Ko(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=os(xi(t.Ma,t),Jo(t,t.A)),t.A++,0))}function Go(t){null!=t.B&&(_i.clearTimeout(t.B),t.B=null)}function Wo(t){t.g=new vs(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ms(t.wa);js(e,"RID","rpc"),js(e,"SID",t.K),js(e,"AID",t.V),js(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&js(e,"TO",t.qa),js(e,"TYPE","xmlhttp"),qo(t,e),t.o&&t.s&&Po(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Bs(Ms(e)),n.u=null,n.S=!0,Ts(n,t)}function Qo(t){null!=t.v&&(_i.clearTimeout(t.v),t.v=null)}function Xo(t,e){var n=null;if(t.g==e){Qo(t),Go(t),t.g=null;var i=2}else{if(!ao(t.i,e))return;n=e.F,lo(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;Ar(i=ts(),new ss(i,n)),Bo(t)}else $o(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(oo(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=os(xi(t.Na,t,e),Jo(t,t.C)),t.C++,0)))}(t,e)||2==i&&Ko(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Yo(t,5);break;case 4:Yo(t,10);break;case 3:Yo(t,6);break;default:Yo(t,2)}}function Jo(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Yo(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=xi(t.pb,t);n||(n=new Ps("//www.google.com/images/cleardot.gif"),_i.location&&"http"==_i.location.protocol||Fs(n,"https"),Bs(n)),function(t,e){const n=new Xr;if(_i.Image){const i=new Image;i.onload=Ri(mo,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ri(mo,n,i,"TestLoadImage: error",!1,e),i.onabort=Ri(mo,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ri(mo,n,i,"TestLoadImage: timeout",!1,e),_i.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else rs(2);t.H=0,t.h&&t.h.za(e),Zo(t),jo(t)}function Zo(t){if(t.H=0,t.ma=[],t.h){const e=ho(t.i);0==e.length&&0==t.j.length||(Pi(t.ma,e),Pi(t.ma,t.j),t.i.i.length=0,Oi(t.j),t.j.length=0),t.h.ya()}}function ta(t,e,n){var i=n instanceof Ps?Ms(n):new Ps(n);if(""!=i.g)e&&(i.g=e+"."+i.g),Us(i,i.m);else{var r=_i.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Ps(null);i&&Fs(s,i),e&&(s.g=e),r&&Us(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&js(i,n,e),js(i,"VER",t.ra),qo(t,i),i}function ea(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new To(new go({ob:n})):new To(t.va)).Oa(t.J),e}function na(){}function ia(){if(Ki&&!(10<=Number(er)))throw Error("Environmental error: no available transport.")}function ra(t,e){kr.call(this),this.g=new Fo(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ui(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ui(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new aa(this)}function sa(t){ps.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function oa(){ms.call(this),this.status=1}function aa(t){this.g=t}function ca(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function la(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function ha(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(yi=To.prototype).Oa=function(t){this.M=t},yi.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ds.g(),this.C=this.u?hs(this.u):hs(ds),this.g.onreadystatechange=xi(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void ko(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=_i.FormData&&t instanceof _i.FormData,!(0<=Li(So,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{No(this),0<this.B&&((this.L=function(t){return Ki&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xi(this.ua,this)):this.A=qr(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ko(this,t)}},yi.ua=function(){void 0!==Ei&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},yi.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ar(this,"complete"),Ar(this,"abort"),Ro(this))},yi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ro(this,!0)),To.$.N.call(this)},yi.La=function(){this.s||(this.G||this.v||this.l?xo(this):this.kb())},yi.kb=function(){xo(this)},yi.isActive=function(){return!!this.g},yi.da=function(){try{return 2<Do(this)?this.g.status:-1}catch(t){return-1}},yi.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},yi.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),_o(e)}},yi.Ia=function(){return this.m},yi.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yi=Fo.prototype).ra=8,yi.H=1,yi.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new vs(this,this.l,t);let s=this.s;if(this.U&&(s?(s=lr(s),ur(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ho(this,r,e),js(n=Ms(this.I),"RID",t),js(n,"CVER",22),this.F&&js(n,"X-HTTP-Session-Id",this.F),qo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Oo(s)))+"&"+e:this.o&&Po(n,this.o,s)),co(this.i,r),this.bb&&js(n,"TYPE","init"),this.P?(js(n,"$req",e),js(n,"SID","null"),r.aa=!0,_s(r,n,null)):_s(r,n,e),this.H=2}}else 3==this.H&&(t?zo(this,t):0==this.j.length||so(this.i)||zo(this))},yi.Ma=function(){if(this.u=null,Wo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=os(xi(this.jb,this),t)}},yi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rs(10),Vo(this),Wo(this))},yi.ib=function(){null!=this.v&&(this.v=null,Vo(this),Ko(this),rs(19))},yi.pb=function(t){t?(this.l.info("Successfully pinged google.com"),rs(2)):(this.l.info("Failed to ping google.com"),rs(1))},yi.isActive=function(){return!!this.h&&this.h.isActive(this)},(yi=na.prototype).Ba=function(){},yi.Aa=function(){},yi.za=function(){},yi.ya=function(){},yi.isActive=function(){return!0},yi.Va=function(){},ia.prototype.g=function(t,e){return new ra(t,e)},Ni(ra,kr),ra.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;rs(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ta(t,null,t.Y),Bo(t)},ra.prototype.close=function(){Uo(this.g)},ra.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Rr(t),t=n);e.j.push(new no(e.fb++,t)),3==e.H&&Bo(e)},ra.prototype.N=function(){this.g.h=null,delete this.j,Uo(this.g),delete this.g,ra.$.N.call(this)},Ni(sa,ps),Ni(oa,ms),Ni(aa,na),aa.prototype.Ba=function(){Ar(this.g,"a")},aa.prototype.Aa=function(t){Ar(this.g,new sa(t))},aa.prototype.za=function(t){Ar(this.g,new oa)},aa.prototype.ya=function(){Ar(this.g,"b")},Ni(ca,(function(){this.blockSize=-1})),ca.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ca.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)la(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){la(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){la(this,i),r=0;break}}this.h=r,this.i+=e},ca.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var ua={};function da(t){return-128<=t&&128>t?function(t,e){var n=ua;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new ha([0|t],0>t?-1:0)}(t)}(t):new ha([0|t],0>t?-1:0)}function fa(t){if(isNaN(t)||!isFinite(t))return ma;if(0>t)return ba(fa(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=pa;return new ha(e,0)}var pa=4294967296,ma=da(0),ga=da(1),va=da(16777216);function ya(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function wa(t){return-1==t.h}function ba(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new ha(n,~t.h).add(ga)}function Ea(t,e){return t.add(ba(e))}function _a(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ta(t,e){this.g=t,this.h=e}function Ia(t,e){if(ya(e))throw Error("division by zero");if(ya(t))return new Ta(ma,ma);if(wa(t))return e=Ia(ba(t),e),new Ta(ba(e.g),ba(e.h));if(wa(e))return e=Ia(t,ba(e)),new Ta(ba(e.g),e.h);if(30<t.g.length){if(wa(t)||wa(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ga,i=e;0>=i.X(t);)n=Ca(n),i=Ca(i);var r=Sa(n,1),s=Sa(i,1);for(i=Sa(i,2),n=Sa(n,2);!ya(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Sa(i,1),n=Sa(n,1)}return e=Ea(t,r.R(e)),new Ta(r,e)}for(r=ma;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=fa(n)).R(e);wa(o)||0<o.X(t);)o=(s=fa(n-=i)).R(e);ya(s)&&(s=ga),r=r.add(s),t=Ea(t,o)}return new Ta(r,t)}function Ca(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new ha(n,t.h)}function Sa(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ha(r,t.h)}(yi=ha.prototype).ea=function(){if(wa(this))return-ba(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:pa+i)*e,e*=pa}return t},yi.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(ya(this))return"0";if(wa(this))return"-"+ba(this).toString(t);for(var e=fa(Math.pow(t,6)),n=this,i="";;){var r=Ia(n,e).g,s=((0<(n=Ea(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(ya(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},yi.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},yi.X=function(t){return wa(t=Ea(this,t))?-1:ya(t)?0:1},yi.abs=function(){return wa(this)?ba(this):this},yi.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new ha(n,-2147483648&n[n.length-1]?-1:0)},yi.R=function(t){if(ya(this)||ya(t))return ma;if(wa(this))return wa(t)?ba(this).R(ba(t)):ba(ba(this).R(t));if(wa(t))return ba(this.R(ba(t)));if(0>this.X(va)&&0>t.X(va))return fa(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,_a(n,2*i+2*r),n[2*i+2*r+1]+=s*c,_a(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,_a(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,_a(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new ha(n,0)},yi.gb=function(t){return Ia(this,t).h},yi.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new ha(n,this.h&t.h)},yi.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new ha(n,this.h|t.h)},yi.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new ha(n,this.h^t.h)},ia.prototype.createWebChannel=ia.prototype.g,ra.prototype.send=ra.prototype.u,ra.prototype.open=ra.prototype.m,ra.prototype.close=ra.prototype.close,as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,cs.COMPLETE="complete",us.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",kr.prototype.listen=kr.prototype.O,To.prototype.listenOnce=To.prototype.P,To.prototype.getLastError=To.prototype.Sa,To.prototype.getLastErrorCode=To.prototype.Ia,To.prototype.getStatus=To.prototype.da,To.prototype.getResponseJson=To.prototype.Wa,To.prototype.getResponseText=To.prototype.ja,To.prototype.send=To.prototype.ha,To.prototype.setWithCredentials=To.prototype.Oa,ca.prototype.digest=ca.prototype.l,ca.prototype.reset=ca.prototype.reset,ca.prototype.update=ca.prototype.j,ha.prototype.add=ha.prototype.add,ha.prototype.multiply=ha.prototype.R,ha.prototype.modulo=ha.prototype.gb,ha.prototype.compare=ha.prototype.X,ha.prototype.toNumber=ha.prototype.ea,ha.prototype.toString=ha.prototype.toString,ha.prototype.getBits=ha.prototype.D,ha.fromNumber=fa,ha.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return ba(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=fa(Math.pow(n,8)),r=ma,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=fa(Math.pow(n,o)),r=r.R(o).add(fa(a))):r=(r=r.R(i)).add(fa(a))}return r};var ka=bi.createWebChannelTransport=function(){return new ia},Aa=bi.getStatEventTarget=function(){return ts()},xa=bi.ErrorCode=as,Ra=bi.EventType=cs,Na=bi.Event=Yr,Da=bi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},La=(bi.FetchXmlHttpFactory=go,bi.WebChannel=us),Oa=bi.XhrIo=To,Pa=bi.Md5=ca,Ma=bi.Integer=ha;const Fa="@firebase/firestore";class Ua{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ua.UNAUTHENTICATED=new Ua(null),Ua.GOOGLE_CREDENTIALS=new Ua("google-credentials-uid"),Ua.FIRST_PARTY=new Ua("first-party-uid"),Ua.MOCK_USER=new Ua("mock-user");let Va="10.7.2";const ja=new M("@firebase/firestore");function Ba(){return ja.logLevel}function za(t,...e){if(ja.logLevel<=N.DEBUG){const n=e.map($a);ja.debug(`Firestore (${Va}): ${t}`,...n)}}function qa(t,...e){if(ja.logLevel<=N.ERROR){const n=e.map($a);ja.error(`Firestore (${Va}): ${t}`,...n)}}function Ha(t,...e){if(ja.logLevel<=N.WARN){const n=e.map($a);ja.warn(`Firestore (${Va}): ${t}`,...n)}}function $a(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Ka(t="Unexpected state"){const e=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: `+t;throw qa(e),new Error(e)}function Ga(t,e){t||Ka()}function Wa(t,e){return t}const Qa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xa extends m{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ja{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ya{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Za{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ua.UNAUTHENTICATED)))}shutdown(){}}class tc{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class ec{constructor(t){this.t=t,this.currentUser=Ua.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Ja;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ja,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{za("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(za("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ja)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(za("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Ga("string"==typeof e.accessToken),new Ya(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ga(null===t||"string"==typeof t),new Ua(t)}}class nc{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Ua.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ic{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new nc(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Ua.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sc{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&za("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,za("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{za("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):za("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Ga("string"==typeof t.token),this.R=t.token,new rc(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function oc(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ac{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=oc(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function cc(t,e){return t<e?-1:t>e?1:0}function lc(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class hc{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xa(Qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return hc.fromMillis(Date.now())}static fromDate(t){return hc.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new hc(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?cc(this.nanoseconds,t.nanoseconds):cc(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class uc{constructor(t){this.timestamp=t}static fromTimestamp(t){return new uc(t)}static min(){return new uc(new hc(0,0))}static max(){return new uc(new hc(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dc{constructor(t,e,n){void 0===e?e=0:e>t.length&&Ka(),void 0===n?n=t.length-e:n>t.length-e&&Ka(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===dc.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof dc?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class fc extends dc{construct(t,e,n){return new fc(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new fc(e)}static emptyPath(){return new fc([])}}const pc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mc extends dc{construct(t,e,n){return new mc(t,e,n)}static isValidIdentifier(t){return pc.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mc.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mc(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Xa(Qa.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Xa(Qa.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Xa(Qa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Xa(Qa.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mc(e)}static emptyPath(){return new mc([])}}class gc{constructor(t){this.path=t}static fromPath(t){return new gc(fc.fromString(t))}static fromName(t){return new gc(fc.fromString(t).popFirst(5))}static empty(){return new gc(fc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===fc.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return fc.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gc(new fc(t.slice()))}}function vc(t){return new yc(t.readTime,t.key,-1)}class yc{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new yc(uc.min(),gc.empty(),-1)}static max(){return new yc(uc.max(),gc.empty(),-1)}}function wc(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=gc.comparator(t.documentKey,e.documentKey),0!==n?n:cc(t.largestBatchId,e.largestBatchId))}const bc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ec{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function _c(t){if(t.code!==Qa.FAILED_PRECONDITION||t.message!==bc)throw t;za("LocalStore","Unexpectedly lost primary lease")}class Tc{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ka(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Tc(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Tc?e:Tc.resolve(e)}catch(t){return Tc.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Tc.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Tc.reject(e)}static resolve(t){return new Tc(((e,n)=>{e(t)}))}static reject(t){return new Tc(((e,n)=>{n(t)}))}static waitFor(t){return new Tc(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Tc.resolve(!1);for(const n of t)e=e.next((t=>t?Tc.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Tc(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Tc(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class Ic{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Ja,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new kc(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Dc(e.target.error);this.V.reject(new kc(t,n))}}static open(t,e,n,i){try{return new Ic(e,t.transaction(i,n))}catch(t){throw new kc(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(za("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new xc(e)}}class Cc{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===Cc.S(f())&&qa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return za("SimpleDb","Removing database:",t),Rc(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!p())return!1;if(Cc.C())return!0;const t=f(),e=Cc.S(t),n=0<e&&e<10,i=Cc.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(za("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new kc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new Xa(Qa.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Xa(Qa.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new kc(t,i))},i.onupgradeneeded=t=>{za("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{za("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=Ic.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Tc.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(za("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Sc{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Rc(this.k.delete())}}class kc extends Xa{constructor(t,e){super(Qa.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ac(t){return"IndexedDbTransactionError"===t.name}class xc{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(za("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(za("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Rc(n)}add(t){return za("SimpleDb","ADD",this.store.name,t,t),Rc(this.store.add(t))}get(t){return Rc(this.store.get(t)).next((e=>(void 0===e&&(e=null),za("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return za("SimpleDb","DELETE",this.store.name,t),Rc(this.store.delete(t))}count(){return za("SimpleDb","COUNT",this.store.name),Rc(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Tc(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Tc(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){za("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Tc(((n,i)=>{e.onerror=t=>{const e=Dc(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Tc(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Sc(r),o=e(r.primaryKey,r.value,s);if(o instanceof Tc){const t=o.catch((t=>(s.done(),Tc.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Tc.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Rc(t){return new Tc(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Dc(t.target.error);n(e)}}))}let Nc=!1;function Dc(t){const e=Cc.S(f());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Xa("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nc||(Nc=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Lc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Oc(t){return null==t}function Pc(t){return 0===t&&1/t==-1/0}Lc._e=-1;function Mc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Uc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Vc{constructor(t,e){this.comparator=t,this.root=e||Bc.EMPTY}insert(t,e){return new Vc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Bc.BLACK,null,null))}remove(t){return new Vc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bc.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new jc(this.root,t,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new jc(this.root,t,this.comparator,!0)}}class jc{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Bc{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Bc.RED,this.left=null!=i?i:Bc.EMPTY,this.right=null!=r?r:Bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Bc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bc.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Bc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ka();if(this.right.isRed())throw Ka();const t=this.left.check();if(t!==this.right.check())throw Ka();return t+(this.isRed()?0:1)}}Bc.EMPTY=null,Bc.RED=!0,Bc.BLACK=!1,Bc.EMPTY=new class{constructor(){this.size=0}get key(){throw Ka()}get value(){throw Ka()}get color(){throw Ka()}get left(){throw Ka()}get right(){throw Ka()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Bc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zc{constructor(t){this.comparator=t,this.data=new Vc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new qc(this.data.getIterator())}getIteratorFrom(t){return new qc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof zc))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new zc(this.comparator);return e.data=t,e}}class qc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hc{constructor(t){this.fields=t,t.sort(mc.comparator)}static empty(){return new Hc([])}unionWith(t){let e=new zc(mc.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Hc(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return lc(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class $c extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kc{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new $c("Invalid base64 string: "+t):t}}(t);return new Kc(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Kc(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return cc(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Kc.EMPTY_BYTE_STRING=new Kc("");const Gc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wc(t){if(Ga(!!t),"string"==typeof t){let e=0;const n=Gc.exec(t);if(Ga(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qc(t.seconds),nanos:Qc(t.nanos)}}function Qc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xc(t){return"string"==typeof t?Kc.fromBase64String(t):Kc.fromUint8Array(t)}function Jc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yc(t){const e=t.mapValue.fields.__previous_value__;return Jc(e)?Yc(e):e}function Zc(t){const e=Wc(t.mapValue.fields.__local_write_time__.timestampValue);return new hc(e.seconds,e.nanos)}class tl{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class el{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new el("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof el&&t.projectId===this.projectId&&t.database===this.database}}const nl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function il(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jc(t)?4:gl(t)?9007199254740991:10:Ka()}function rl(t,e){if(t===e)return!0;const n=il(t);if(n!==il(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zc(t).isEqual(Zc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Wc(t.timestampValue),i=Wc(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Xc(t.bytesValue).isEqual(Xc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Qc(t.geoPointValue.latitude)===Qc(e.geoPointValue.latitude)&&Qc(t.geoPointValue.longitude)===Qc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Qc(t.integerValue)===Qc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Qc(t.doubleValue),i=Qc(e.doubleValue);return n===i?Pc(n)===Pc(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return lc(t.arrayValue.values||[],e.arrayValue.values||[],rl);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Mc(n)!==Mc(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!rl(n[t],i[t])))return!1;return!0}(t,e);default:return Ka()}}function sl(t,e){return void 0!==(t.values||[]).find((t=>rl(t,e)))}function ol(t,e){if(t===e)return 0;const n=il(t),i=il(e);if(n!==i)return cc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return cc(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Qc(t.integerValue||t.doubleValue),i=Qc(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return al(t.timestampValue,e.timestampValue);case 4:return al(Zc(t),Zc(e));case 5:return cc(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Xc(t),i=Xc(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=cc(n[t],i[t]);if(0!==e)return e}return cc(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=cc(Qc(t.latitude),Qc(e.latitude));return 0!==n?n:cc(Qc(t.longitude),Qc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=ol(n[t],i[t]);if(e)return e}return cc(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===nl.mapValue&&e===nl.mapValue)return 0;if(t===nl.mapValue)return 1;if(e===nl.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=cc(i[t],s[t]);if(0!==e)return e;const o=ol(n[i[t]],r[s[t]]);if(0!==o)return o}return cc(i.length,s.length)}(t.mapValue,e.mapValue);default:throw Ka()}}function al(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return cc(t,e);const n=Wc(t),i=Wc(e),r=cc(n.seconds,i.seconds);return 0!==r?r:cc(n.nanos,i.nanos)}function cl(t){return ll(t)}function ll(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Wc(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Xc(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return gc.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=ll(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${ll(t.fields[r])}`;return n+"}"}(t.mapValue):Ka()}function hl(t){return!!t&&"integerValue"in t}function ul(t){return!!t&&"arrayValue"in t}function dl(t){return!!t&&"nullValue"in t}function fl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pl(t){return!!t&&"mapValue"in t}function ml(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fc(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ml(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ml(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gl(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class vl{constructor(t){this.value=t}static empty(){return new vl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!pl(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ml(e)}setAll(t){let e=mc.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=ml(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());pl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return rl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Fc(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new vl(ml(this.value))}}function yl(t){const e=[];return Fc(t.fields,((t,n)=>{const i=new mc([t]);if(pl(n)){const t=yl(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Hc(e)}class wl{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new wl(t,0,uc.min(),uc.min(),uc.min(),vl.empty(),0)}static newFoundDocument(t,e,n,i){return new wl(t,1,e,uc.min(),n,i,0)}static newNoDocument(t,e){return new wl(t,2,e,uc.min(),uc.min(),vl.empty(),0)}static newUnknownDocument(t,e){return new wl(t,3,e,uc.min(),uc.min(),vl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(uc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=uc.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof wl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new wl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bl{constructor(t,e){this.position=t,this.inclusive=e}}function El(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?gc.comparator(gc.fromName(o.referenceValue),n.key):ol(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function _l(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rl(t.position[n],e.position[n]))return!1;return!0}class Tl{constructor(t,e="asc"){this.field=t,this.dir=e}}function Il(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Cl{}class Sl extends Cl{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Ll(t,e,n):"array-contains"===e?new Fl(t,n):"in"===e?new Ul(t,n):"not-in"===e?new Vl(t,n):"array-contains-any"===e?new jl(t,n):new Sl(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ol(t,n):new Pl(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ol(e,this.value)):null!==e&&il(this.value)===il(e)&&this.matchesComparison(ol(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ka()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kl extends Cl{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new kl(t,e)}matches(t){return Al(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Al(t){return"and"===t.op}function xl(t){return function(t){for(const e of t.filters)if(e instanceof kl)return!1;return!0}(t)&&Al(t)}function Rl(t){if(t instanceof Sl)return t.field.canonicalString()+t.op.toString()+cl(t.value);if(xl(t))return t.filters.map((t=>Rl(t))).join(",");{const e=t.filters.map((t=>Rl(t))).join(",");return`${t.op}(${e})`}}function Nl(t,e){return t instanceof Sl?function(t,e){return e instanceof Sl&&t.op===e.op&&t.field.isEqual(e.field)&&rl(t.value,e.value)}(t,e):t instanceof kl?function(t,e){return e instanceof kl&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Nl(n,e.filters[i])),!0)}(t,e):void Ka()}function Dl(t){return t instanceof Sl?function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`}(t):t instanceof kl?function(t){return t.op.toString()+" {"+t.getFilters().map(Dl).join(" ,")+"}"}(t):"Filter"}class Ll extends Sl{constructor(t,e,n){super(t,e,n),this.key=gc.fromName(n.referenceValue)}matches(t){const e=gc.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ol extends Sl{constructor(t,e){super(t,"in",e),this.keys=Ml(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Pl extends Sl{constructor(t,e){super(t,"not-in",e),this.keys=Ml(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ml(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>gc.fromName(t.referenceValue)))}class Fl extends Sl{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ul(e)&&sl(e.arrayValue,this.value)}}class Ul extends Sl{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&sl(this.value.arrayValue,e)}}class Vl extends Sl{constructor(t,e){super(t,"not-in",e)}matches(t){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!sl(this.value.arrayValue,e)}}class jl extends Sl{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ul(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>sl(this.value.arrayValue,t)))}}class Bl{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function zl(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Bl(t,e,n,i,r,s,o)}function ql(t){const e=Wa(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Rl(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>cl(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>cl(t))).join(",")),e.ce=t}return e.ce}function Hl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Il(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Nl(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_l(t.startAt,e.startAt)&&_l(t.endAt,e.endAt)}function $l(t){return gc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Kl{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Gl(t){return new Kl(t)}function Wl(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ql(t){const e=Wa(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new zc(mc.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Tl(i,n))})),t.has(mc.keyField().canonicalString())||e.le.push(new Tl(mc.keyField(),n))}return e.le}function Xl(t){const e=Wa(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return zl(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Tl(t.field,e)}));const n=t.endAt?new bl(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new bl(t.startAt.position,t.startAt.inclusive):null;return zl(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Ql(t))),e.he}function Jl(t,e,n){return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yl(t,e){return Hl(Xl(t),Xl(e))&&t.limitType===e.limitType}function Zl(t){return`${ql(Xl(t))}|lt:${t.limitType}`}function th(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Dl(t))).join(", ")}]`),Oc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>cl(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>cl(t))).join(",")),`Target(${e})`}(Xl(t))}; limitType=${t.limitType})`}function eh(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):gc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Ql(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=El(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Ql(t),e)||t.endAt&&!function(t,e,n){const i=El(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Ql(t),e))}(t,e)}function nh(t){return(e,n)=>{let i=!1;for(const r of Ql(t)){const t=ih(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function ih(t,e,n){const i=t.field.isKeyField()?gc.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?ol(i,r):Ka()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ka()}}class rh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Fc(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return Uc(this.inner)}size(){return this.innerSize}}const sh=new Vc(gc.comparator);function oh(){return sh}const ah=new Vc(gc.comparator);function ch(...t){let e=ah;for(const n of t)e=e.insert(n.key,n);return e}function lh(t){let e=ah;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function hh(){return dh()}function uh(){return dh()}function dh(){return new rh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const fh=new Vc(gc.comparator),ph=new zc(gc.comparator);function mh(...t){let e=ph;for(const n of t)e=e.add(n);return e}const gh=new zc(cc);function vh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function yh(t){return{integerValue:""+t}}function wh(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?yh(e):vh(t,e)}class bh{constructor(){this._=void 0}}function Eh(t,e,n){return t instanceof Ih?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Jc(e)&&(e=Yc(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ch?Sh(t,e):t instanceof kh?Ah(t,e):function(t,e){const n=Th(t,e),i=Rh(n)+Rh(t.Ie);return hl(n)&&hl(t.Ie)?yh(i):vh(t.serializer,i)}(t,e)}function _h(t,e,n){return t instanceof Ch?Sh(t,e):t instanceof kh?Ah(t,e):n}function Th(t,e){return t instanceof xh?function(t){return hl(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Ih extends bh{}class Ch extends bh{constructor(t){super(),this.elements=t}}function Sh(t,e){const n=Nh(e);for(const e of t.elements)n.some((t=>rl(t,e)))||n.push(e);return{arrayValue:{values:n}}}class kh extends bh{constructor(t){super(),this.elements=t}}function Ah(t,e){let n=Nh(e);for(const e of t.elements)n=n.filter((t=>!rl(t,e)));return{arrayValue:{values:n}}}class xh extends bh{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Rh(t){return Qc(t.integerValue||t.doubleValue)}function Nh(t){return ul(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Dh{constructor(t,e){this.version=t,this.transformResults=e}}class Lh{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Lh}static exists(t){return new Lh(void 0,t)}static updateTime(t){return new Lh(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Oh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ph{}function Mh(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Kh(t.key,Lh.none()):new Bh(t.key,t.data,Lh.none());{const n=t.data,i=vl.empty();let r=new zc(mc.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new zh(t.key,i,new Hc(r.toArray()),Lh.none())}}function Fh(t,e,n){t instanceof Bh?function(t,e,n){const i=t.value.clone(),r=Hh(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof zh?function(t,e,n){if(!Oh(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Hh(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(qh(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Uh(t,e,n,i){return t instanceof Bh?function(t,e,n,i){if(!Oh(t.precondition,e))return n;const r=t.value.clone(),s=$h(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof zh?function(t,e,n,i){if(!Oh(t.precondition,e))return n;const r=$h(t.fieldTransforms,i,e),s=e.data;return s.setAll(qh(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Oh(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Vh(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Th(i.transform,t||null);null!=r&&(null===n&&(n=vl.empty()),n.set(i.field,r))}return n||null}function jh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&lc(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ch&&e instanceof Ch||t instanceof kh&&e instanceof kh?lc(t.elements,e.elements,rl):t instanceof xh&&e instanceof xh?rl(t.Ie,e.Ie):t instanceof Ih&&e instanceof Ih}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bh extends Ph{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zh extends Ph{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function qh(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Hh(t,e,n){const i=new Map;Ga(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,_h(o,a,n[r]))}return i}function $h(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Eh(t,s,e))}return i}class Kh extends Ph{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gh extends Ph{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wh{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Fh(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Uh(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Uh(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=uh();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Mh(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(uc.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),mh())}isEqual(t){return this.batchId===t.batchId&&lc(this.mutations,t.mutations,((t,e)=>jh(t,e)))&&lc(this.baseMutations,t.baseMutations,((t,e)=>jh(t,e)))}}class Qh{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Ga(t.mutations.length===n.length);let i=fh;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new Qh(t,e,n,i)}}class Xh{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jh{constructor(t,e){this.count=t,this.unchangedNames=e}}var Yh,Zh;function tu(t){if(void 0===t)return qa("GRPC error has no .code"),Qa.UNKNOWN;switch(t){case Yh.OK:return Qa.OK;case Yh.CANCELLED:return Qa.CANCELLED;case Yh.UNKNOWN:return Qa.UNKNOWN;case Yh.DEADLINE_EXCEEDED:return Qa.DEADLINE_EXCEEDED;case Yh.RESOURCE_EXHAUSTED:return Qa.RESOURCE_EXHAUSTED;case Yh.INTERNAL:return Qa.INTERNAL;case Yh.UNAVAILABLE:return Qa.UNAVAILABLE;case Yh.UNAUTHENTICATED:return Qa.UNAUTHENTICATED;case Yh.INVALID_ARGUMENT:return Qa.INVALID_ARGUMENT;case Yh.NOT_FOUND:return Qa.NOT_FOUND;case Yh.ALREADY_EXISTS:return Qa.ALREADY_EXISTS;case Yh.PERMISSION_DENIED:return Qa.PERMISSION_DENIED;case Yh.FAILED_PRECONDITION:return Qa.FAILED_PRECONDITION;case Yh.ABORTED:return Qa.ABORTED;case Yh.OUT_OF_RANGE:return Qa.OUT_OF_RANGE;case Yh.UNIMPLEMENTED:return Qa.UNIMPLEMENTED;case Yh.DATA_LOSS:return Qa.DATA_LOSS;default:return Ka()}}(Zh=Yh||(Yh={}))[Zh.OK=0]="OK",Zh[Zh.CANCELLED=1]="CANCELLED",Zh[Zh.UNKNOWN=2]="UNKNOWN",Zh[Zh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zh[Zh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zh[Zh.NOT_FOUND=5]="NOT_FOUND",Zh[Zh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zh[Zh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zh[Zh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zh[Zh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zh[Zh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zh[Zh.ABORTED=10]="ABORTED",Zh[Zh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zh[Zh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zh[Zh.INTERNAL=13]="INTERNAL",Zh[Zh.UNAVAILABLE=14]="UNAVAILABLE",Zh[Zh.DATA_LOSS=15]="DATA_LOSS";const eu=new Ma([4294967295,4294967295],0);function nu(t){const e=(new TextEncoder).encode(t),n=new Pa;return n.update(e),new Uint8Array(n.digest())}function iu(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ma([n,i],0),new Ma([r,s],0)]}class ru{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new su(`Invalid padding: ${e}`);if(n<0)throw new su(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new su(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new su(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=Ma.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(Ma.fromNumber(n)));return 1===i.compare(eu)&&(i=new Ma([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=nu(t),[n,i]=iu(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new ru(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=nu(t),[n,i]=iu(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,i,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ou{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,au.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ou(uc.min(),i,new Vc(cc),oh(),mh())}}class au{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new au(n,e,mh(),mh(),mh())}}class cu{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class lu{constructor(t,e){this.targetId=t,this.fe=e}}class hu{constructor(t,e,n=Kc.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class uu{constructor(){this.ge=0,this.pe=pu(),this.ye=Kc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=mh(),e=mh(),n=mh();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Ka()}})),new au(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=pu()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ga(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class du{constructor(t){this.Le=t,this.ke=new Map,this.qe=oh(),this.Qe=fu(),this.Ke=new Vc(cc)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:Ka()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if($l(r))if(0===n){const t=new gc(r.path);this.We(e,t,wl.newNoDocument(t,uc.min()))}else Ga(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=Xc(n).toUint8Array()}catch(t){if(t instanceof $c)return Ha("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new ru(s,i,r)}catch(t){return Ha(t instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.nt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&$l(r.target)){const e=new gc(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,wl.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=mh();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new ou(t,e,this.Ke,this.qe,n);return this.qe=oh(),this.Qe=fu(),this.Ke=new Vc(cc),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new uu,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new zc(cc),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||za("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new uu),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function fu(){return new Vc(gc.comparator)}function pu(){return new Vc(gc.comparator)}const mu={asc:"ASCENDING",desc:"DESCENDING"},gu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vu={and:"AND",or:"OR"};class yu{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function wu(t,e){return t.useProto3Json||Oc(e)?e:{value:e}}function bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Eu(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _u(t,e){return bu(t,e.toTimestamp())}function Tu(t){return Ga(!!t),uc.fromTimestamp(function(t){const e=Wc(t);return new hc(e.seconds,e.nanos)}(t))}function Iu(t,e){return Cu(t,e).canonicalString()}function Cu(t,e){const n=function(t){return new fc(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Su(t){const e=fc.fromString(t);return Ga(Hu(e)),e}function ku(t,e){return Iu(t.databaseId,e.path)}function Au(t,e){const n=Su(e);if(n.get(1)!==t.databaseId.projectId)throw new Xa(Qa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xa(Qa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gc(Nu(n))}function xu(t,e){return Iu(t.databaseId,e)}function Ru(t){return new fc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Nu(t){return Ga(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Du(t,e,n){return{name:ku(t,e),fields:n.value.mapValue.fields}}function Lu(t,e){return{documents:[xu(t,e.path)]}}function Ou(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=xu(t,r);const s=function(t){if(0!==t.length)return zu(kl.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:ju(t.field),direction:Fu(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wu(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function Pu(t){let e=function(t){const e=Su(t);return 4===e.length?fc.emptyPath():Nu(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ga(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Mu(t);return e instanceof kl&&xl(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Tl(Bu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Oc(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new bl(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new bl(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new Kl(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Mu(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Bu(t.unaryFilter.field);return Sl.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Bu(t.unaryFilter.field);return Sl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bu(t.unaryFilter.field);return Sl.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Bu(t.unaryFilter.field);return Sl.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ka()}}(t):void 0!==t.fieldFilter?function(t){return Sl.create(Bu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ka()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return kl.create(t.compositeFilter.filters.map((t=>Mu(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ka()}}(t.compositeFilter.op))}(t):Ka()}function Fu(t){return mu[t]}function Uu(t){return gu[t]}function Vu(t){return vu[t]}function ju(t){return{fieldPath:t.canonicalString()}}function Bu(t){return mc.fromServerFormat(t.fieldPath)}function zu(t){return t instanceof Sl?function(t){if("=="===t.op){if(fl(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NAN"}};if(dl(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(fl(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NAN"}};if(dl(t.value))return{unaryFilter:{field:ju(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(t.field),op:Uu(t.op),value:t.value}}}(t):t instanceof kl?function(t){const e=t.getFilters().map((t=>zu(t)));return 1===e.length?e[0]:{compositeFilter:{op:Vu(t.op),filters:e}}}(t):Ka()}function qu(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Hu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class $u{constructor(t,e,n,i,r=uc.min(),s=uc.min(),o=Kc.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new $u(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Ku{constructor(t){this.ct=t}}function Gu(t){const e=Pu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Jl(e,e.limit,"L"):e}class Wu{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Qc(t.integerValue));else if("doubleValue"in t){const n=Qc(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Pc(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Xc(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?gl(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Ka()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),gc.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}Wu.bt=new Wu;class Qu{constructor(){this._n=new Xu}addToCollectionParentIndex(t,e){return this._n.add(e),Tc.resolve()}getCollectionParents(t,e){return Tc.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Tc.resolve()}deleteFieldIndex(t,e){return Tc.resolve()}deleteAllFieldIndexes(t){return Tc.resolve()}createTargetIndexes(t,e){return Tc.resolve()}getDocumentsMatchingTarget(t,e){return Tc.resolve(null)}getIndexType(t,e){return Tc.resolve(0)}getFieldIndexes(t,e){return Tc.resolve([])}getNextCollectionGroupToUpdate(t){return Tc.resolve(null)}getMinOffset(t,e){return Tc.resolve(yc.min())}getMinOffsetFromCollectionGroup(t,e){return Tc.resolve(yc.min())}updateCollectionGroup(t,e,n){return Tc.resolve()}updateIndexEntries(t,e){return Tc.resolve()}}class Xu{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new zc(fc.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new zc(fc.comparator)).toArray()}}new Uint8Array(0);class Ju{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Ju(t,Ju.DEFAULT_COLLECTION_PERCENTILE,Ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ju.DEFAULT_COLLECTION_PERCENTILE=10,Ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ju.DEFAULT=new Ju(41943040,Ju.DEFAULT_COLLECTION_PERCENTILE,Ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ju.DISABLED=new Ju(-1,0,0);class Yu{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Yu(0)}static Bn(){return new Yu(-1)}}class Zu{constructor(){this.changes=new rh((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,wl.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Tc.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class td{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class ed{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Uh(n.mutation,t,Hc.empty(),hc.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,mh()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=mh()){const i=hh();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=ch();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=hh();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,mh())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=oh();const s=dh(),o=dh();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof zh)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Uh(o.mutation,e,o.mutation.getFieldMask(),hc.now())):s.set(e.key,Hc.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new td(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=dh();let i=new Vc(((t,e)=>t-e)),r=mh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Hc.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||mh()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=uh();c.forEach((t=>{if(!r.has(t)){const i=Mh(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Tc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return gc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Tc.resolve(hh());let o=-1,a=r;return s.next((e=>Tc.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Tc.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,mh()))).next((t=>({batchId:o,changes:lh(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gc(e)).next((t=>{let e=ch();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=ch();return this.indexManager.getCollectionParents(t,r).next((o=>Tc.forEach(o,(o=>{const a=function(t,e){return new Kl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,wl.newInvalidDocument(i)))}));let n=ch();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&Uh(s.mutation,i,Hc.empty(),hc.now()),eh(e,i)&&(n=n.insert(t,i))})),n}))}}class nd{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Tc.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Tu(t.createTime)}}(e)),Tc.resolve()}getNamedQuery(t,e){return Tc.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:Gu(t.bundledQuery),readTime:Tu(t.readTime)}}(e)),Tc.resolve()}}class id{constructor(){this.overlays=new Vc(gc.comparator),this.hr=new Map}getOverlay(t,e){return Tc.resolve(this.overlays.get(e))}getOverlays(t,e){const n=hh();return Tc.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Tc.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Tc.resolve()}getOverlaysForCollection(t,e,n){const i=hh(),r=e.length+1,s=new gc(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Tc.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Vc(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=hh(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=hh(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Tc.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Xh(e,n));let r=this.hr.get(e);void 0===r&&(r=mh(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class rd{constructor(){this.Pr=new zc(sd.Ir),this.Tr=new zc(sd.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new sd(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new sd(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new gc(new fc([])),n=new sd(e,t),i=new sd(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new gc(new fc([])),n=new sd(e,t),i=new sd(e,t+1);let r=mh();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new sd(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class sd{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return gc.comparator(t.key,e.key)||cc(t.pr,e.pr)}static Er(t,e){return cc(t.pr,e.pr)||gc.comparator(t.key,e.key)}}class od{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new zc(sd.Ir)}checkEmpty(t){return Tc.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Wh(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new sd(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Tc.resolve(s)}lookupMutationBatch(t,e){return Tc.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Tc.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Tc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Tc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new sd(e,0),i=new sd(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Tc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new zc(cc);return e.forEach((t=>{const e=new sd(t,0),i=new sd(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Tc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;gc.isDocumentKey(r)||(r=r.child(""));const s=new sd(new gc(r),0);let o=new zc(cc);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Tc.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Ga(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Tc.forEach(e.mutations,(i=>{const r=new sd(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new sd(e,0),i=this.wr.firstAfterOrEqual(n);return Tc.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Tc.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class ad{constructor(t){this.vr=t,this.docs=new Vc(gc.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Tc.resolve(n?n.document.mutableCopy():wl.newInvalidDocument(e))}getEntries(t,e){let n=oh();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():wl.newInvalidDocument(t))})),Tc.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=oh();const s=e.path,o=new gc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||wc(vc(o),n)<=0||(i.has(o.key)||eh(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Tc.resolve(r)}getAllFromCollectionGroup(t,e,n,i){Ka()}Fr(t,e){return Tc.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new cd(this)}getSize(t){return Tc.resolve(this.size)}}class cd extends Zu{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Tc.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class ld{constructor(t){this.persistence=t,this.Mr=new rh((t=>ql(t)),Hl),this.lastRemoteSnapshotVersion=uc.min(),this.highestTargetId=0,this.Or=0,this.Nr=new rd,this.targetCount=0,this.Br=Yu.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Tc.resolve()}getLastRemoteSnapshotVersion(t){return Tc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Tc.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Tc.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Tc.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new Yu(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Tc.resolve()}updateTargetData(t,e){return this.qn(e),Tc.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Tc.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Tc.waitFor(r).next((()=>i))}getTargetCount(t){return Tc.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Tc.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Tc.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Tc.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Tc.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Tc.resolve(n)}containsKey(t,e){return Tc.resolve(this.Nr.containsKey(e))}}class hd{constructor(t,e){this.Lr={},this.overlays={},this.kr=new Lc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new ld(this),this.indexManager=new Qu,this.remoteDocumentCache=function(t){return new ad(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Ku(e),this.$r=new nd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new id,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new od(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){za("MemoryPersistence","Starting transaction:",t);const i=new ud(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Tc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class ud extends Ec{constructor(t){super(),this.currentSequenceNumber=t}}class dd{constructor(t){this.persistence=t,this.zr=new rd,this.jr=null}static Hr(t){return new dd(t)}get Jr(){if(this.jr)return this.jr;throw Ka()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Tc.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Tc.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Tc.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tc.forEach(this.Jr,(n=>{const i=gc.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,uc.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Tc.or([()=>Tc.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class fd{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=mh(),i=mh();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new fd(t,e.fromCache,n,i)}}class pd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class md{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){var t;const e=null===(t=c())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()||!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome")?Cc.v(f())>0?6:4:8}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new pd;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(Ba()<=N.DEBUG&&za("QueryEngine","SDK will not create cache indexes for query:",th(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Tc.resolve()):(Ba()<=N.DEBUG&&za("QueryEngine","Query:",th(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Ba()<=N.DEBUG&&za("QueryEngine","The SDK decides to create cache indexes for query:",th(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Xl(e))):Tc.resolve())}ji(t,e){if(Wl(e))return Tc.resolve(null);let n=Xl(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Jl(e,null,"F"),n=Xl(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=mh(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,Jl(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return Wl(e)||i.isEqual(uc.min())?Tc.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Tc.resolve(null):(Ba()<=N.DEBUG&&za("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),th(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=uc.fromTimestamp(1e9===i?new hc(n+1,0):new hc(n,i));return new yc(r,gc.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new zc(nh(t));return e.forEach(((e,i)=>{eh(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return Ba()<=N.DEBUG&&za("QueryEngine","Using full collection scan to execute query:",th(e)),this.zi.getDocumentsMatchingQuery(t,e,yc.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class gd{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new Vc(cc),this.rs=new rh((t=>ql(t)),Hl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ed(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function vd(t,e){const n=Wa(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=mh();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function yd(t){const e=Wa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function wd(t,e){const n=Wa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function bd(t,e,n){const i=Wa(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Ac(t))throw t;za("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function Ed(t,e,n){const i=Wa(t);let r=uc.min(),s=mh();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=Wa(t),r=i.rs.get(n);return void 0!==r?Tc.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,Xl(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:uc.min(),n?s:mh()))).next((t=>(function(t,e,n){let i=t.ss.get(e)||uc.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}(i,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,hs:s})))))}class _d{constructor(){this.activeTargetIds=gh}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Td{constructor(){this.no=new _d,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new _d,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Id{io(t){}shutdown(){}}class Cd{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){za("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){za("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Sd=null;function kd(){return null===Sd?Sd=268435456+Math.round(2147483648*Math.random()):Sd++,"0x"+Sd.toString(16)}const Ad={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xd{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const Rd="WebChannelConnection";class Nd extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=kd(),o=this.bo(t,e.toUriEncodedString());za("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(za("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Ha("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Va,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Ad[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=kd();return new Promise(((s,o)=>{const a=new Oa;a.setWithCredentials(!0),a.listenOnce(Ra.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case xa.NO_ERROR:const e=a.getResponseJson();za(Rd,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case xa.TIMEOUT:za(Rd,`RPC '${t}' ${r} timed out`),o(new Xa(Qa.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const n=a.getStatus();if(za(Rd,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Qa).indexOf(e)>=0?e:Qa.UNKNOWN}(e.status);o(new Xa(t,e.message))}else o(new Xa(Qa.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xa(Qa.UNAVAILABLE,"Connection failed."));break;default:Ka()}}finally{za(Rd,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);za(Rd,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=kd(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ka(),o=Aa(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");za(Rd,`Creating RPC '${t}' stream ${i}: ${l}`,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const f=new xd({lo:e=>{d?za(Rd,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(u||(za(Rd,`Opening RPC '${t}' stream ${i} transport.`),h.open(),u=!0),za(Rd,`RPC '${t}' stream ${i} sending:`,e),h.send(e))},ho:()=>h.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(h,La.EventType.OPEN,(()=>{d||za(Rd,`RPC '${t}' stream ${i} transport opened.`)})),p(h,La.EventType.CLOSE,(()=>{d||(d=!0,za(Rd,`RPC '${t}' stream ${i} transport closed`),f.Vo())})),p(h,La.EventType.ERROR,(e=>{d||(d=!0,Ha(Rd,`RPC '${t}' stream ${i} transport errored:`,e),f.Vo(new Xa(Qa.UNAVAILABLE,"The operation could not be completed")))})),p(h,La.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Ga(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){za(Rd,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Yh[t];if(void 0!==e)return tu(e)}(e),r=o.message;void 0===n&&(n=Qa.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Vo(new Xa(n,r)),h.close()}else za(Rd,`RPC '${t}' stream ${i} received:`,r),f.mo(r)}})),p(o,Na.STAT_EVENT,(e=>{e.stat===Da.PROXY?za(Rd,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Da.NOPROXY&&za(Rd,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function Dd(){return"undefined"!=typeof document?document:null}function Ld(t){return new yu(t,!0)}class Od{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&za("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Pd{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Od(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===Qa.RESOURCE_EXHAUSTED?(qa(e.toString()),qa("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===Qa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new Xa(Qa.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return za("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(za("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Md extends Pd{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ka()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(Ga(void 0===e||"string"==typeof e),Kc.fromBase64String(e||"")):(Ga(void 0===e||e instanceof Uint8Array),Kc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Qa.UNKNOWN:tu(t.code);return new Xa(e,t.message||"")}(o);n=new hu(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Au(t,i.document.name),s=Tu(i.document.updateTime),o=i.document.createTime?Tu(i.document.createTime):uc.min(),a=new vl({mapValue:{fields:i.document.fields}}),c=wl.newFoundDocument(r,s,o,a),l=i.targetIds||[],h=i.removedTargetIds||[];n=new cu(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Au(t,i.document),s=i.readTime?Tu(i.readTime):uc.min(),o=wl.newNoDocument(r,s),a=i.removedTargetIds||[];n=new cu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Au(t,i.document),s=i.removedTargetIds||[];n=new cu([],s,r,null)}else{if(!("filter"in e))return Ka();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new Jh(i,r),o=t.targetId;n=new lu(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return uc.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?uc.min():e.readTime?Tu(e.readTime):uc.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=Ru(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=$l(i)?{documents:Lu(t,i)}:{query:Ou(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Eu(t,e.resumeToken);const i=wu(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(uc.min())>0){n.readTime=bu(t,e.snapshotVersion.toTimestamp());const i=wu(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ka()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=Ru(this.serializer),e.removeTarget=t,this.t_(e)}}class Fd extends Pd{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(Ga(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(Ga(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Tu(t.updateTime):Tu(e);return n.isEqual(uc.min())&&(n=Tu(e)),new Dh(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Tu(t.commitTime);return this.listener.T_(n,e)}return Ga(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Ru(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Bh)n={update:Du(t,e.key,e.value)};else if(e instanceof Kh)n={delete:ku(t,e.key)};else if(e instanceof zh)n={update:Du(t,e.key,e.data),updateMask:qu(e.fieldMask)};else{if(!(e instanceof Gh))return Ka();n={verify:ku(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Ih)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ch)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xh)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw Ka()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:_u(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ka()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class Ud extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Xa(Qa.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,Cu(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Qa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Xa(Qa.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Cu(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Qa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Xa(Qa.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Vd{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(qa(e),this.g_=!1):za("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class jd{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{Qd(this)&&(za("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Wa(t);e.v_.add(4),await zd(e),e.x_.set("Unknown"),e.v_.delete(4),await Bd(e)}(this))}))})),this.x_=new Vd(n,i)}}async function Bd(t){if(Qd(t))for(const e of t.F_)await e(!0)}async function zd(t){for(const e of t.F_)await e(!1)}function qd(t,e){const n=Wa(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Wd(n)?Gd(n):ff(n).Jo()&&$d(n,e))}function Hd(t,e){const n=Wa(t),i=ff(n);n.C_.delete(e),i.Jo()&&Kd(n,e),0===n.C_.size&&(i.Jo()?i.Xo():Qd(n)&&n.x_.set("Unknown"))}function $d(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(uc.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ff(t).c_(e)}function Kd(t,e){t.O_.Oe(e),ff(t).l_(e)}function Gd(t){t.O_=new du({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ff(t).start(),t.x_.p_()}function Wd(t){return Qd(t)&&!ff(t).Ho()&&t.C_.size>0}function Qd(t){return 0===Wa(t).v_.size}function Xd(t){t.O_=void 0}async function Jd(t){t.C_.forEach(((e,n)=>{$d(t,e)}))}async function Yd(t,e){Xd(t),Wd(t)?(t.x_.S_(e),Gd(t)):t.x_.set("Unknown")}async function Zd(t,e,n){if(t.x_.set("Online"),e instanceof hu&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){za("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await tf(t,n)}else if(e instanceof cu?t.O_.$e(e):e instanceof lu?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(uc.min()))try{const e=await yd(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(Kc.EMPTY_BYTE_STRING,i.snapshotVersion)),Kd(t,e);const r=new $u(i.target,e,n,i.sequenceNumber);$d(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){za("RemoteStore","Failed to raise snapshot:",e),await tf(t,e)}}async function tf(t,e,n){if(!Ac(e))throw e;t.v_.add(1),await zd(t),t.x_.set("Offline"),n||(n=()=>yd(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{za("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Bd(t)}))}function ef(t,e){return e().catch((n=>tf(t,n,e)))}async function nf(t){const e=Wa(t),n=pf(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;rf(e);)try{const t=await wd(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,sf(e,t)}catch(t){await tf(e,t)}of(e)&&af(e)}function rf(t){return Qd(t)&&t.D_.length<10}function sf(t,e){t.D_.push(e);const n=pf(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function of(t){return Qd(t)&&!pf(t).Ho()&&t.D_.length>0}function af(t){pf(t).start()}async function cf(t){pf(t).d_()}async function lf(t){const e=pf(t);for(const n of t.D_)e.I_(n.mutations)}async function hf(t,e,n){const i=t.D_.shift(),r=Qh.from(i,e,n);await ef(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await nf(t)}async function uf(t,e){e&&pf(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return Ka();case Qa.CANCELLED:case Qa.UNKNOWN:case Qa.DEADLINE_EXCEEDED:case Qa.RESOURCE_EXHAUSTED:case Qa.INTERNAL:case Qa.UNAVAILABLE:case Qa.UNAUTHENTICATED:return!1;case Qa.INVALID_ARGUMENT:case Qa.NOT_FOUND:case Qa.ALREADY_EXISTS:case Qa.PERMISSION_DENIED:case Qa.FAILED_PRECONDITION:case Qa.ABORTED:case Qa.OUT_OF_RANGE:case Qa.UNIMPLEMENTED:case Qa.DATA_LOSS:return!0}}(t)&&t!==Qa.ABORTED}(e.code)){const n=t.D_.shift();pf(t).Zo(),await ef(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await nf(t)}}(t,e),of(t)&&af(t)}async function df(t,e){const n=Wa(t);n.asyncQueue.verifyOperationInProgress(),za("RemoteStore","RemoteStore received new credentials");const i=Qd(n);n.v_.add(3),await zd(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Bd(n)}function ff(t){return t.N_||(t.N_=function(t,e,n){const i=Wa(t);return i.R_(),new Md(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:Jd.bind(null,t),To:Yd.bind(null,t),u_:Zd.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),Wd(t)?Gd(t):t.x_.set("Unknown")):(await t.N_.stop(),Xd(t))}))),t.N_}function pf(t){return t.B_||(t.B_=function(t,e,n){const i=Wa(t);return i.R_(),new Fd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:cf.bind(null,t),To:uf.bind(null,t),E_:lf.bind(null,t),T_:hf.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await nf(t)):(await t.B_.stop(),t.D_.length>0&&(za("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class mf{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new mf(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xa(Qa.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gf(t,e){if(qa("AsyncQueue",`${e}: ${t}`),Ac(t))return new Xa(Qa.UNAVAILABLE,`${e}: ${t}`);throw t}class vf{constructor(t){this.comparator=t?(e,n)=>t(e,n)||gc.comparator(e.key,n.key):(t,e)=>gc.comparator(t.key,e.key),this.keyedMap=ch(),this.sortedSet=new Vc(this.comparator)}static emptySet(t){return new vf(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof vf))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new vf;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class yf{constructor(){this.L_=new Vc(gc.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):Ka():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class wf{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new wf(t,e,vf.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class bf{constructor(){this.q_=void 0,this.Q_=[]}}class Ef{constructor(){this.queries=new rh((t=>Zl(t)),Yl),this.onlineState="Unknown",this.K_=new Set}}async function _f(t,e){const n=Wa(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new bf),r)try{s.q_=await n.onListen(i)}catch(t){const n=gf(t,`Initialization of query '${th(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&Sf(n)}async function Tf(t,e){const n=Wa(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),r=0===s.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function If(t,e){const n=Wa(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.Q_)e.W_(t)&&(i=!0);r.q_=t}}i&&Sf(n)}function Cf(t,e,n){const i=Wa(t),r=i.queries.get(e);if(r)for(const t of r.Q_)t.onError(n);i.queries.delete(e)}function Sf(t){t.K_.forEach((t=>{t.next()}))}class kf{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new wf(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=wf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class Af{constructor(t){this.key=t}}class xf{constructor(t){this.key=t}}class Rf{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=mh(),this.mutatedKeys=mh(),this.ua=nh(t),this.ca=new vf(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new yf,i=e?e.ca:this.ca;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),h=eh(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),f=!0):this.Ia(l,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.ua(h,a)>0||c&&this.ua(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),f=!0):l&&!h&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:r}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ka()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),i=null!=i&&i;const o=e&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new wf(this.query,t.ca,r,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new yf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=mh(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new xf(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new Af(n))})),e}Ra(t){this.oa=t.hs,this.aa=mh();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return wf.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Nf{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Df{constructor(t){this.key=t,this.ma=!1}}class Lf{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new rh((t=>Zl(t)),Yl),this.pa=new Map,this.ya=new Set,this.wa=new Vc(gc.comparator),this.Sa=new Map,this.ba=new rd,this.Da={},this.Ca=new Map,this.va=Yu.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Of(t,e){const n=function(t){const e=Wa(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uf.bind(null,e),e.fa.u_=If.bind(null,e.eventManager),e.fa.xa=Cf.bind(null,e.eventManager),e}(t);let i,r;const s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const t=await function(t,e){const n=Wa(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,Tc.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new $u(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}(n.localStore,Xl(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await async function(t,e,n,i,r){t.Ma=(e,n,i)=>async function(t,e,n,i){let r=e.view.ha(n);r.Xi&&(r=await Ed(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return $f(t,e.targetId,a.da),a.snapshot}(t,e,n,i);const s=await Ed(t.localStore,e,!0),o=new Rf(e,s.hs),a=o.ha(s.documents),c=au.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);$f(t,n,l.da);const h=new Nf(e,n,o);return t.ga.set(e,h),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&qd(n.remoteStore,t)}return r}async function Pf(t,e){const n=Wa(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((t=>!Yl(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await bd(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Hd(n.remoteStore,i.targetId),qf(n,i.targetId)})).catch(_c)):(qf(n,i.targetId),await bd(n.localStore,i.targetId,!0))}async function Mf(t,e){const n=Wa(t);try{const t=await function(t,e){const n=Wa(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Kc.EMPTY_BYTE_STRING,uc.min()).withLastLimboFreeSnapshotVersion(uc.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(t,l))}));let a=oh(),c=mh();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n){let i=mh(),r=mh();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=oh();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(uc.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):za("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}(t,s,e.documentUpdates).next((t=>{a=t.cs,c=t.ls}))),!i.isEqual(uc.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Tc.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ns=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Sa.get(e);i&&(Ga(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ma=!0:t.modifiedDocuments.size>0?Ga(i.ma):t.removedDocuments.size>0&&(Ga(i.ma),i.ma=!1))})),await Wf(n,t,e)}catch(t){await _c(t)}}function Ff(t,e,n){const i=Wa(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Wa(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(i=!0)})),i&&Sf(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Uf(t,e,n){const i=Wa(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),s=r&&r.key;if(s){let t=new Vc(gc.comparator);t=t.insert(s,wl.newNoDocument(s,uc.min()));const n=mh().add(s),r=new ou(uc.min(),new Map,new Vc(cc),t,n);await Mf(i,r),i.wa=i.wa.remove(s),i.Sa.delete(e),Gf(i)}else await bd(i.localStore,e,!1).then((()=>qf(i,e,n))).catch(_c)}async function Vf(t,e){const n=Wa(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Wa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Tc.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Ga(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=mh();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);zf(n,i,null),Bf(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wf(n,t)}catch(t){await _c(t)}}async function jf(t,e,n){const i=Wa(t);try{const t=await function(t,e){const n=Wa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Ga(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);zf(i,e,n),Bf(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Wf(i,t)}catch(n){await _c(n)}}function Bf(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function zf(t,e,n){const i=Wa(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||Hf(t,e)}))}function Hf(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Hd(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Gf(t))}function $f(t,e,n){for(const i of n)i instanceof Af?(t.ba.addReference(i.key,e),Kf(t,i)):i instanceof xf?(za("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||Hf(t,i.key)):Ka()}function Kf(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(za("SyncEngine","New document in limbo: "+n),t.ya.add(i),Gf(t))}function Gf(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new gc(fc.fromString(e)),i=t.va.next();t.Sa.set(i,new Df(n)),t.wa=t.wa.insert(n,i),qd(t.remoteStore,new $u(Xl(Gl(n.path)),i,"TargetPurposeLimboResolution",Lc._e))}}async function Wf(t,e,n){const i=Wa(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=fd.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=Wa(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Tc.forEach(e,(e=>Tc.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Tc.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Ac(t))throw t;za("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Qf(t,e){const n=Wa(t);if(!n.currentUser.isEqual(e)){za("SyncEngine","User change. New user:",e.toKey());const t=await vd(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new Xa(Qa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Wf(n,t.us)}}function Xf(t,e){const n=Wa(t),i=n.Sa.get(e);if(i&&i.ma)return mh().add(i.key);{let t=mh();const i=n.pa.get(e);if(!i)return t;for(const e of i){const i=n.ga.get(e);t=t.unionWith(i.view.la)}return t}}function Jf(t){const e=Wa(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jf.bind(null,e),e}class Yf{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Ld(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new gd(t,e,n,i)}(this.persistence,new md,t.initialUser,this.serializer)}createPersistence(t){return new hd(dd.Hr,this.serializer)}createSharedClientState(t){return new Td}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zf{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Ff(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qf.bind(null,this.syncEngine),await async function(t,e){const n=Wa(t);e?(n.v_.delete(2),await Bd(n)):e||(n.v_.add(2),await zd(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Ef}createDatastore(t){const e=Ld(t.databaseInfo.databaseId),n=function(t){return new Nd(t)}(t.databaseInfo);return function(t,e,n,i){return new Ud(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new jd(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Ff(this.syncEngine,t,0)),Cd.D()?new Cd:new Id)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Lf(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=Wa(t);za("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await zd(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class tp{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):qa("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class ep{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Ua.UNAUTHENTICATED,this.clientId=ac.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{za("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(za("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xa(Qa.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ja;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=gf(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function np(t,e){t.asyncQueue.verifyOperationInProgress(),za("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await vd(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ip(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){za("FirestoreClient","Using user provided OfflineComponentProvider");try{await np(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Qa.FAILED_PRECONDITION||t.code===Qa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ha("Error using user provided cache. Falling back to memory cache: "+n),await np(t,new Yf)}}else za("FirestoreClient","Using default OfflineComponentProvider"),await np(t,new Yf);return t._offlineComponents}(t);za("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>df(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>df(e.remoteStore,n))),t._onlineComponents=e}async function rp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(za("FirestoreClient","Using user provided OnlineComponentProvider"),await ip(t,t._uninitializedComponentsProvider._online)):(za("FirestoreClient","Using default OnlineComponentProvider"),await ip(t,new Zf))),t._onlineComponents}async function sp(t){const e=await rp(t),n=e.eventManager;return n.onListen=Of.bind(null,e.syncEngine),n.onUnlisten=Pf.bind(null,e.syncEngine),n}function op(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const ap=new Map;function cp(t,e,n){if(!n)throw new Xa(Qa.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lp(t){if(!gc.isDocumentKey(t))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hp(t){if(gc.isDocumentKey(t))throw new Xa(Qa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function up(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Ka()}function dp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xa(Qa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=up(t);throw new Xa(Qa.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class fp{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Xa(Qa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xa(Qa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Xa(Qa.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=op(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Xa(Qa.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Xa(Qa.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Xa(Qa.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class pp{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xa(Qa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Xa(Qa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fp(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Za;switch(t.type){case"firstParty":return new ic(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Xa(Qa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=ap.get(t);e&&(za("ComponentProvider","Removing Datastore"),ap.delete(t),e.terminate())}(this),Promise.resolve()}}class mp{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new mp(this.firestore,t,this._query)}}class gp{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gp(this.firestore,t,this._key)}}class vp extends mp{constructor(t,e,n){super(t,e,Gl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gp(this.firestore,null,new gc(t))}withConverter(t){return new vp(this.firestore,t,this._path)}}function yp(t,e,...n){if(t=C(t),cp("collection","path",e),t instanceof pp){const i=fc.fromString(e,...n);return hp(i),new vp(t,null,i)}{if(!(t instanceof gp||t instanceof vp))throw new Xa(Qa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(fc.fromString(e,...n));return hp(i),new vp(t.firestore,null,i)}}function wp(t,e,...n){if(t=C(t),1===arguments.length&&(e=ac.newId()),cp("doc","path",e),t instanceof pp){const i=fc.fromString(e,...n);return lp(i),new gp(t,null,new gc(i))}{if(!(t instanceof gp||t instanceof vp))throw new Xa(Qa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(fc.fromString(e,...n));return lp(i),new gp(t.firestore,t instanceof vp?t.converter:null,new gc(i))}}class bp{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Od(this,"async_queue_retry"),this._u=()=>{const t=Dd();t&&za("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=Dd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=Dd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new Ja;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Ac(t))throw t;za("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw qa("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=mf.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&Ka()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class Ep extends pp{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new bp,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Tp(this),this._firestoreClient.terminate()}}function _p(t){return t._firestoreClient||Tp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Tp(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new tl(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,op(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new ep(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Ip{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ip(Kc.fromBase64String(t))}catch(t){throw new Xa(Qa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ip(Kc.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Cp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Xa(Qa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mc(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Sp{constructor(t){this._methodName=t}}class kp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xa(Qa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xa(Qa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return cc(this._lat,t._lat)||cc(this._long,t._long)}}const Ap=/^__.*__$/;class xp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new zh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Bh(t,this.data,e,this.fieldTransforms)}}class Rp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new zh(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Np(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ka()}}class Dp{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Dp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Hp(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Np(this.du)&&Ap.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Lp{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ld(t)}Su(t,e,n,i=!1){return new Dp({du:t,methodName:e,wu:n,path:mc.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Op(t){const e=t._freezeSettings(),n=Ld(t._databaseId);return new Lp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pp(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);jp("Data must be an object, but it was:",o,i);const a=Up(i,o);let c,l;if(s.merge)c=new Hc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Bp(e,i,n);if(!o.contains(r))throw new Xa(Qa.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);$p(t,r)||t.push(r)}c=new Hc(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new xp(new vl(a),c,l)}class Mp extends Sp{_toFieldTransform(t){if(2!==t.du)throw 1===t.du?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Mp}}function Fp(t,e){if(Vp(t=C(t)))return jp("Unsupported field value:",e,t),Up(t,e);if(t instanceof Sp)return function(t,e){if(!Np(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Fp(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=C(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wh(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=hc.fromDate(t);return{timestampValue:bu(e.serializer,n)}}if(t instanceof hc){const n=new hc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bu(e.serializer,n)}}if(t instanceof kp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ip)return{bytesValue:Eu(e.serializer,t._byteString)};if(t instanceof gp){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Iu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${up(t)}`)}(t,e)}function Up(t,e){const n={};return Uc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fc(t,((t,i)=>{const r=Fp(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Vp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof hc||t instanceof kp||t instanceof Ip||t instanceof gp||t instanceof Sp)}function jp(t,e,n){if(!Vp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=up(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function Bp(t,e,n){if((e=C(e))instanceof Cp)return e._internalPath;if("string"==typeof e)return qp(t,e);throw Hp("Field path arguments must be of type string or ",t,!1,void 0,n)}const zp=new RegExp("[~\\*/\\[\\]]");function qp(t,e,n){if(e.search(zp)>=0)throw Hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cp(...e.split("."))._internalPath}catch(i){throw Hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hp(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Xa(Qa.INVALID_ARGUMENT,a+t+c)}function $p(t,e){return t.some((t=>t.isEqual(e)))}class Kp{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new gp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Gp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Wp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Gp extends Kp{data(){return super.data()}}function Wp(t,e){return"string"==typeof e?qp(t,e):e instanceof Cp?e._internalPath:e._delegate._internalPath}class Qp{convertValue(t,e="none"){switch(il(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ka()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Fc(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new kp(Qc(t.latitude),Qc(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Yc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Zc(t));default:return null}}convertTimestamp(t){const e=Wc(t);return new hc(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=fc.fromString(t);Ga(Hu(n));const i=new el(n.get(1),n.get(3)),r=new gc(n.popFirst(5));return i.isEqual(e)||qa(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function Xp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Jp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Yp extends Kp{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Wp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Zp extends Yp{data(t={}){return super.data(t)}}class tm{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Jp(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Zp(this._firestore,this._userDataWriter,n.key,n,new Jp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xa(Qa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new Zp(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Jp(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Zp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Jp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:em(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function em(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ka()}}class nm extends Qp{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ip(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new gp(this.firestore,null,e)}}function im(t){t=dp(t,mp);const e=dp(t.firestore,Ep),n=_p(e),i=new nm(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Xa(Qa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const i=new Ja;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new tp({next:n=>{e.enqueueAndForget((()=>Tf(t,o))),n.fromCache&&"server"===i.source?r.reject(new Xa(Qa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new kf(n,s,{includeMetadataChanges:!0,Z_:!0});return _f(t,o)}(await sp(t),t.asyncQueue,e,n,i))),i.promise}(n,t._query).then((n=>new tm(e,i,t,n)))}function rm(t,e){const n=dp(t.firestore,Ep),i=wp(t),r=Xp(t.converter,e);return sm(n,[Pp(Op(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Lh.exists(!1))]).then((()=>i))}function sm(t,e){return function(t,e){const n=new Ja;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Jf(t);try{const t=await function(t,e){const n=Wa(t),i=hc.now(),r=e.reduce(((t,e)=>t.add(e.key)),mh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=oh(),c=mh();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=Vh(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new zh(t.key,e,yl(e.value.mapValue),Lh.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:lh(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new Vc(cc)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await Wf(i,t.changes),await nf(i.remoteStore)}catch(t){const e=gf(t,"Failed to persist write");n.reject(e)}}(await function(t){return rp(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(_p(t),e)}new WeakMap,function(t,e=!0){!function(t){Va=t}(ft),lt(new S("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Ep(new ec(t.getProvider("auth-internal")),new sc(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Xa(Qa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),gt(Fa,"4.4.1",t),gt(Fa,"4.4.1","esm2017")}();var om=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const am=pt({apiKey:"AIzaSyAS_sGDbQYUNZAoF-ZqZcpjWtLQtBmDvsw",authDomain:"proyecto-dca-1b72d.firebaseapp.com",projectId:"proyecto-dca-1b72d",storageBucket:"proyecto-dca-1b72d.appspot.com",messagingSenderId:"272880735350",appId:"1:272880735350:web:f0dbcec16d1c028a4afb57",measurementId:"G-L13XCXHTB8"}),cm=function(t,e){const n="string"==typeof t?t:"(default)",i=ht("object"==typeof t?t:mt(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(t=>{const e=l("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})();t&&function(t,e,n,i={}){var r;const s=(t=dp(t,pp))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Ua.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Xa(Qa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ua(s)}t._authCredentials=new tc(new Ya(e,n))}}(i,...t)}return i}(am),lm=function(t=mt()){const e=ht(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=ht(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(y(n.getOptions(),null!=e?e:{}))return t;Lt(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:ui,persistence:[Dn,mn,vn]}),i=u("authTokenSyncURL");if(i){const t=(r=i,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>mi)return;const i=null==e?void 0:e.token;gi!==i&&(gi=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(t,e,n){C(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,i,r){C(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var r;const s=l("auth");return s&&function(t,e,n){const i=Le(t);Mt(i._canInitEmulator,i,"emulator-config-failed"),Mt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=je(e),{host:o,port:a}=function(t){const e=je(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Be(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Be(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`),n}(am);let hm=null;const um=t=>{console.log(t),function(t,e,n){return async function(t,e){return hn(Le(t),e)}(C(t),Je.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&un(t),e}))}(lm,t.email,t.password).then((t=>om(void 0,void 0,void 0,(function*(){const e=t.user;console.log(e.uid)})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n)}))},dm=t=>om(void 0,void 0,void 0,(function*(){const e=wp(cm,"users",t);return(yield function(t){t=dp(t,gp);const e=dp(t.firestore,Ep);return function(t,e,n={}){const i=new Ja;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new tp({next:s=>{e.enqueueAndForget((()=>Tf(t,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new Xa(Qa.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new Xa(Qa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new kf(Gl(n.path),s,{includeMetadataChanges:!0,Z_:!0});return _f(t,o)}(await sp(t),t.asyncQueue,e,n,i))),i.promise}(_p(e),t._key).then((n=>function(t,e,n){const i=n.docs.get(e._key),r=new nm(t);return new Yp(t,r,e._key,i,new Jp(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}(e)).data()})),fm=t=>om(void 0,void 0,void 0,(function*(){const e=wp(cm,"users");yield function(t,e,n,...i){t=dp(t,gp);const r=dp(t.firestore,Ep),s=Op(r);let o;return o="string"==typeof(e=C(e))||e instanceof Cp?function(t,e,n,i,r,s){const o=t.Su(1,e,n),a=[Bp(e,i,n)],c=[r];if(s.length%2!=0)throw new Xa(Qa.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)a.push(Bp(e,s[t])),c.push(s[t+1]);const l=[],h=vl.empty();for(let t=a.length-1;t>=0;--t)if(!$p(l,a[t])){const e=a[t];let n=c[t];n=C(n);const i=o.fu(e);if(n instanceof Mp)l.push(e);else{const t=Fp(n,i);null!=t&&(l.push(e),h.set(e,t))}}const u=new Hc(l);return new Rp(h,u,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,i):function(t,e,n,i){const r=t.Su(1,e,n);jp("Data must be an object, but it was:",r,i);const s=[],o=vl.empty();Fc(i,((t,i)=>{const a=qp(e,t,n);i=C(i);const c=r.fu(a);if(i instanceof Mp)s.push(a);else{const t=Fp(i,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new Hc(s);return new Rp(o,a,r.fieldTransforms)}(s,"updateDoc",t._key,e),sm(r,[o.toMutation(t._key,Lh.exists(!0))])}(e,{fav_song:t})})),pm=t=>({action:"navigate",payload:t});var mm;!function(t){t.LOGIN="LOGIN",t.HOME="HOME"}(mm||(mm={})),function(t,e,n,i){C(t).onAuthStateChanged((t=>{t?(null!==t.uid&&ym((t=>({action:"SETUSER",payload:t}))(t.uid)),ym(pm(mm.HOME))):ym(pm(mm.LOGIN))}),void 0,void 0)}(lm);let gm={screen:"REGISTER",userId:""};console.log("holis",gm);let vm=[];const ym=t=>{const e=((t,e)=>{const{action:n,payload:i}=t;switch(n){case"navigate":e.screen=i;break;case"SETUSER":e.userId=i}return e})(t,JSON.parse(JSON.stringify(gm)));gm=e,vm.forEach((t=>t.render()))},wm=t=>{vm=[...vm,t]};var bm;!function(t){t.uid="uid",t.iconohome="iconohome",t.iconoexplore="iconoexplore",t.iconoprofile="iconoprofile"}(bm||(bm={}));class Em extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,iconohome:null,iconoexplore:null,iconoprofile:null})}attributeChangedCallback(t,e,n){t===bm.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}render(){var t,n,i,r;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class="menubar">\n\t\t<svg id="home">${this.iconohome}</svg>\n\t\t<img id="explore" src=${this.iconoexplore}></svg>\n\t\t<svg id="profile">${this.iconoprofile}</svg>\n\t\t\t</section>`);const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#home");null==s||s.addEventListener("click",(()=>{ym(pm("HOME"))}));const o=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#explore");null==o||o.addEventListener("click",(()=>{ym(pm("EXPLORE"))}));const a=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#profile");null==a||a.addEventListener("click",(()=>{ym(pm("PROFILE"))}));const c=this.ownerDocument.createElement("style");c.innerHTML=e.A,null===(r=this.shadowRoot)||void 0===r||r.appendChild(c)}}customElements.define("my-iconos",Em);const _m=[{id:1,logo:"https://i.pinimg.com/736x/4e/97/d6/4e97d610dfc03d8fde6969d5be6434f4.jpg"}];var Tm,Im=n(507);!function(t){t.uid="uid",t.logo="logo"}(Tm||(Tm={}));class Cm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,logo:null})}attributeChangedCallback(t,e,n){t===Tm.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}render(){var t,e;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n    <section class="header">\n\t\t<section class="logo">\n    <img src='${this.logo}'></img>\n\t\t</section>\n    </section>`);const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".logo");null==n||n.addEventListener("click",(()=>{ym(pm("HOME"))}));const i=this.ownerDocument.createElement("style");i.innerHTML=Im.A,null===(e=this.shadowRoot)||void 0===e||e.appendChild(i)}}customElements.define("my-header",Cm);const Sm=[{id:1,name:"Susana GarcÃ­a",wave:"",image:"https://images.pexels.com/photos/3646160/pexels-photo-3646160.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",unlike:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6b6" d="M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"/></svg>',like:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6bc" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>',cantidadlike:"6,4k",share:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6b6" d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>',cantidadshare:"49k",comentar:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6b6" d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"/></svg>',cantidadcomentar:"6,9k"}];var km,Am=n(357);!function(t){t.unlike="unlike",t.like="like",t.cantidadlike="cantidadlike",t.share="share",t.cantidadshare="cantidadshare",t.comentar="comentar",t.cantidadcomentar="cantidadcomentar",t.profileuid="profileuid",t.name="name",t.image="image",t.wave="wave"}(km||(km={}));class xm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({unlike:null,like:null,cantidadlike:null,share:null,cantidadshare:null,comentar:null,cantidadcomentar:null,profileuid:null,name:null,image:null,wave:null})}attributeChangedCallback(t,e,n){t===km.profileuid?this.profileuid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render(),this.attachEventHandlers()}attachEventHandlers(){var t,e;const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".like"),i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".unlike");n&&i&&(n.addEventListener("click",(()=>{n.style.display="none",i.style.display="block",localStorage.setItem("likeState","block")})),i.addEventListener("click",(()=>{n.style.display="block",i.style.display="none",localStorage.setItem("likeState","none")})),"none"===localStorage.getItem("likeState")&&(n.style.display="none",i.style.display="block"))}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=Am.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),(yield om(void 0,void 0,void 0,(function*(){const t=yield im(yp(cm,"waves")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}))).forEach((t=>{var e;const n=document.createElement("section");n.className="cardEntera";const i=document.createElement("section");i.className="profile";const r=document.createElement("section");r.className="image";const s=document.createElement("img");s.src=this.image||"undefined",r.appendChild(s);const o=document.createElement("p");o.className="username",o.textContent=this.name||"No Username",i.appendChild(r),i.appendChild(o);const a=document.createElement("section");a.className="wave";const c=this.ownerDocument.createElement("p");c.innerText=t.wave,a.appendChild(c);const l=document.createElement("section");l.className="interacciones";const h=document.createElement("section");h.className="like_group";const u=document.createElement("svg");u.id="svg",u.className="unlike",u.innerHTML=this.unlike||"undefined";const d=document.createElement("svg");d.id="svg_like",d.className="like",d.style.display="none",d.innerHTML=this.like||"undefined";const f=document.createElement("p");f.textContent=this.cantidadlike||"undefined",h.appendChild(u),h.appendChild(d),h.appendChild(f);const p=document.createElement("section");p.className="share";const m=document.createElement("svg");m.id="svg",m.innerHTML=this.share||"undefined";const g=document.createElement("p");g.textContent=this.cantidadshare||"undefined",p.appendChild(m),p.appendChild(g);const v=document.createElement("section");v.className="comment";const y=document.createElement("svg");y.id="svg",y.innerHTML=this.comentar||"undefined";const w=document.createElement("p");w.textContent=this.cantidadcomentar||"undefined",v.appendChild(y),v.appendChild(w),l.appendChild(h),l.appendChild(p),l.appendChild(v),n.appendChild(i),n.appendChild(a),n.appendChild(l),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}}))}}customElements.define("my-card",xm);var Rm=n(9);const Nm={wave:""};class Dm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),wm(this)}connectedCallback(){this.render()}changeWave(t){Nm.wave=t.target.value}submitForm(){var t;t=Nm,om(void 0,void 0,void 0,(function*(){try{const e=yp(cm,"waves");yield rm(e,t),console.log("se aÃ±adiÃ³ con Ã©xito")}catch(t){console.error(t)}}))}render(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var e,n,i,r;if(this.shadowRoot){_m.forEach((t=>{var e;const n=document.createElement("my-header");n.setAttribute(Tm.logo,t.logo),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const s=this.ownerDocument.createElement("h1");s.textContent="Share your wave!",null===(e=this.shadowRoot)||void 0===e||e.appendChild(s);const o=this.ownerDocument.createElement("input");o.placeholder="Enter your Wave",o.classList.add("image"),o.addEventListener("change",this.changeWave),this.shadowRoot.appendChild(o);const a=this.ownerDocument.createElement("button");a.innerText="Share",a.classList.add("save"),a.addEventListener("click",this.submitForm.bind(this)),null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);const c=this.ownerDocument.createElement("h2");c.textContent="For You",null===(i=this.shadowRoot)||void 0===i||i.appendChild(c),Sm.forEach((t=>{var e;const n=document.createElement("my-card");n.setAttribute(km.name,t.name),n.setAttribute(km.image,t.image),n.setAttribute(km.unlike,t.unlike),n.setAttribute(km.like,t.like),n.setAttribute(km.cantidadlike,t.cantidadlike),n.setAttribute(km.share,t.share),n.setAttribute(km.cantidadshare,t.cantidadshare),n.setAttribute(km.comentar,t.comentar),n.setAttribute(km.cantidadcomentar,t.cantidadcomentar),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)})),t.forEach((t=>{var e;const n=document.createElement("my-iconos");n.setAttribute(bm.iconohome,t.iconohome),n.setAttribute(bm.iconoexplore,t.iconoexplore),n.setAttribute(bm.iconoprofile,t.iconoprofile),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const l=this.ownerDocument.createElement("style");l.innerHTML=Rm.A,null===(r=this.shadowRoot)||void 0===r||r.appendChild(l)}}))}}customElements.define("app-dashboard",Dm);const Lm=[{id:1,logo:"https://i.pinimg.com/736x/4e/97/d6/4e97d610dfc03d8fde6969d5be6434f4.jpg",log_out:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1e1e1e" d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/></svg>'}];var Om;!function(t){t.uid="uid",t.logo="logo",t.log_out="log_out"}(Om||(Om={}));class Pm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,logo:null,log_out:null})}attributeChangedCallback(t,e,n){t===Om.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}logout(){indexedDB.deleteDatabase("firebase-heartbeat-database"),indexedDB.deleteDatabase("firebaseLocalStorageDb"),window.location.reload()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\t\t\t\t<section class="header">\n\t\t\t\t\t<section class="logo">\n\t\t\t\t\t\t<img src='${this.logo}'></img>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<button id="log_out">\n\t\t\t\t\t\t<svg class="log_out" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\n\t\t\t\t\t\t\t\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e\n\t\t\t\t\t\t\t<path fill="#1e1e1e" d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</section>\n\n\t\t\t\t<section class="modalContainer" style="display:none;">\n\t\t\t\t\t<form class="logout">\n\t\t\t\t\t\t<span class="close">X</span>\n\t\t\t\t\t\t<h2>You are logging out</h2>\n\t\t\t\t\t\t<span role="button" class="Accept">Accept</span>\n\t\t\t\t\t\t<span role="button" class="Cancel">Cancel</span>\n\t\t\t\t\t</form>\n\t\t\t\t</section>\n\t\t\t`;const t=this.shadowRoot.querySelector(".modalContainer"),e=this.shadowRoot.querySelector("#log_out"),n=this.shadowRoot.querySelector(".close"),i=this.shadowRoot.querySelector(".Accept"),r=this.shadowRoot.querySelector(".Cancel");e.addEventListener("click",(()=>{t.style.display="block",document.body.style.overflow="hidden"})),n.addEventListener("click",(()=>{t.style.display="none",document.body.style.overflow="auto"})),window.addEventListener("click",(e=>{e.target==t&&(t.style.display="none",document.body.style.overflow="auto")})),i.addEventListener("click",(()=>{this.logout()})),r.addEventListener("click",(()=>{t.style.display="none",document.body.style.overflow="auto"}));const s=this.shadowRoot.querySelector(".logo");null==s||s.addEventListener("click",(()=>{ym(pm("HOME"))}));const o=this.ownerDocument.createElement("style");o.innerHTML=Im.A,this.shadowRoot.appendChild(o)}}}customElements.define("my-headerprofile",Pm);const Mm=[{id:1,iconohome:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1E1E1E" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>',iconoexplore:'"https://i.pinimg.com/originals/94/67/f5/9467f504e83345d60816f9b87ac84588.jpg"',iconoprofile:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#ff9f1c" d="M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"/></svg>'}];var Fm,Um=n(831),Vm=n(471);!function(t){t.artist="artist",t.song_title="song_title",t.image="image",t.top="top"}(Fm||(Fm={}));class jm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({artist:null,song_title:null,image:null,top:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class = "card">\n\n\n\t\t\t<p class="top">${this.top}</p>\n\n\t\t\t<section class= "imagen">\n\t\t\t<img src="${this.image}" alt= "cover album"></img>\n\t\t\t</section>\n\n\t\t\t<section class = "letters">\n\n\t\t\t<section class = "title">\n\t\t\t<p>${this.song_title}</p>\n\t\t\t</section>\n\n\t\t<section class = "artist">\n\t\t<p>${this.artist}</p>\n\t\t</section>\n\n\n\t\t</section>\n\n\t\t</section>\n    `);const e=this.ownerDocument.createElement("style");e.innerHTML=Vm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-songs",jm);var Bm=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};const zm={top:"",artist:"",song_title:"",image:"",duration:""};var qm;!function(t){t.profile_image="profile_image",t.username="username",t.fav_song="fav_song",t.completeName="completeName"}(qm||(qm={}));class Hm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({profile_image:null,username:null,fav_song:null,completeName:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}submitForm(){var t;console.log(zm),t=zm,om(void 0,void 0,void 0,(function*(){try{const e=yp(cm,"playlist");yield rm(e,t),console.log("se aÃ±adiÃ³ con Ã©xito")}catch(t){console.error(t)}}))}changeArtist(t){zm.artist=t.target.value}changeTitle(t){zm.song_title=t.target.value}changeImage(t){zm.image=t.target.value}render(){return Bm(this,void 0,void 0,(function*(){var t,e,n,i,r,s,o,a,c;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t<section class="todo">\n\t\t<section class="profile">\n\t\t<img class="image" src="${this.profile_image}"></img>\n\t\t<h1>${this.username}</h1>\n\t\t<Button class="edit">Edit picture</Button>\n\t\t<button id="ButtonSong">\n\t\t<p class="fav_song"><svg class="pin"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(46, 196, 182);transform: ;msFilter:;"><path d="M15 11.586V6h2V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2h2v5.586l-2.707 1.707A.996.996 0 0 0 6 14v2a1 1 0 0 0 1 1h4v3l1 2 1-2v-3h4a1 1 0 0 0 1-1v-2a.996.996 0 0 0-.293-.707L15 11.586z"></path></svg></svg>\n\t\t${this.fav_song}</p>\n\t\t</section>\n\t\t<section class="name-following">\n\t\t<p class="name">${this.completeName}</p>\n\t\t<p class="following">100 following</p>\n\t\t</section>\n\t\t<p class="followers">238 followers</p>\n\t\t<Button class="playlist">Playlists</Button>\n\t\t</section>\n\t\t</section>\n\t\t<section class="modalContainer" style="display:none;">\n\t\t<form class="waveSong">\n\t\t    <span class="close">X</span>\n\t\t    <h2>What's your wave song at the moment?</h2>\n\t\t    <textarea id="writtenSong" name="wave"></textarea>\n\t\t    <span role="button" class="post">Post</span>\n\t\t</form>\n\t\t`);const l=this.ownerDocument.createElement("h1");l.textContent="Add your own song",l.classList.add("h1Add"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(l);const h=this.ownerDocument.createElement("section");h.classList.add("create-song");const u=this.ownerDocument.createElement("input");u.placeholder="Add an artist",u.classList.add("artist"),u.addEventListener("change",this.changeArtist),h.appendChild(u);const d=this.ownerDocument.createElement("input");d.placeholder="Add the song title",d.classList.add("title"),d.addEventListener("change",this.changeTitle),h.appendChild(d);const f=this.ownerDocument.createElement("input");f.placeholder="Add the album cover",f.classList.add("coverImage"),f.addEventListener("change",this.changeImage),h.appendChild(f),null===(e=this.shadowRoot)||void 0===e||e.appendChild(h);const p=this.ownerDocument.createElement("button");p.innerText="Save",p.classList.add("save"),p.addEventListener("click",this.submitForm),null===(n=this.shadowRoot)||void 0===n||n.appendChild(p),(yield om(void 0,void 0,void 0,(function*(){const t=yield im(yp(cm,"playlist")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}))).forEach((t=>{var e;const n=this.ownerDocument.createElement("my-songs");n.setAttribute(Fm.top,"â"),n.setAttribute(Fm.image,t.image),n.setAttribute(Fm.artist,t.artist),n.setAttribute(Fm.song_title,t.song_title),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const m=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".modalContainer"),g=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#ButtonSong"),v=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector(".close");(null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(".post")).addEventListener("click",(()=>Bm(this,void 0,void 0,(function*(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#writtenSong"),n=e.value;fm(n||"Add your Wave"),e.value="",m.style.display="none",document.body.style.overflow="auto"})))),(null===(a=this.shadowRoot)||void 0===a?void 0:a.querySelector(".post")).addEventListener("click",(t=>{var e;t.preventDefault();const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#writtenSong"),i=n.value;console.log("Entered wave:",i),n.value="",m.style.display="none",y.style.overflow="auto"}));const y=document.body;y&&(g.addEventListener("click",(()=>{m.style.display="block",y.style.overflow="hidden"})),v.addEventListener("click",(()=>{m.style.display="none",y.style.overflow="auto",window.addEventListener("click",(t=>{t.target==m&&(m.style.display="none",y.style.overflow="auto")}))})));const w=this.ownerDocument.createElement("style");w.innerHTML=Um.A,null===(c=this.shadowRoot)||void 0===c||c.appendChild(w)}))}}customElements.define("my-perfil",Hm);var $m=n(11),Km=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class Gm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),wm(this)}connectedCallback(){return Km(this,void 0,void 0,(function*(){console.log(gm.userId);const t=yield dm(gm.userId);this.render(t)}))}render(t){return Km(this,void 0,void 0,(function*(){var e,n;this.shadowRoot&&Lm.forEach((t=>{var e;const n=document.createElement("my-headerprofile");n.setAttribute(Om.logo,t.logo),n.setAttribute(Om.log_out,t.log_out),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const i=document.createElement("my-perfil");i.setAttribute(qm.profile_image,t.profile_image),i.setAttribute(qm.username,t.username),i.setAttribute(qm.completeName,t.completeName),i.setAttribute(qm.fav_song,t.fav_song),null===(e=this.shadowRoot)||void 0===e||e.appendChild(i),Mm.forEach((t=>{var e;const n=document.createElement("my-iconos");n.setAttribute(bm.iconohome,t.iconohome),n.setAttribute(bm.iconoexplore,t.iconoexplore),n.setAttribute(bm.iconoprofile,t.iconoprofile),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const r=this.ownerDocument.createElement("style");r.innerHTML=$m.A,null===(n=this.shadowRoot)||void 0===n||n.appendChild(r)}))}}customElements.define("app-perfil",Gm);var Wm,Qm=n(499);!function(t){t.uid="uid",t.name="name",t.photo="photo",t.profile="profile",t.song="song"}(Wm||(Wm={}));class Xm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,photo:null,name:null,profile:null,song:null})}attributeChangedCallback(t,e,n){t===Wm.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\n\t\t<section class="card" style="background-image: url('${this.photo}');background-position-x: center;background-size: cover;">\n\t\t<section class="todo">\n\t\t<section class= "image">\n\t\t<img src='${this.profile}'></img>\n    <p>${this.name}</p>\n\t\t</section>\n\t\t<section class="song">\n    <h3>${this.song}</h3>\n\t\t</section>\n\t\t</section>\n\t\t</section>\n\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=Qm.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-friend",Xm);const Jm=[{id:1,iconohome:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1E1E1E" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>',iconoexplore:'\t"https://i.pinimg.com/originals/33/ff/00/33ff00839226a94f68b571016bc6d99c.jpg"',iconoprofile:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(32, 32, 32);transform: ;msFilter:;"><path d="M12 2C6.579 2 2 6.579 2 12s4.579 10 10 10 10-4.579 10-10S17.421 2 12 2zm0 5c1.727 0 3 1.272 3 3s-1.273 3-3 3c-1.726 0-3-1.272-3-3s1.274-3 3-3zm-5.106 9.772c.897-1.32 2.393-2.2 4.106-2.2h2c1.714 0 3.209.88 4.106 2.2C15.828 18.14 14.015 19 12 19s-3.828-.86-5.106-2.228z"></path></svg>'}];var Ym=n(628);class Zm extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),wm(this)}connectedCallback(){return function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const t=yield om(void 0,void 0,void 0,(function*(){const t=[];return(yield im(yp(cm,"Friends-playlist"))).forEach((e=>{t.push(e.data())})),t})),e=yield om(void 0,void 0,void 0,(function*(){const t=[];return(yield im(yp(cm,"Songs"))).forEach((e=>{t.push(e.data())})),t}));console.log(t,e),this.render(t,e)}))}render(t,e){var n,i,r,s;this.shadowRoot&&_m.forEach((t=>{var e;const n=document.createElement("my-header");n.setAttribute(Tm.logo,t.logo),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)})),Jm.forEach((t=>{var e;const n=document.createElement("my-iconos");n.setAttribute(bm.iconohome,t.iconohome),n.setAttribute(bm.iconoexplore,t.iconoexplore),n.setAttribute(bm.iconoprofile,t.iconoprofile),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const o=this.ownerDocument.createElement("h1");o.textContent="On trending",null===(n=this.shadowRoot)||void 0===n||n.appendChild(o),e.forEach(((t,e)=>{var n;const i=document.createElement("my-songs");i.setAttribute(Fm.top,t.top),i.setAttribute(Fm.song_title,t.song_title),i.setAttribute(Fm.artist,t.artist),i.setAttribute(Fm.image,t.image),i.setAttribute("data-index",(e+1).toString()),null===(n=this.shadowRoot)||void 0===n||n.appendChild(i)}));const a=this.ownerDocument.createElement("h1");a.textContent="My friends playlist",null===(i=this.shadowRoot)||void 0===i||i.appendChild(a);const c=this.ownerDocument.createElement("section");c.classList.add("playlists"),t.forEach((t=>{const e=document.createElement("my-friend");console.log(t),e.setAttribute(Wm.name,t.name),e.setAttribute(Wm.profile,t.profile),e.setAttribute(Wm.photo,t.photo),e.setAttribute(Wm.song,t.song),c.appendChild(e)})),null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);const l=this.ownerDocument.createElement("style");l.innerHTML=Ym.A,null===(s=this.shadowRoot)||void 0===s||s.appendChild(l)}}customElements.define("app-explore",Zm);var tg=n(835);const eg={email:"",username:"",completeName:"",password:""};var ng;!function(t){t.logo="logo",t.google="google",t.facebook="facebook",t.outlook="outlook"}(ng||(ng={}));class ig extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({logo:null,google:null,facebook:null,outlook:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}changeEmail(t){var e;eg.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;eg.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeUsername(t){var e;eg.username=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCompleteName(t){var e;eg.completeName=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){var t;(async function(t,e,n){const i=Le(t),r=Ve(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sn),s=await r.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&un(t),e})),o=await on._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o})(lm,(t=eg).email,t.password).then((e=>om(void 0,void 0,void 0,(function*(){const n=e.user;hm=n.uid,console.log(n.uid);try{const e=wp(cm,"users",n.uid),i={id:n.uid,username:t.username,completeName:t.completeName};console.log(i),yield function(t,e,n){t=dp(t,gp);const i=dp(t.firestore,Ep),r=Xp(t.converter,e,n);return sm(i,[Pp(Op(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Lh.none())])}(e,i),alert("Se creÃ³ el usuario")}catch(t){console.error(t)}})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n)}))}render(){if(this.shadowRoot){const t=this.ownerDocument.createElement("section");t.classList.add("todo");const e=this.ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("svg"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("height","35"),e.setAttribute("width","35"),e.setAttribute("viewBox","0 0 320 512"),e.innerHTML='\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec4b6" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/>',t.appendChild(e);const n=this.ownerDocument.createElement("img");n.classList.add("logo"),n.src=this.logo||"undefined",t.appendChild(n);const i=this.ownerDocument.createElement("section");i.classList.add("info");const r=this.ownerDocument.createElement("h1");r.classList.add("text_create"),r.textContent="Create your account",i.appendChild(r),t.appendChild(i),this.shadowRoot.appendChild(t);const s=this.ownerDocument.createElement("section");s.classList.add("inputs");const o=this.ownerDocument.createElement("input");o.placeholder="Correo electronico",o.addEventListener("change",this.changeEmail),s.appendChild(o);const a=this.ownerDocument.createElement("input");a.placeholder="Username",a.addEventListener("change",this.changeUsername),s.appendChild(a);const c=this.ownerDocument.createElement("input");c.placeholder="Name and Last name",c.addEventListener("change",this.changeCompleteName),s.appendChild(c);const l=this.ownerDocument.createElement("input");l.placeholder="ContraseÃ±a",l.addEventListener("change",this.changePassword),s.appendChild(l);const h=this.ownerDocument.createElement("button");h.innerText="Registrarme",h.addEventListener("click",this.submitForm),s.appendChild(h),this.shadowRoot.appendChild(s);const u=this.ownerDocument.createElement("section");u.classList.add("todo");const d=this.ownerDocument.createElement("p");d.classList.add("text"),d.textContent="Or sign up with",u.appendChild(d);const f=this.ownerDocument.createElement("section");f.id="apps";const p=this.ownerDocument.createElement("img");p.classList.add("google"),p.src=this.google||"undefined",f.appendChild(p);const m=this.ownerDocument.createElement("img");m.classList.add("facebook"),m.src=this.facebook||"undefined",f.appendChild(m);const g=this.ownerDocument.createElement("img");g.classList.add("outlook"),g.src=this.outlook||"undefined",f.appendChild(g),u.appendChild(f);const v=this.ownerDocument.createElement("section");v.classList.add("already_have");const y=this.ownerDocument.createElement("p");y.classList.add("text"),y.textContent="Already have an account?",v.appendChild(y);const w=this.ownerDocument.createElement("p");w.classList.add("signup_btn"),w.textContent="Log In",v.appendChild(w),u.appendChild(v),this.shadowRoot.appendChild(u),e.addEventListener("click",(()=>{ym(pm("PROFILE"))})),w.addEventListener("click",(()=>{ym(pm("LOGIN"))}));const b=this.ownerDocument.createElement("style");b.innerHTML=tg.A,this.shadowRoot.appendChild(b)}}}customElements.define("my-register",ig);const rg=[{id:1,logo:"https://i.pinimg.com/736x/4e/97/d6/4e97d610dfc03d8fde6969d5be6434f4.jpg",google:"https://cdn1.iconfinder.com/data/icons/google-s-logo/150/Google_Icons-09-512.png",facebook:"https://upload.wikimedia.org/wikipedia/commons/6/6c/Facebook_Logo_2023.png",outlook:"https://seeklogo.com/images/M/microsoft-outlook-logo-188AB32C94-seeklogo.com.png"}];class sg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),wm(this)}connectedCallback(){this.render()}render(){this.shadowRoot&&rg.forEach((t=>{var e;const n=document.createElement("my-register");n.setAttribute(ng.logo,t.logo),n.setAttribute(ng.google,t.google),n.setAttribute(ng.facebook,t.facebook),n.setAttribute(ng.outlook,t.outlook),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}}customElements.define("app-register",sg);const og={email:"",password:""};var ag;!function(t){t.logo="logo",t.google="google",t.facebook="facebook",t.outlook="outlook"}(ag||(ag={}));class cg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({logo:null,google:null,facebook:null,outlook:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}changeEmail(t){var e;og.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;og.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){um(og)}render(){var t,e,n,i,r;this.shadowRoot&&(this.shadowRoot.innerHTML="");const s=document.createElement("section");s.className="todo";const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class","svg"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("height","35"),o.setAttribute("width","35"),o.setAttribute("viewBox","0 0 320 512");const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("fill","#2ec4b6"),a.setAttribute("d","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"),o.appendChild(a);const c=document.createElement("img");c.className="logo",c.src=this.logo||"undefined";const l=document.createElement("section");l.className="info";const h=document.createElement("h1");h.className="text_create",h.textContent="Log in to your account";const u=document.createElement("section");u.className="inputs";const d=document.createElement("form"),f=document.createElement("input");f.type="Email",f.addEventListener("change",this.changeEmail),f.placeholder="Email";const p=document.createElement("input");p.type="Password",p.addEventListener("change",this.changePassword),p.placeholder="Password",u.appendChild(d),d.appendChild(f),d.appendChild(p);const m=document.createElement("button");m.id="login",m.type="submit",m.addEventListener("click",this.submitForm),m.textContent="Log In",d.appendChild(m);const g=document.createElement("p");g.className="text",g.textContent="Or sign in with";const v=document.createElement("section");v.id="apps";const y=document.createElement("img");y.className="google",y.src=this.google||"undefined";const w=document.createElement("img");w.className="facebook",w.src=this.facebook||"undefined";const b=document.createElement("img");b.className="outlook",b.src=this.outlook||"undefined",v.appendChild(y),v.appendChild(w),v.appendChild(b);const E=document.createElement("section");E.className="already_have";const _=document.createElement("p");_.className="text",_.textContent="Don't have an account?";const T=document.createElement("p");T.className="signup_btn",T.textContent="Sign Up",E.appendChild(_),E.appendChild(T),l.appendChild(h),l.appendChild(u),s.appendChild(o),s.appendChild(c),s.appendChild(l),s.appendChild(g),s.appendChild(v),s.appendChild(E),null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);const I=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".svg");null==I||I.addEventListener("click",(()=>{ym(pm("PROFILE"))}));const C=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector(".signup_btn");null==C||C.addEventListener("click",(()=>{ym(pm("REGISTER"))}));const S=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#login");null==S||S.addEventListener("click",(()=>{ym(pm("DASHBOARD"))}));const k=this.ownerDocument.createElement("style");k.innerHTML=tg.A,null===(r=this.shadowRoot)||void 0===r||r.appendChild(k)}}customElements.define("my-login",cg);class lg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),wm(this)}connectedCallback(){this.render()}render(){this.shadowRoot&&rg.forEach((t=>{var e;const n=document.createElement("my-login");n.setAttribute(ag.logo,t.logo),n.setAttribute(ag.google,t.google),n.setAttribute(ag.facebook,t.facebook),n.setAttribute(ag.outlook,t.outlook),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}}customElements.define("app-login",lg);class hg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),wm(this)}connectedCallback(){this.render()}render(){var t,e,n,i,r;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),gm.screen){case"HOME":const s=this.ownerDocument.createElement("app-dashboard");null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);break;case"EXPLORE":const o=this.ownerDocument.createElement("app-explore");null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);break;case"PROFILE":const a=this.ownerDocument.createElement("app-perfil");null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);break;case"REGISTER":const c=this.ownerDocument.createElement("app-register");null===(i=this.shadowRoot)||void 0===i||i.appendChild(c);break;case"LOGIN":const l=this.ownerDocument.createElement("app-login");null===(r=this.shadowRoot)||void 0===r||r.appendChild(l)}}}customElements.define("app-container",hg)})()})();