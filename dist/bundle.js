/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={471:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".card {\n\tfont-family: 'inter';\n\tbackground-color: rgb(237, 237, 237);\n\twidth: 90%;\n\tpadding: 10px;\n\tborder-radius: 10px;\n\tmargin-left: 5%;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: rgb(30, 30, 30);\n}\n\n.top {\n\tmargin: 10px;\n\tmargin-right: 20px;\n\tfont-family: 'inter';\n\tfont-weight: 600;\n\tcolor: rgba(30, 30, 30, 0.7);\n}\n\n.artist {\n\tfont-size: 12px;\n\tmargin-top: 2px;\n}\n\n.title {\n\tfont-size: 15px;\n\tfont-weight: 600;\n\tmargin: 0;\n}\n\n.letters {\n\tmargin-left: 10px;\n}\n\nimg {\n\theight: 50px;\n\twidth: 50px;\n\tborder-radius: 5px;\n}\n\n.imagen {\n\tjustify-content: center;\n}\n\np {\n\tmargin-top: 0%;\n\tmargin-bottom: 0%;\n}\n",""]);const a=o},357:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".image img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n#wave {\n\tmargin-left: 10px;\n\tmargin-top: 10px;\n}\n\n.image {\n\twidth: 30px;\n\theight: 30px;\n\tborder-radius: 50%;\n\toverflow: hidden;\n\tmargin: 10px;\n}\n\n.comment,\n.like_group,\n.share {\n\tmargin-left: 15px;\n\tmargin-right: 15px;\n}\n\n.cardEntera {\n\tbackground-color: rgb(255, 255, 255);\n\twidth: 70%;\n\theight: 15%;\n\tpadding: 10px;\n\tmargin-bottom: 10px;\n\tborder-radius: 10px;\n\tbox-shadow: 0 4px 8px rgba(0, 0, 0.3, 0.3);\n\tmargin-left: 15%;\n\tmargin-top: 2%;\n\tfont-family: 'inter';\n\tcolor: #1e1e1e;\n}\n\n.profile {\n\tdisplay: flex;\n\talign-items: center;\n}\n.interacciones {\n\tdisplay: flex;\n\tcolor: #2ec4b6;\n\talign-items: center;\n\tjustify-content: end;\n}\n.like_group,\n.share,\n.comment {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n#svg {\n\twidth: 26px;\n\theight: 26px;\n\tmargin: 3px;\n}\n\n#svg_like {\n\twidth: 26px;\n\theight: 26px;\n\tmargin: 3px;\n}\n\n.username {\n\tfont-weight: 700;\n}\n\np {\n\tmargin: 0;\n}\n",""]);const a=o},499:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,"p {\n\tfont-family: 'inter';\n\tfont-size: 14px;\n\tcolor: white;\n}\n.image img {\n\twidth: 30px;\n\theight: 30px; /* Ancho del contenedor */ /* Altura del contenedor */\n\toverflow: hidden; /* Oculta cualquier contenido que exceda los lÃ­mites del contenedor */\n\tdisplay: block; /* Asegura que la imagen se comporte como un bloque */\n\tborder-radius: 50%; /* Hace que la imagen sea circular */\n\tmargin: 10px;\n}\n\n.image {\n\tdisplay: flex;\n}\n\n.song {\n\tfont-family: 'inter';\n\tfont-weight: 400;\n\tfont-size: 20px;\n\twidth: 280px;\n\talign-items: flex-start;\n\tcolor: white;\n\tmargin-left: 65px;\n\tmargin-top: 0;\n}\n\nh3 {\n\tmargin-top: 0;\n}\n.card {\n\twidth: 400px;\n\theight: 180px;\n\tborder-radius: 20px;\n\tmargin: 20px;\n}\n\n.todo {\n\tposition: relative;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tz-index: 1;\n\tborder-radius: 20px;\n}\n",""]);const a=o},507:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".header {\n\tbackground-color: rgb(255, 255, 255);\n\theight: 10vh;\n\tbox-shadow: 0 4px 4px rgba(0, 0, 0, 0.1);\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n#perfil {\n\theight: 50px;\n\twidth: 50px;\n\tmargin-right: 2%;\n}\n\n.header img {\n\tmargin-left: 5%;\n}\n\n.logo img {\n\theight: 10vh;\n\tmargin-left: 20px;\n\tcursor: pointer;\n}\n\nsvg {\n\tmargin-right: 20px;\n\tcursor: pointer;\n}\n\n#log_out {\n\tbackground-color: transparent;\n\tborder: none;\n}\n\n.modalContainer {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-family: Arial;\n}\n\n.Accept {\n\tbackground-color: #2ec4b6;\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 40px;\n\twidth: 120px;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\ttransition: 0.3s;\n\tmargin-left: 6px;\n}\n\n.Cancel {\n\tbackground-color: rgba(46, 196, 182, 0.7);\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 40px;\n\twidth: 120px;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\ttransition: 0.3s;\n\tmargin-right: 6px;\n}\n\n.Accept:hover,\n.Cancel:hover {\n\tbackground-color: #ffbf69;\n}\n\nh2 {\n\tcolor: #ff9f1c;\n\tfont-size: 25px;\n}\n\n.close {\n\tmargin-left: 90%;\n\tmargin-top: 2%;\n\tright: 50px;\n\tcursor: pointer;\n\tfont-family: Arial;\n\tcolor: #2ec4b6;\n}\n\n.logout {\n\tbackground-color: white;\n\tpadding: 20px;\n\tborder-radius: 40px;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\twidth: 40%;\n\theight: 20%;\n\toverflow-y: auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tmargin: auto;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.botones {\n\tdisplay: flex;\n\tmargin: 10px;\n}\n",""]);const a=o},67:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".menubar {\n\tdisplay: flex;\n\tjustify-content: space-evenly;\n\tposition: fixed;\n\tbottom: 0;\n\talign-items: center;\n\twidth: 100%;\n\theight: 10vh;\n\tbackground-color: white;\n\tz-index: 2;\n\tbox-shadow: 0 -4px 4px rgba(0, 0, 0, 0.1);\n}\n\n#home,\n#chats,\n#profile {\n\theight: 30px;\n\twidth: 30px;\n\tcursor: pointer;\n}\n\n#explore {\n\theight: 24px;\n\twidth: 34px;\n\tcursor: pointer;\n}\n\n@media screen and (max-width: 768px) {\n\t.menubar {\n\t\tdisplay: flex;\n\t\tjustify-content: space-evenly;\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\theight: 8vh;\n\t\tbackground-color: white;\n\t\tbox-shadow: 0 -4px 4px rgba(0, 0, 0, 0.1);\n\t}\n}\n",""]);const a=o},831:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".profile {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-direction: column;\n\tfont-family: 'inter';\n\tmargin-top: 30px;\n}\n\n#ButtonSong,\n#edit {\n\tbackground-color: transparent;\n\tborder: none;\n\tcursor: pointer;\n}\n\n#writtenSong,\n#newProfileImage {\n\tpadding: 4%;\n\tmargin-bottom: 2vh;\n\tborder-radius: 30px;\n\twidth: 32vh;\n\theight: 1vh;\n}\n\n#newProfileImage::placeholder {\n\tfont-family: 'inter';\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.Accept {\n\tbackground-color: #2ec4b6;\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 40px;\n\twidth: 120px;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\ttransition: 0.3s;\n\tmargin-left: 6px;\n}\n\n.Cancel {\n\tbackground-color: rgba(46, 196, 182, 0.7);\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 40px;\n\twidth: 120px;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\ttransition: 0.3s;\n\tmargin-right: 6px;\n}\n\n.fileContainer {\n\tdisplay: inline-block;\n\tposition: relative;\n\toverflow: hidden;\n\tcursor: pointer;\n\tpadding-bottom: 2vh;\n}\n\n.fileContainer input[type='file'] {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: 20px;\n\tcursor: pointer;\n\topacity: 0;\n\tfilter: alpha(opacity=0);\n}\n\n.fileContainer:before {\n\tcontent: 'Select file';\n\twhite-space: nowrap;\n\tbackground-color: #ff9f1c;\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 5vh;\n\twidth: 40vh;\n\ttransition: background-color 0.2s ease;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-top: 1vh;\n\tmargin-left: 1vh;\n\tmargin-right: 1vh;\n}\n.fileContainer:hover:before {\n\tbackground-color: #ffbf69;\n}\n\n.file-name {\n\tmargin-left: 10px;\n\tfont-size: 16px;\n\tcolor: #333;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n.Accept:hover,\n.Cancel:hover {\n\tbackground-color: #ffbf69;\n}\n\n.waveSong {\n\tbackground-color: white;\n\tpadding: 20px;\n\tborder-radius: 40px;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\twidth: 60%;\n\theight: 40%;\n\toverflow-y: auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tmargin: auto;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.profileImgForm {\n\tbackground-color: white;\n\tpadding: 20px;\n\tborder-radius: 40px;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\twidth: 45%;\n\toverflow-y: auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\tmargin: auto;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n}\n\n.modalContainer,\n#modalContainerProfileImg {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-family: Arial;\n}\n\n.post {\n\tbackground-color: #2ec4b6;\n\tborder: none;\n\tborder-radius: 50px;\n\tcursor: pointer;\n\theight: 40px;\n\twidth: 120px;\n\ttransition: background-color 0.2s ease;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\nh2 {\n\tcolor: #ff9f1c;\n\tfont-size: 25px;\n}\n\n.close {\n\tmargin-left: 90%;\n\tmargin-top: 2%;\n\tright: 50px;\n\tcursor: pointer;\n\tfont-family: Arial;\n\tcolor: #2ec4b6;\n}\n\n.profileimg {\n\twidth: 200px;\n\theight: 200px;\n\tborder-radius: 50%;\n\toverflow: hidden;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 2px solid #fff;\n\tbox-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\n}\n\n.profileimg img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.pin {\n\theight: 24px;\n\twidth: 24px;\n}\n\nh1 {\n\tfont-size: 24px;\n\tmargin-bottom: 0;\n\tfont-weight: 700;\n\tcolor: #1e1e1e;\n}\n\n.edit {\n\tbackground-color: transparent;\n\tborder-width: 0;\n\tcolor: #ff9f1c;\n\tcursor: pointer;\n\tfont-family: 'inter';\n\tfont-size: 16px;\n\tmargin-top: 0;\n\tfont-weight: 500;\n}\n\n.fav_song {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-weight: 500;\n\tfont-size: 25px;\n\tcolor: rgb(46, 196, 182);\n\tcursor: pointer;\n}\n\n.name-following {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: center;\n\tfont-family: 'Inter';\n}\n\n.name {\n\tmargin: 5px;\n\tborder: 2px solid rgba(30, 30, 30, 0.2);\n\tborder-radius: 10px;\n\theight: 30px;\n\twidth: 193px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 16px;\n\tcolor: #1e1e1e;\n}\n\n.following {\n\tmargin: 5px;\n\tborder: 2px solid rgba(30, 30, 30, 0.2);\n\tborder-radius: 10px;\n\theight: 30px;\n\twidth: 193px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 16px;\n\tcolor: #1e1e1e;\n\tcursor: pointer;\n}\n\n.followers {\n\theight: 55px;\n\twidth: 400px;\n\tbackground-color: #2ec4b6;\n\tfont-weight: 500;\n\tcolor: white;\n\tborder-radius: 12px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 18px;\n\tmargin: 4px;\n\tbox-shadow: 2px 2px 7px rgba(0, 0, 0, 0.4);\n\tcursor: pointer;\n}\n\n.playlist {\n\theight: 35px;\n\twidth: 400px;\n\tbackground-color: #ff9f1c;\n\tfont-weight: 500;\n\tcolor: white;\n\tborder-radius: 10px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 15px;\n\tmargin: 4px;\n\tborder: none;\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\tmargin-top: 8px;\n\tcursor: pointer;\n}\n\n.todo {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tfont-family: 'inter';\n}\n\n.h1Add {\n\tfont-size: 24px;\n\tmargin-bottom: 15px;\n\tcolor: #1e1e1e;\n\tfont-weight: 700;\n\tfont-family: 'Inter';\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-top: 30px;\n}\n\n.artist,\n.title,\n.coverImage {\n\twidth: 20%;\n\tpadding: 10px;\n\tmargin: 4px;\n\theight: 12px;\n\tborder: 2px solid #ccc;\n\tborder-radius: 10px;\n\tfont-size: 15px;\n}\n\n.create-song {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.artist:focus,\n.title:focus,\n.coverImage:focus {\n\tborder-color: #ff9f1c;\n\toutline: none;\n}\n\n.save {\n\tpadding: 10px 65px;\n\tfont-size: 16px;\n\tborder: none;\n\tborder-radius: 5px;\n\tbackground-color: #ff9f1c;\n\tcolor: white;\n\tcursor: pointer;\n\ttransition: 0.3s;\n\tmargin-left: 45%;\n\tmargin-top: 20px;\n\tmargin-bottom: 20px;\n}\n.save:hover {\n\tbackground-color: #ffbf69;\n}\n\n.playlist:hover {\n\tbackground-color: #ffbf69;\n}\n.botones {\n\tdisplay: flex;\n\tmargin: 10px;\n}\n",""]);const a=o},835:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,"input {\n\twidth: 70vh;\n\tpadding: 10px;\n\tmargin: 2vh;\n\tborder: none;\n\tborder-radius: 12px;\n\tfont-size: 15px;\n\tcolor: rgba(30, 30, 30, 0.8);\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\theight: 4vh;\n}\n\n.info {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n\nsvg {\n\tmargin-top: 40px;\n\theight: 35px;\n\twidth: 35px;\n\tcursor: pointer;\n\tposition: absolute;\n\tmargin-right: 90%;\n}\n\ninput:focus {\n\tborder-color: #2ec4b6;\n\toutline: none;\n}\n\n.logo {\n\twidth: 40vh;\n}\n\n.todo {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\talign-content: center;\n\tfont-family: 'inter';\n}\n\n.google {\n\twidth: 9vh;\n\tmargin-right: 100px;\n\tbox-shadow: 2px 2px 9px rgba(0, 0, 0, 0.2);\n\tborder-radius: 2vh;\n\tcursor: pointer;\n}\n\n.facebook {\n\twidth: 6vh;\n\tmargin-right: 100px;\n\tbox-shadow: 2px 2px 9px rgba(0, 0, 0, 0.2);\n\tborder-radius: 2vh;\n\tpadding: 8px;\n\tbackground-color: #fdfdfd;\n\tcursor: pointer;\n}\n\n.outlook {\n\twidth: 6vh;\n\tmargin: 10px;\n\tbox-shadow: 2px 2px 9px rgba(0, 0, 0, 0.2);\n\tborder-radius: 2vh;\n\tpadding: 8px;\n\tbackground-color: #fdfdfd;\n\tcursor: pointer;\n}\n\n#apps {\n\tdisplay: flex;\n\talign-items: center;\n}\n\nbutton {\n\twidth: 73vh;\n\tpadding: 10px;\n\tmargin: 2vh;\n\tborder: none;\n\tborder-radius: 10px;\n\tfont-size: 15px;\n\tcolor: white;\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\theight: 6vh;\n\tbackground-color: #2ec4b6;\n\tcursor: pointer;\n\ttransition: 0.3s;\n}\n\nbutton:hover {\n\tbackground-color: #ffbf69;\n}\n\nform {\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n}\n\n.text_create {\n\tcolor: rgba(30, 30, 30, 0.6);\n\tmargin-bottom: 25px;\n\tmargin-left: 12px;\n\tmargin-top: 0;\n\tfont-weight: 600;\n}\n\n.text {\n\tcolor: rgba(30, 30, 30, 0.6);\n\tmargin-top: 45px;\n\tmargin-bottom: 45px;\n\tmargin-right: 10px;\n\tfont-weight: 500;\n}\n\n.already_have {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.signup_btn {\n\tcursor: pointer;\n\tcolor: #ff9f1c;\n}\n\n@media screen and (max-width: 768px) {\n\tinput {\n\t\twidth: 50vh;\n\t\tpadding: 10px;\n\t\tmargin: 2vh;\n\t\tborder: none;\n\t\tborder-radius: 12px;\n\t\tfont-size: 15px;\n\t\tcolor: rgba(30, 30, 30, 0.8);\n\t\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n\t\theight: 4vh;\n\t}\n}\n\n.inputs {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: column;\n}\n",""]);const a=o},9:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,"input {\n\twidth: 30%;\n\theight: 15%;\n\tpadding: 10px;\n\tmargin: 10px;\n\tborder: 2px solid #ccc;\n\tborder-radius: 10px;\n\tfont-size: 15px;\n\tmargin-left: 15%;\n\tmargin-bottom: 30px;\n}\n\nbody {\n\tcolor: #ccc;\n}\n\nh1 {\n\tfont-family: 'inter';\n\tmargin-left: 15%;\n\tfont-size: 30px;\n\tpadding-top: 50px;\n\tcolor: #1e1e1e;\n\tmargin-top: 0;\n}\n\nh2 {\n\tfont-family: 'inter';\n\tmargin-left: 15%;\n\tfont-size: 30px;\n\tmargin-top: 10px;\n\tcolor: #969696;\n\tmargin-bottom: 20px;\n}\n\ninput:focus {\n\tborder-color: #ff9f1c;\n\toutline: none;\n}\n\nbutton {\n\tpadding: 10px 40px;\n\tfont-size: 16px;\n\tborder: none;\n\tborder-radius: 5px;\n\tbackground-color: #ff9f1c;\n\tcolor: white;\n\tcursor: pointer;\n\ttransition: 0.3s;\n\tmargin-top: 20px;\n\tmargin-bottom: 20px;\n\tbox-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);\n}\n\nbutton:hover {\n\tbackground-color: #ffbf69;\n}\n\n.input-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n",""]);const a=o},628:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,"h1 {\n\tfont-family: 'inter';\n\tmargin-left: 20px;\n\tfont-size: 30px;\n\tmargin-top: 60px;\n\tcolor: #1e1e1e;\n}\n\n.playlists {\n\tdisplay: flex;\n\toverflow-x: auto;\n\tmax-width: 100%;\n\tpadding-bottom: 20px;\n}\n\n.my-friend {\n\tflex: 0 0 auto;\n\tmargin-right: 20px;\n}\n",""]);const a=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},601:t=>{t.exports=function(t){return t[1]}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t=[{id:1,iconohome:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#ff9f1c" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>',iconoexplore:'"https://i.pinimg.com/originals/94/67/f5/9467f504e83345d60816f9b87ac84588.jpg"',iconoprofile:'<svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 24 24" style="fill: rgb(32, 32, 32);transform: ;msFilter:;"><path d="M12 2C6.579 2 2 6.579 2 12s4.579 10 10 10 10-4.579 10-10S17.421 2 12 2zm0 5c1.727 0 3 1.272 3 3s-1.273 3-3 3c-1.726 0-3-1.272-3-3s1.274-3 3-3zm-5.106 9.772c.897-1.32 2.393-2.2 4.106-2.2h2c1.714 0 3.209.88 4.106 2.2C15.828 18.14 14.015 19 12 19s-3.828-.86-5.106-2.228z"></path></svg>'}];var e=n(67);const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const i=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==o||null==a||null==c)throw new s;const l=i<<2|o>>4;if(r.push(l),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==c){const t=a<<6&192|c;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=r(t);return i.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=function(t){try{return i.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&a(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},l=t=>{var e,n;return null===(n=null===(e=c())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},u=t=>{const e=l(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h=()=>{var t;return null===(t=c())||void 0===t?void 0:t.config},d=t=>{var e;return null===(e=c())||void 0===e?void 0:e[`_${t}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){try{return"object"==typeof indexedDB}catch(t){return!1}}class y extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(w,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new y(r,o,n)}}const w=/\{\$([^}]+)}/g;function b(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(_(n)&&_(s)){if(!b(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function _(t){return null!==t&&"object"==typeof t}function E(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function I(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}})),e}function T(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class C{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function S(){}function k(t){return t&&t._delegate?t._delegate:t}class A{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const x="[DEFAULT]";class R{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new f;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:x})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=x){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=x){return this.instances.has(t)}getOptions(t=x){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===x?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=x){return this.component?this.component.multipleInstances?t:x:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new R(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const D=[];var O;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(O||(O={}));const L={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},P=O.INFO,M={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},U=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=M[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class F{constructor(t){this.name=t,this._logLevel=P,this._logHandler=U,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in O))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?L[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...t),this._logHandler(this,O.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...t),this._logHandler(this,O.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,O.INFO,...t),this._logHandler(this,O.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,O.WARN,...t),this._logHandler(this,O.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...t),this._logHandler(this,O.ERROR,...t)}}const V=(t,e)=>e.some((e=>t instanceof e));let j,B;const q=new WeakMap,z=new WeakMap,$=new WeakMap,H=new WeakMap,K=new WeakMap;let G={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return z.get(t);if("objectStoreNames"===e)return t.objectStoreNames||$.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Q(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function W(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(X(this),t),Q(q.get(this))}:function(...t){return Q(e.apply(X(this),t))}:function(t,...n){const r=e.call(X(this),t,...n);return $.set(r,t.sort?t.sort():[t]),Q(r)}:(t instanceof IDBTransaction&&function(t){if(z.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));z.set(t,e)}(t),V(t,j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,G):t);var e}function Q(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(Q(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&q.set(e,t)})).catch((()=>{})),K.set(e,t),e}(t);if(H.has(t))return H.get(t);const e=W(t);return e!==t&&(H.set(t,e),K.set(e,t)),e}const X=t=>K.get(t),J=["get","getKey","getAll","getAllKeys","count"],Y=["put","add","delete","clear"],Z=new Map;function tt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Z.get(e))return Z.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Y.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!J.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return Z.set(e,s),s}var et;et=G,G={...et,get:(t,e,n)=>tt(t,e)||et.get(t,e,n),has:(t,e)=>!!tt(t,e)||et.has(t,e)};class nt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const rt="@firebase/app",it="0.9.26",st=new F("@firebase/app"),ot="[DEFAULT]",at={[rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ct=new Map,lt=new Map;function ut(t,e){try{t.container.addComponent(e)}catch(n){st.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ht(t){const e=t.name;if(lt.has(e))return st.debug(`There were multiple attempts to register component ${e}.`),!1;lt.set(e,t);for(const e of ct.values())ut(e,t);return!0}function dt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ft=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new A("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const mt="10.7.2";function gt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:ot,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ft.create("bad-app-name",{appName:String(i)});if(n||(n=h()),!n)throw ft.create("no-options");const s=ct.get(i);if(s){if(b(n,s.options)&&b(r,s.config))return s;throw ft.create("duplicate-app",{appName:i})}const o=new N(i);for(const t of lt.values())o.addComponent(t);const a=new pt(n,r,o);return ct.set(i,a),a}function yt(t=ot){const e=ct.get(t);if(!e&&t===ot&&h())return gt();if(!e)throw ft.create("no-app",{appName:t});return e}function vt(t,e,n){var r;let i=null!==(r=at[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void st.warn(t.join(" "))}ht(new A(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const wt="firebase-heartbeat-database",bt=1,_t="firebase-heartbeat-store";let Et=null;function It(){return Et||(Et=function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Q(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(Q(o.result),t.oldVersion,t.newVersion,Q(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(wt,bt,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(_t)}catch(t){console.warn(t)}}}).catch((t=>{throw ft.create("idb-open",{originalErrorMessage:t.message})}))),Et}async function Tt(t,e){try{const n=(await It()).transaction(_t,"readwrite"),r=n.objectStore(_t);await r.put(e,Ct(t)),await n.done}catch(t){if(t instanceof y)st.warn(t.message);else{const e=ft.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});st.warn(e.message)}}}function Ct(t){return`${t.name}!${t.options.appId}`}class St{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new At(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=kt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=kt(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),xt(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=o(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function kt(){return(new Date).toISOString().substring(0,10)}class At{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!g()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await It();return await e.transaction(_t).objectStore(_t).get(Ct(t))}catch(t){if(t instanceof y)st.warn(t.message);else{const e=ft.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});st.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Tt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Tt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function xt(t){return o(JSON.stringify({version:2,heartbeats:t})).length}function Rt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}ht(new A("platform-logger",(t=>new nt(t)),"PRIVATE")),ht(new A("heartbeat",(t=>new St(t)),"PRIVATE")),vt(rt,it,""),vt(rt,it,"esm2017"),vt("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Nt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Dt=new v("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ot=new F("@firebase/auth");function Lt(t,...e){Ot.logLevel<=O.ERROR&&Ot.error(`Auth (${mt}): ${t}`,...e)}function Pt(t,...e){throw Ut(t,...e)}function Mt(t,...e){return Ut(t,...e)}function Ut(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Dt.create(t,...e)}function Ft(t,e,...n){if(!t)throw Ut(e,...n)}function Vt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lt(e),new Error(e)}function jt(t,e){t||Vt(e)}function Bt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function qt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function zt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===qt()||"https:"===qt()||function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class $t{constructor(t,e){this.shortDelay=t,this.longDelay=e,jt(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return zt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ht(t,e){jt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Kt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wt=new $t(3e4,6e4);function Qt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xt(t,e,n,r,i={}){return Jt(t,i,(async()=>{let i={},s={};r&&("GET"===e?s=r:i={body:JSON.stringify(r)});const o=E(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Kt.fetch()(Zt(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Jt(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Gt),e);try{const e=new ee(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ne(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ne(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ne(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw ne(t,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const r=Object.assign(Object.assign({},Nt()),{[e]:n});return new v("auth","Firebase",r).create(e,{appName:t.name})}(t,a,o);Pt(t,a)}}catch(e){if(e instanceof y)throw e;Pt(t,"network-request-failed",{message:String(e)})}}async function Yt(t,e,n,r,i={}){const s=await Xt(t,e,n,r,i);return"mfaPendingCredential"in s&&Pt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Zt(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ht(t.config,i):`${t.config.apiScheme}://${i}`}function te(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ee{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Mt(this.auth,"network-request-failed"))),Wt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ne(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mt(t,e,r);return i.customData._tokenResponse=n,i}function re(t){return void 0!==t&&void 0!==t.enterprise}class ie{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return te(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}function se(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function oe(t){return 1e3*Number(t)}function ae(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{const t=a(n);return t?JSON.parse(t):(Lt("Failed to decode base64 JWT payload"),null)}catch(t){return Lt("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function ce(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof y&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class le{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class ue{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function he(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ce(t,async function(t,e){return Xt(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:r}));Ft(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Rt(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const u=t.isAnonymous,h=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ue(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class de{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ft(t.idToken,"internal-error"),Ft(void 0!==t.idToken,"internal-error"),Ft(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=ae(t);return Ft(e,"internal-error"),Ft(void 0!==e.exp,"internal-error"),Ft(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Ft(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(t,e){const n=await Jt(t,{},(async()=>{const n=E({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,s=Zt(t,r,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new de;return n&&(Ft("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(Ft("string"==typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(Ft("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new de,this.toJSON())}_performRefresh(){return Vt("not implemented")}}function fe(t,e){Ft("string"==typeof t||void 0===t,"internal-error",{appName:e})}class pe{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=Rt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new le(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ue(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await ce(this,this.stsTokenManager.getToken(this.auth,t));return Ft(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=k(t),r=await n.getIdToken(e),i=ae(r);Ft(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:se(oe(i.auth_time)),issuedAtTime:se(oe(i.iat)),expirationTime:se(oe(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=k(t);await he(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Ft(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new pe(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await he(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await ce(this,async function(t,e){return Xt(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=e;Ft(v&&E,t,"internal-error");const I=de.fromJSON(this.name,E);Ft("string"==typeof v,t,"internal-error"),fe(u,t.name),fe(h,t.name),Ft("boolean"==typeof w,t,"internal-error"),Ft("boolean"==typeof b,t,"internal-error"),fe(d,t.name),fe(f,t.name),fe(p,t.name),fe(m,t.name),fe(g,t.name),fe(y,t.name);const T=new pe({uid:v,auth:t,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((t=>Object.assign({},t)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(t,e,n=!1){const r=new de;r.updateFromServerResponse(e);const i=new pe({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await he(i),i}}const me=new Map;function ge(t){jt(t instanceof Function,"Expected a class definition");let e=me.get(t);return e?(jt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,me.set(t,e),e)}class ye{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ye.type="NONE";const ve=ye;function we(t,e,n){return`firebase:${t}:${e}:${n}`}class be{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=we(this.userKey,r.apiKey,i),this.fullPersistenceKey=we("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?pe._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new be(ge(ve),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||ge(ve);const s=we(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const r=pe._fromJSON(t,e);n!==i&&(o=r),i=n;break}}catch(t){}const a=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(s)}catch(t){}}))),new be(i,t,n)):new be(i,t,n)}}function _e(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ce(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ee(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ke(e))return"Blackberry";if(Ae(e))return"Webos";if(Ie(e))return"Safari";if((e.includes("chrome/")||Te(e))&&!e.includes("edge/"))return"Chrome";if(Se(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ee(t=m()){return/firefox\//i.test(t)}function Ie(t=m()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Te(t=m()){return/crios\//i.test(t)}function Ce(t=m()){return/iemobile/i.test(t)}function Se(t=m()){return/android/i.test(t)}function ke(t=m()){return/blackberry/i.test(t)}function Ae(t=m()){return/webos/i.test(t)}function xe(t=m()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Re(t=m()){return xe(t)||Se(t)||Ae(t)||ke(t)||/windows phone/i.test(t)||Ce(t)}function Ne(t,e=[]){let n;switch(t){case"Browser":n=_e(m());break;case"Worker":n=`${_e(m())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mt}/${r}`}class De{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,r)=>{try{n(t(e))}catch(t){r(t)}}));n.onAbort=e,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class Oe{constructor(t){var e,n,r,i;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=t.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let r=0;r<t.length;r++)n=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}class Le{constructor(t,e,n,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Me(this),this.idTokenSubscription=new Me(this),this.beforeStateQueue=new De(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ge(e)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await be.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(t){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await he(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?k(t):null;return e&&Ft(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Ft(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ge(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t,e={}){return Xt(t,"GET","/v2/passwordPolicy",Qt(t,e))}(this),e=new Oe(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new v("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Xt(t,"POST","/v2/accounts:revokeToken",Qt(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ge(t)||this._popupRedirectResolver;Ft(e,this,"argument-error"),this.redirectPersistenceManager=await be.create(this,[ge(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ft(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof e){const i=t.addObserver(e,n,r);return()=>{s=!0,i()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ne(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){Ot.logLevel<=O.WARN&&Ot.warn(`Auth (${mt}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function Pe(t){return k(t)}class Me{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new C(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ue(t){return new Promise(((e,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",t),r.onload=e,r.onerror=t=>{const e=Mt("internal-error");e.customData=t,n(e)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}))}function Fe(t){return`__${t}${Math.floor(1e6*Math.random())}`}class Ve{constructor(t){this.type="recaptcha-enterprise",this.auth=Pe(t)}async verify(t="verify",e=!1){function n(e,n,r){const i=window.grecaptcha;re(i)?i.enterprise.ready((()=>{i.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,r)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{(async function(t,e){return Xt(t,"GET","/v2/recaptchaConfig",Qt(t,e))})(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ie(r);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))})(this.auth).then((i=>{if(!e&&re(window.grecaptcha))n(i,t,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Ue("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,t,r)})).catch((t=>{r(t)}))}})).catch((t=>{r(t)}))}))}}async function je(t,e,n,r=!1){const i=new Ve(t);let s;try{s=await i.verify(n)}catch(t){s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Be(t,e,n,r){var i;if(null===(i=t._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await je(t,e,n,"getOobCode"===n);return r(t,i)}return r(t,e).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await je(t,e,n,"getOobCode"===n);return r(t,i)}return Promise.reject(i)}))}function qe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ze(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class $e{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Vt("not implemented")}_getIdTokenResponse(t){return Vt("not implemented")}_linkToIdToken(t,e){return Vt("not implemented")}_getReauthenticationResolver(t){return Vt("not implemented")}}async function He(t,e){return Xt(t,"POST","/v1/accounts:signUp",e)}async function Ke(t,e){return Yt(t,"POST","/v1/accounts:signInWithPassword",Qt(t,e))}class Ge extends $e{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Ge(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Ge(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Be(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ke);case"emailLink":return async function(t,e){return Yt(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}(t,{email:this._email,oobCode:this._password});default:Pt(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Be(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",He);case"emailLink":return async function(t,e){return Yt(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Pt(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function We(t,e){return Yt(t,"POST","/v1/accounts:signInWithIdp",Qt(t,e))}class Qe extends $e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Qe(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Pt("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,i=Rt(e,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Qe(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(t){return We(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,We(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,We(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=E(e)}return t}}const Xe={USER_NOT_FOUND:"user-not-found"};class Je extends $e{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Je({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Je({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Yt(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Yt(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e));if(n.temporaryProof)throw ne(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Yt(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Xe)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new Je({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ye{constructor(t){var e,n,r,i,s,o;const a=I(T(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ft(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=I(T(t)).link,n=e?I(T(e)).deep_link_id:null,r=I(T(t)).deep_link_id;return(r?I(T(r)).link:null)||r||n||e||t}(t);try{return new Ye(e)}catch(t){return null}}}class Ze{constructor(){this.providerId=Ze.PROVIDER_ID}static credential(t,e){return Ge._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ye.parseLink(e);return Ft(n,"argument-error"),Ge._fromEmailAndCode(t,n.code,n.tenantId)}}Ze.PROVIDER_ID="password",Ze.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ze.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tn{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class en extends tn{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class nn extends en{constructor(){super("facebook.com")}static credential(t){return Qe._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return nn.credentialFromTaggedObject(t)}static credentialFromError(t){return nn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nn.credential(t.oauthAccessToken)}catch(t){return null}}}nn.FACEBOOK_SIGN_IN_METHOD="facebook.com",nn.PROVIDER_ID="facebook.com";class rn extends en{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Qe._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return rn.credentialFromTaggedObject(t)}static credentialFromError(t){return rn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return rn.credential(e,n)}catch(t){return null}}}rn.GOOGLE_SIGN_IN_METHOD="google.com",rn.PROVIDER_ID="google.com";class sn extends en{constructor(){super("github.com")}static credential(t){return Qe._fromParams({providerId:sn.PROVIDER_ID,signInMethod:sn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return sn.credentialFromTaggedObject(t)}static credentialFromError(t){return sn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sn.credential(t.oauthAccessToken)}catch(t){return null}}}sn.GITHUB_SIGN_IN_METHOD="github.com",sn.PROVIDER_ID="github.com";class on extends en{constructor(){super("twitter.com")}static credential(t,e){return Qe._fromParams({providerId:on.PROVIDER_ID,signInMethod:on.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return on.credentialFromTaggedObject(t)}static credentialFromError(t){return on.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return on.credential(e,n)}catch(t){return null}}}async function an(t,e){return Yt(t,"POST","/v1/accounts:signUp",Qt(t,e))}on.TWITTER_SIGN_IN_METHOD="twitter.com",on.PROVIDER_ID="twitter.com";class cn{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,r=!1){const i=await pe._fromIdTokenResponse(t,n,r),s=ln(n);return new cn({user:i,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=ln(n);return new cn({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function ln(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class un extends y{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,un.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new un(t,e,n,r)}}function hn(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw un._fromErrorAndOperation(t,n,e,r);throw n}))}async function dn(t,e,n=!1){const r="signIn",i=await hn(t,r,e),s=await cn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function fn(t){const e=Pe(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}new WeakMap;const pn="__sak";class mn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(pn,"1"),this.storage.removeItem(pn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class gn extends mn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=m();return Ie(t)||xe(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Re(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);!function(){const t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||10!==document.documentMode||i===t.newValue||t.newValue===t.oldValue?r():setTimeout(r,10)}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}gn.type="LOCAL";const yn=gn;class vn extends mn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}vn.type="SESSION";const wn=vn;class bn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new bn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async t=>t(e.origin,i))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function _n(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}bn.receivers=[];class En{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=_n("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function In(){return window}function Tn(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}const Cn="firebaseLocalStorageDb",Sn="firebaseLocalStorage",kn="fbase_key";class An{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function xn(t,e){return t.transaction([Sn],e?"readwrite":"readonly").objectStore(Sn)}function Rn(){const t=indexedDB.open(Cn,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Sn,{keyPath:kn})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Sn)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Cn);return new An(t).toPromise()}(),e(await Rn()))}))}))}async function Nn(t,e,n){const r=xn(t,!0).put({[kn]:e,value:n});return new An(r).toPromise()}function Dn(t,e){const n=xn(t,!0).delete(e);return new An(n).toPromise()}class On{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Rn()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bn._getInstance(Tn()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new En(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Rn();return await Nn(t,pn,"1"),await Dn(t,pn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Nn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=xn(t,!1).get(e),r=await new An(n).toPromise();return void 0===r?null:r.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Dn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=xn(t,!1).getAll();return new An(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}On.type="LOCAL";const Ln=On;Fe("rcb"),new $t(3e4,6e4);class Pn{constructor(t){this.providerId=Pn.PROVIDER_ID,this.auth=Pe(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var r;const i=await n.verify();try{let s;if(Ft("string"==typeof i,t,"argument-error"),Ft("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Ft("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:start",Qt(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ft("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ft(n,t,"missing-multi-factor-info");const o=await function(t,e){return Xt(t,"POST","/v2/accounts/mfaSignIn:start",Qt(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Xt(t,"POST","/v1/accounts:sendVerificationCode",Qt(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}(this.auth,t,k(e))}static credential(t,e){return Je._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Pn.credentialFromTaggedObject(e)}static credentialFromError(t){return Pn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Je._fromTokenResponse(e,n):null}}Pn.PROVIDER_ID="phone",Pn.PHONE_SIGN_IN_METHOD="phone";class Mn extends $e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return We(t,this._buildIdpRequest())}_linkToIdToken(t,e){return We(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return We(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Un(t){return dn(t.auth,new Mn(t),t.bypassAuthState)}function Fn(t){const{auth:e,user:n}=t;return Ft(n,e,"internal-error"),async function(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await ce(t,hn(r,i,e,t),n);Ft(s.idToken,r,"internal-error");const o=ae(s.idToken);Ft(o,r,"internal-error");const{sub:a}=o;return Ft(t.uid===a,r,"user-mismatch"),cn._forOperation(t,i,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Pt(r,"user-mismatch"),t}}(n,new Mn(t),t.bypassAuthState)}async function Vn(t){const{auth:e,user:n}=t;return Ft(n,e,"internal-error"),async function(t,e,n=!1){const r=await ce(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cn._forOperation(t,"link",r)}(n,new Mn(t),t.bypassAuthState)}class jn{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:Pt(this.auth,"internal-error")}}resolve(t){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bn=new $t(2e3,1e4);class qn extends jn{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,qn.currentPopupAction&&qn.currentPopupAction.cancel(),qn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ft(t,this.auth,"internal-error"),t}async onExecution(){jt(1===this.filter.length,"Popup operations only handle one event");const t=_n();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Mt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Mt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Bn.get())};t()}}qn.currentPopupAction=null;const zn="pendingRedirect",$n=new Map;class Hn extends jn{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=$n.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return we(zn,t.config.apiKey,t.name)}(e),r=function(t){return ge(t._redirectPersistence)}(t);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}$n.set(this.auth._key(),t)}return this.bypassAuthState||$n.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Kn(t,e){$n.set(t._key(),e)}async function Gn(t,e,n=!1){const r=Pe(t),i=function(t,e){return e?ge(e):(Ft(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),s=new Hn(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}class Wn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Xn(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Mt(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qn(t))}saveEventToCache(t){this.cachedEventUids.add(Qn(t)),this.lastProcessedEventTime=Date.now()}}function Qn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Xn({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const Jn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yn=/^https?/;function Zn(t){const e=Bt(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Yn.test(n))return!1;if(Jn.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const tr=new $t(3e4,6e4);function er(){const t=In().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let nr=null;function rr(t){return nr=nr||function(t){return new Promise(((e,n)=>{var r,i,s;function o(){er(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{er(),n(Mt(t,"network-request-failed"))},timeout:tr.get()})}if(null===(i=null===(r=In().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=In().gapi)||void 0===s?void 0:s.load)){const e=Fe("iframefcb");return In()[e]=()=>{gapi.load?o():n(Mt(t,"network-request-failed"))},Ue(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw nr=null,t}))}(t),nr}const ir=new $t(5e3,15e3),sr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},or=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ar(t){const e=t.config;Ft(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ht(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:mt},i=or.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${E(r).slice(1)}`}const cr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}const ur=encodeURIComponent("fac");async function hr(t,e,n,r,i,s){Ft(t.config.authDomain,t,"auth-domain-config-required"),Ft(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mt,eventId:i};if(e instanceof tn){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof en){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];const c=await t._getAppCheckToken(),l=c?`#${ur}=${encodeURIComponent(c)}`:"";return`${function({config:t}){return t.emulator?Ht(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${E(a).slice(1)}${l}`}const dr="webStorageSupport",fr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wn,this._completeRedirectFn=Gn,this._overrideRedirectResult=Kn}async _openPopup(t,e,n,r){var i;return jt(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},cr),{width:r.toString(),height:i.toString(),top:s,left:o}),l=m().toLowerCase();n&&(a=Te(l)?"_blank":n),Ee(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=m()){var e;return xe(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new lr(null);const h=window.open(e||"",a,u);Ft(h,t,"popup-blocked");try{h.focus()}catch(t){}return new lr(h)}(t,await hr(t,e,n,Bt(),r),_n())}async _openRedirect(t,e,n,r){return await this._originValidation(t),i=await hr(t,e,n,Bt(),r),In().location.href=i,new Promise((()=>{}));var i}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(jt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await rr(t),n=In().gapi;return Ft(n,t,"internal-error"),e.open({where:document.body,url:ar(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sr,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=Mt(t,"network-request-failed"),s=In().setTimeout((()=>{r(i)}),ir.get());function o(){In().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{r(i)}))}))))}(t),n=new Wn(t);return e.register("authEvent",(e=>(Ft(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(dr,{type:dr},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[dr];void 0!==i&&e(!!i),Pt(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Xt(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(Zn(t))return}catch(t){}Pt(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Re()||Ie()||xe()}};var pr="@firebase/auth",mr="1.5.1";class gr{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const yr=d("authIdTokenMaxAge")||300;let vr=null;var wr;wr="Browser",ht(new A("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Ft(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:wr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ne(wr)},c=new Le(n,r,i,a);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ge);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(c,e),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),ht(new A("auth-internal",(t=>(t=>new gr(t))(Pe(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),vt(pr,mr,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(wr)),vt(pr,mr,"esm2017"),vt("firebase","10.7.2","app");var br,_r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Er={},Ir=Ir||{},Tr=_r||self;function Cr(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Sr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var kr="closure_uid_"+(1e9*Math.random()>>>0),Ar=0;function xr(t,e,n){return t.call.apply(t.bind,arguments)}function Rr(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Nr(t,e,n){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xr:Rr).apply(null,arguments)}function Dr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Or(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Lr(){this.s=this.s,this.o=this.o}Lr.prototype.s=!1,Lr.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,kr)&&t[kr]||(t[kr]=++Ar))},Lr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Mr(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ur(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Cr(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function Fr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Fr.prototype.h=function(){this.defaultPrevented=!0};var Vr=function(){if(!Tr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Tr.addEventListener("test",t,e),Tr.removeEventListener("test",t,e)}catch(t){}return t}();function jr(t){return/^[\s\xa0]*$/.test(t)}function Br(){var t=Tr.navigator;return t&&(t=t.userAgent)?t:""}function qr(t){return-1!=Br().indexOf(t)}function zr(t){return zr[" "](t),t}zr[" "]=function(){};var $r,Hr,Kr,Gr=qr("Opera"),Wr=qr("Trident")||qr("MSIE"),Qr=qr("Edge"),Xr=Qr||Wr,Jr=qr("Gecko")&&!(-1!=Br().toLowerCase().indexOf("webkit")&&!qr("Edge"))&&!(qr("Trident")||qr("MSIE"))&&!qr("Edge"),Yr=-1!=Br().toLowerCase().indexOf("webkit")&&!qr("Edge");function Zr(){var t=Tr.document;return t?t.documentMode:void 0}t:{var ti="",ei=(Hr=Br(),Jr?/rv:([^\);]+)(\)|;)/.exec(Hr):Qr?/Edge\/([\d\.]+)/.exec(Hr):Wr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Hr):Yr?/WebKit\/(\S+)/.exec(Hr):Gr?/(?:Version)[ \/]?(\S+)/.exec(Hr):void 0);if(ei&&(ti=ei?ei[1]:""),Wr){var ni=Zr();if(null!=ni&&ni>parseFloat(ti)){$r=String(ni);break t}}$r=ti}Tr.document&&Wr?Kr=Zr()||parseInt($r,10)||void 0:Kr=void 0;var ri=Kr;function ii(t,e){if(Fr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Jr){t:{try{zr(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:si[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ii.$.h.call(this)}}Or(ii,Fr);var si={2:"touch",3:"pen",4:"mouse"};ii.prototype.h=function(){ii.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var oi="closure_listenable_"+(1e6*Math.random()|0),ai=0;function ci(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++ai,this.fa=this.ia=!1}function li(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ui(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function hi(t){const e={};for(const n in t)e[n]=t[n];return e}const di="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fi(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<di.length;e++)n=di[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pi(t){this.src=t,this.g={},this.h=0}function mi(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Pr(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(li(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function gi(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}pi.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=gi(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new ci(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var yi="closure_lm_"+(1e6*Math.random()|0),vi={};function wi(t,e,n,r,i){if(r&&r.once)return _i(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)wi(t,e[s],n,r,i);return null}return n=Ai(n),t&&t[oi]?t.O(e,n,Sr(r)?!!r.capture:!!r,i):bi(t,e,n,!1,r,i)}function bi(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Sr(i)?!!i.capture:!!i,a=Si(t);if(a||(t[yi]=a=new pi(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){const t=Ci;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Vr||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ti(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _i(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_i(t,e[s],n,r,i);return null}return n=Ai(n),t&&t[oi]?t.P(e,n,Sr(r)?!!r.capture:!!r,i):bi(t,e,n,!0,r,i)}function Ei(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ei(t,e[s],n,r,i);else r=Sr(r)?!!r.capture:!!r,n=Ai(n),t&&t[oi]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=gi(s=t.g[e],n,r,i))&&(li(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Si(t))&&(e=t.g[e.toString()],t=-1,e&&(t=gi(e,n,r,i)),(n=-1<t?e[t]:null)&&Ii(n))}function Ii(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[oi])mi(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ti(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Si(e))?(mi(n,t),0==n.h&&(n.src=null,e[yi]=null)):li(t)}}}function Ti(t){return t in vi?vi[t]:vi[t]="on"+t}function Ci(t,e){if(t.fa)t=!0;else{e=new ii(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ii(t),t=n.call(r,e)}return t}function Si(t){return(t=t[yi])instanceof pi?t:null}var ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ai(t){return"function"==typeof t?t:(t[ki]||(t[ki]=function(e){return t.handleEvent(e)}),t[ki])}function xi(){Lr.call(this),this.i=new pi(this),this.S=this,this.J=null}function Ri(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Fr(e,t);else if(e instanceof Fr)e.target=e.target||t;else{var i=e;fi(e=new Fr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ni(o,r,!0,e)&&i}if(i=Ni(o=e.g=t,r,!0,e)&&i,i=Ni(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Ni(o=e.g=n[s],r,!1,e)&&i}function Ni(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&mi(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Or(xi,Lr),xi.prototype[oi]=!0,xi.prototype.removeEventListener=function(t,e,n,r){Ei(this,t,e,n,r)},xi.prototype.N=function(){if(xi.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)li(n[r]);delete e.g[t],e.h--}}this.J=null},xi.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},xi.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Di=Tr.JSON.stringify;function Oi(){var t=ji;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Li=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Pi),(t=>t.reset()));class Pi{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mi(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ui(t){Tr.setTimeout((()=>{throw t}),0)}let Fi,Vi=!1,ji=new class{constructor(){this.h=this.g=null}add(t,e){const n=Li.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Bi=()=>{const t=Tr.Promise.resolve(void 0);Fi=()=>{t.then(qi)}};var qi=()=>{for(var t;t=Oi();){try{t.h.call(t.g)}catch(t){Ui(t)}var e=Li;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Vi=!1};function zi(t,e){xi.call(this),this.h=t||1,this.g=e||Tr,this.j=Nr(this.qb,this),this.l=Date.now()}function $i(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Hi(t,e,n){if("function"==typeof t)n&&(t=Nr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Nr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Tr.setTimeout(t,e||0)}function Ki(t){t.g=Hi((()=>{t.g=null,t.i&&(t.i=!1,Ki(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Or(zi,xi),(br=zi.prototype).ga=!1,br.T=null,br.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ri(this,"tick"),this.ga&&($i(this),this.start()))}},br.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},br.N=function(){zi.$.N.call(this),$i(this),delete this.g};class Gi extends Lr{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ki(this)}N(){super.N(),this.g&&(Tr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(t){Lr.call(this),this.h=t,this.g={}}Or(Wi,Lr);var Qi=[];function Xi(t,e,n,r){Array.isArray(n)||(n&&(Qi[0]=n.toString()),n=Qi);for(var i=0;i<n.length;i++){var s=wi(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ji(t){ui(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ii(t)}),t),t.g={}}function Yi(){this.g=!0}function Zi(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Di(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Wi.prototype.N=function(){Wi.$.N.call(this),Ji(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yi.prototype.Ea=function(){this.g=!1},Yi.prototype.info=function(){};var ts={},es=null;function ns(){return es=es||new xi}function rs(t){Fr.call(this,ts.Ta,t)}function is(t){const e=ns();Ri(e,new rs(e))}function ss(t,e){Fr.call(this,ts.STAT_EVENT,t),this.stat=e}function os(t){const e=ns();Ri(e,new ss(e,t))}function as(t,e){Fr.call(this,ts.Ua,t),this.size=e}function cs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Tr.setTimeout((function(){t()}),e)}ts.Ta="serverreachability",Or(rs,Fr),ts.STAT_EVENT="statevent",Or(ss,Fr),ts.Ua="timingevent",Or(as,Fr);var ls={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},us={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hs(){}function ds(t){return t.h||(t.h=t.i())}function fs(){}hs.prototype.h=null;var ps,ms={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gs(){Fr.call(this,"d")}function ys(){Fr.call(this,"c")}function vs(){}function ws(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wi(this),this.P=_s,t=Xr?125:void 0,this.V=new zi(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bs}function bs(){this.i=null,this.g="",this.h=!1}Or(gs,Fr),Or(ys,Fr),Or(vs,hs),vs.prototype.g=function(){return new XMLHttpRequest},vs.prototype.i=function(){return{}},ps=new vs;var _s=45e3,Es={},Is={};function Ts(t,e,n){t.L=1,t.A=zs(Fs(e)),t.u=n,t.S=!0,Cs(t,null)}function Cs(t,e){t.G=Date.now(),xs(t),t.B=Fs(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),no(n.i,"t",r),t.o=0,n=t.l.J,t.h=new bs,t.g=ra(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Gi(Nr(t.Pa,t,t.g),t.O)),Xi(t.U,t.g,"readystatechange",t.nb),e=t.I?hi(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),is(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Ss(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function ks(t,e,n){let r,i=!0;for(;!t.J&&t.o<n.length;){if(r=As(t,n),r==Is){4==e&&(t.s=4,os(14),i=!1),Zi(t.j,t.m,null,"[Incomplete Response]");break}if(r==Es){t.s=4,os(15),Zi(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Zi(t.j,t.m,r,null),Ls(t,r)}Ss(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,os(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qo(e),e.M=!0,os(11))):(Zi(t.j,t.m,n,"[Invalid Chunked Response]"),Os(t),Ds(t))}function As(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?Is:(n=Number(e.substring(n,r)),isNaN(n)?Es:(r+=1)+n>e.length?Is:(e=e.slice(r,r+n),t.o=r+n,e))}function xs(t){t.Y=Date.now()+t.P,Rs(t,t.P)}function Rs(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=cs(Nr(t.lb,t),e)}function Ns(t){t.C&&(Tr.clearTimeout(t.C),t.C=null)}function Ds(t){0==t.l.H||t.J||Yo(t.l,t)}function Os(t){Ns(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,$i(t.V),Ji(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ls(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||lo(n.i,t)))if(!t.K&&lo(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Jo(n),Bo(n)}Wo(n),os(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=cs(Nr(n.ib,n),6e3));if(1>=co(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else ta(n,11)}else if((t.K||n.g==t)&&Jo(n),!jr(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uo(s,s.h),s.h=null))}if(r.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,qs(r.I,r.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=na(r,r.J?r.pa:null,r.Y),o.K){ho(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Ns(a),xs(a)),r.g=o}else Go(r);0<n.j.length&&zo(n)}else"stop"!=l[0]&&"close"!=l[0]||ta(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ta(n,7):jo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}is()}catch(t){}}function Ps(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Cr(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Cr(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Cr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(br=ws.prototype).setTimeout=function(t){this.P=t},br.nb=function(t){t=t.target;const e=this.M;e&&3==Lo(t)?e.l():this.Pa(t)},br.Pa=function(t){try{if(t==this.g)t:{const u=Lo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||Xr||this.g&&(this.h.h||this.g.ja()||Po(this.g)))){this.J||4!=u||7==e||is(),Ns(this);var n=this.g.da();this.ca=n;e:if(Ss(this)){var r=Po(this.g);t="";var i=r.length,s=4==Lo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Os(this),Ds(this);var o="";break e}this.h.i=new Tr.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jr(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,os(12),Os(this),Ds(this);break t}Zi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,n)}this.S?(ks(this,u,o),Xr&&this.i&&3==u&&(Xi(this.U,this.V,"tick",this.mb),this.V.start())):(Zi(this.j,this.m,o,null),Ls(this,o)),4==u&&Os(this),this.i&&!this.J&&(4==u?Yo(this.l,this):(this.i=!1,xs(this)))}else(function(t){const e={};t=(t.g&&2<=Lo(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(jr(t[r]))continue;var n=Mi(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,os(12)):(this.s=0,os(13)),Os(this),Ds(this)}}}catch(t){}},br.mb=function(){if(this.g){var t=Lo(this.g),e=this.g.ja();this.o<e.length&&(Ns(this),ks(this,t,e),this.i&&4!=t&&xs(this))}},br.cancel=function(){this.J=!0,Os(this)},br.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(is(),os(17)),Os(this),this.s=2,Ds(this)):Rs(this,this.Y-t)};var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Us(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Us){this.h=t.h,Vs(this,t.j),this.s=t.s,this.g=t.g,js(this,t.m),this.l=t.l;var e=t.i,n=new Ys;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Bs(this,n),this.o=t.o}else t&&(e=String(t).match(Ms))?(this.h=!1,Vs(this,e[1]||"",!0),this.s=$s(e[2]||""),this.g=$s(e[3]||"",!0),js(this,e[4]),this.l=$s(e[5]||"",!0),Bs(this,e[6]||"",!0),this.o=$s(e[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}function Fs(t){return new Us(t)}function Vs(t,e,n){t.j=n?$s(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function js(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Bs(t,e,n){e instanceof Ys?(t.i=e,function(t,e){e&&!t.j&&(Zs(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(to(this,e),no(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Hs(e,Xs)),t.i=new Ys(e,t.h))}function qs(t,e,n){t.i.set(e,n)}function zs(t){return qs(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $s(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ks),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ks(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Us.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Hs(e,Gs,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Hs(e,Gs,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hs(n,"/"==n.charAt(0)?Qs:Ws,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Hs(n,Js)),t.join("")};var Gs=/[#\/\?@]/g,Ws=/[#\?:]/g,Qs=/[#\?]/g,Xs=/[#\?@]/g,Js=/#/g;function Ys(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zs(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function to(t,e){Zs(t),e=ro(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function eo(t,e){return Zs(t),e=ro(t,e),t.g.has(e)}function no(t,e,n){to(t,e),0<n.length&&(t.i=null,t.g.set(ro(t,e),Mr(n)),t.h+=n.length)}function ro(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(br=Ys.prototype).add=function(t,e){Zs(this),this.i=null,t=ro(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},br.forEach=function(t,e){Zs(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},br.ta=function(){Zs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},br.Z=function(t){Zs(this);let e=[];if("string"==typeof t)eo(this,t)&&(e=e.concat(this.g.get(ro(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},br.set=function(t,e){return Zs(this),this.i=null,eo(this,t=ro(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},br.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},br.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var io=class{constructor(t,e){this.g=t,this.map=e}};function so(t){this.l=t||oo,t=Tr.PerformanceNavigationTiming?0<(t=Tr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Tr.g&&Tr.g.Ka&&Tr.g.Ka()&&Tr.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var oo=10;function ao(t){return!!t.h||!!t.g&&t.g.size>=t.j}function co(t){return t.h?1:t.g?t.g.size:0}function lo(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function uo(t,e){t.g?t.g.add(e):t.h=e}function ho(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function fo(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Mr(t.i)}so.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var po=class{stringify(t){return Tr.JSON.stringify(t,void 0)}parse(t){return Tr.JSON.parse(t,void 0)}};function mo(){this.g=new po}function go(t,e,n){const r=n||"";try{Ps(t,(function(t,n){let i=t;Sr(t)&&(i=Di(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function yo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function vo(t){this.l=t.ec||null,this.j=t.ob||!1}function wo(t,e){xi.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=bo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Or(vo,hs),vo.prototype.g=function(){return new wo(this.l,this.j)},vo.prototype.i=function(t){return function(){return t}}({}),Or(wo,xi);var bo=0;function _o(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Eo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Io(t)}function Io(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(br=wo.prototype).open=function(t,e){if(this.readyState!=bo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Io(this)},br.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Tr).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},br.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Eo(this)),this.readyState=bo},br.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Tr.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_o(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},br.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Eo(this):Io(this),3==this.readyState&&_o(this)}},br.Za=function(t){this.g&&(this.response=this.responseText=t,Eo(this))},br.Ya=function(t){this.g&&(this.response=t,Eo(this))},br.ka=function(){this.g&&Eo(this)},br.setRequestHeader=function(t,e){this.v.append(t,e)},br.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},br.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var To=Tr.JSON.parse;function Co(t){xi.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=So,this.L=this.M=!1}Or(Co,xi);var So="",ko=/^https?$/i,Ao=["POST","PUT"];function xo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ro(t),Do(t)}function Ro(t){t.F||(t.F=!0,Ri(t,"complete"),Ri(t,"error"))}function No(t){if(t.h&&void 0!==Ir&&(!t.C[1]||4!=Lo(t)||2!=t.da()))if(t.v&&4==Lo(t))Hi(t.La,0,t);else if(Ri(t,"readystatechange"),4==Lo(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(Ms)[1]||null;!i&&Tr.self&&Tr.self.location&&(i=Tr.self.location.protocol.slice(0,-1)),r=!ko.test(i?i.toLowerCase():"")}n=r}if(n)Ri(t,"complete"),Ri(t,"success");else{t.m=6;try{var s=2<Lo(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Ro(t)}}finally{Do(t)}}}function Do(t,e){if(t.g){Oo(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ri(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Oo(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Tr.clearTimeout(t.A),t.A=null)}function Lo(t){return t.g?t.g.readyState:0}function Po(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case So:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Mo(t){let e="";return ui(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Uo(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Mo(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):qs(t,e,n))}function Fo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Vo(t){this.Ga=0,this.j=[],this.l=new Yi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fo("baseRetryDelayMs",5e3,t),this.hb=Fo("retryDelaySeedMs",1e4,t),this.eb=Fo("forwardChannelMaxRetries",2,t),this.xa=Fo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new so(t&&t.concurrentRequestLimit),this.Ja=new mo,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jo(t){if(qo(t),3==t.H){var e=t.W++,n=Fs(t.I);if(qs(n,"SID",t.K),qs(n,"RID",e),qs(n,"TYPE","terminate"),Ho(t,n),(e=new ws(t,t.l,e)).L=2,e.A=zs(Fs(n)),n=!1,Tr.navigator&&Tr.navigator.sendBeacon)try{n=Tr.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Tr.Image&&((new Image).src=e.A,n=!0),n||(e.g=ra(e.l,null),e.g.ha(e.A)),e.G=Date.now(),xs(e)}ea(t)}function Bo(t){t.g&&(Qo(t),t.g.cancel(),t.g=null)}function qo(t){Bo(t),t.u&&(Tr.clearTimeout(t.u),t.u=null),Jo(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Tr.clearTimeout(t.m),t.m=null)}function zo(t){if(!ao(t.i)&&!t.m){t.m=!0;var e=t.Na;Fi||Bi(),Vi||(Fi(),Vi=!0),ji.add(e,t),t.C=0}}function $o(t,e){var n;n=e?e.m:t.W++;const r=Fs(t.I);qs(r,"SID",t.K),qs(r,"RID",n),qs(r,"AID",t.V),Ho(t,r),t.o&&t.s&&Uo(r,t.o,t.s),n=new ws(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ko(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),uo(t.i,n),Ts(n,r,e)}function Ho(t,e){t.na&&ui(t.na,(function(t,n){qs(e,n,t)})),t.h&&Ps({},(function(t,n){qs(e,n,t)}))}function Ko(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Nr(t.h.Va,t.h,t):null;t:{var i=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{go(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,r}function Go(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fi||Bi(),Vi||(Fi(),Vi=!0),ji.add(e,t),t.A=0}}function Wo(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=cs(Nr(t.Ma,t),Zo(t,t.A)),t.A++,0))}function Qo(t){null!=t.B&&(Tr.clearTimeout(t.B),t.B=null)}function Xo(t){t.g=new ws(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Fs(t.wa);qs(e,"RID","rpc"),qs(e,"SID",t.K),qs(e,"AID",t.V),qs(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&qs(e,"TO",t.qa),qs(e,"TYPE","xmlhttp"),Ho(t,e),t.o&&t.s&&Uo(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=zs(Fs(e)),n.u=null,n.S=!0,Cs(n,t)}function Jo(t){null!=t.v&&(Tr.clearTimeout(t.v),t.v=null)}function Yo(t,e){var n=null;if(t.g==e){Jo(t),Qo(t),t.g=null;var r=2}else{if(!lo(t.i,e))return;n=e.F,ho(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Ri(r=ns(),new as(r,n)),zo(t)}else Go(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function(t,e){return!(co(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=cs(Nr(t.Na,t,e),Zo(t,t.C)),t.C++,0)))}(t,e)||2==r&&Wo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ta(t,5);break;case 4:ta(t,10);break;case 3:ta(t,6);break;default:ta(t,2)}}function Zo(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ta(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Nr(t.pb,t);n||(n=new Us("//www.google.com/images/cleardot.gif"),Tr.location&&"http"==Tr.location.protocol||Vs(n,"https"),zs(n)),function(t,e){const n=new Yi;if(Tr.Image){const r=new Image;r.onload=Dr(yo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dr(yo,n,r,"TestLoadImage: error",!1,e),r.onabort=Dr(yo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dr(yo,n,r,"TestLoadImage: timeout",!1,e),Tr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else os(2);t.H=0,t.h&&t.h.za(e),ea(t),qo(t)}function ea(t){if(t.H=0,t.ma=[],t.h){const e=fo(t.i);0==e.length&&0==t.j.length||(Ur(t.ma,e),Ur(t.ma,t.j),t.i.i.length=0,Mr(t.j),t.j.length=0),t.h.ya()}}function na(t,e,n){var r=n instanceof Us?Fs(n):new Us(n);if(""!=r.g)e&&(r.g=e+"."+r.g),js(r,r.m);else{var i=Tr.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Us(null);r&&Vs(s,r),e&&(s.g=e),i&&js(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&qs(r,n,e),qs(r,"VER",t.ra),Ho(t,r),r}function ra(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new Co(new vo({ob:n})):new Co(t.va)).Oa(t.J),e}function ia(){}function sa(){if(Wr&&!(10<=Number(ri)))throw Error("Environmental error: no available transport.")}function oa(t,e){xi.call(this),this.g=new Vo(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!jr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jr(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new la(this)}function aa(t){gs.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ca(){ys.call(this),this.status=1}function la(t){this.g=t}function ua(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ha(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function da(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(br=Co.prototype).Oa=function(t){this.M=t},br.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ps.g(),this.C=this.u?ds(this.u):ds(ps),this.g.onreadystatechange=Nr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void xo(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=Tr.FormData&&t instanceof Tr.FormData,!(0<=Pr(Ao,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Oo(this),0<this.B&&((this.L=function(t){return Wr&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.ua,this)):this.A=Hi(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){xo(this,t)}},br.ua=function(){void 0!==Ir&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ri(this,"timeout"),this.abort(8))},br.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ri(this,"complete"),Ri(this,"abort"),Do(this))},br.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Do(this,!0)),Co.$.N.call(this)},br.La=function(){this.s||(this.G||this.v||this.l?No(this):this.kb())},br.kb=function(){No(this)},br.isActive=function(){return!!this.g},br.da=function(){try{return 2<Lo(this)?this.g.status:-1}catch(t){return-1}},br.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},br.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),To(e)}},br.Ia=function(){return this.m},br.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(br=Vo.prototype).ra=8,br.H=1,br.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new ws(this,this.l,t);let s=this.s;if(this.U&&(s?(s=hi(s),fi(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ko(this,i,e),qs(n=Fs(this.I),"RID",t),qs(n,"CVER",22),this.F&&qs(n,"X-HTTP-Session-Id",this.F),Ho(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Mo(s)))+"&"+e:this.o&&Uo(n,this.o,s)),uo(this.i,i),this.bb&&qs(n,"TYPE","init"),this.P?(qs(n,"$req",e),qs(n,"SID","null"),i.aa=!0,Ts(i,n,null)):Ts(i,n,e),this.H=2}}else 3==this.H&&(t?$o(this,t):0==this.j.length||ao(this.i)||$o(this))},br.Ma=function(){if(this.u=null,Xo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=cs(Nr(this.jb,this),t)}},br.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,os(10),Bo(this),Xo(this))},br.ib=function(){null!=this.v&&(this.v=null,Bo(this),Wo(this),os(19))},br.pb=function(t){t?(this.l.info("Successfully pinged google.com"),os(2)):(this.l.info("Failed to ping google.com"),os(1))},br.isActive=function(){return!!this.h&&this.h.isActive(this)},(br=ia.prototype).Ba=function(){},br.Aa=function(){},br.za=function(){},br.ya=function(){},br.isActive=function(){return!0},br.Va=function(){},sa.prototype.g=function(t,e){return new oa(t,e)},Or(oa,xi),oa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;os(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=na(t,null,t.Y),zo(t)},oa.prototype.close=function(){jo(this.g)},oa.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Di(t),t=n);e.j.push(new io(e.fb++,t)),3==e.H&&zo(e)},oa.prototype.N=function(){this.g.h=null,delete this.j,jo(this.g),delete this.g,oa.$.N.call(this)},Or(aa,gs),Or(ca,ys),Or(la,ia),la.prototype.Ba=function(){Ri(this.g,"a")},la.prototype.Aa=function(t){Ri(this.g,new aa(t))},la.prototype.za=function(t){Ri(this.g,new ca)},la.prototype.ya=function(){Ri(this.g,"b")},Or(ua,(function(){this.blockSize=-1})),ua.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ua.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)ha(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ha(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ha(this,r),i=0;break}}this.h=i,this.i+=e},ua.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var fa={};function pa(t){return-128<=t&&128>t?function(t,e){var n=fa;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new da([0|t],0>t?-1:0)}(t)}(t):new da([0|t],0>t?-1:0)}function ma(t){if(isNaN(t)||!isFinite(t))return ya;if(0>t)return Ea(ma(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ga;return new da(e,0)}var ga=4294967296,ya=pa(0),va=pa(1),wa=pa(16777216);function ba(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function _a(t){return-1==t.h}function Ea(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new da(n,~t.h).add(va)}function Ia(t,e){return t.add(Ea(e))}function Ta(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ca(t,e){this.g=t,this.h=e}function Sa(t,e){if(ba(e))throw Error("division by zero");if(ba(t))return new Ca(ya,ya);if(_a(t))return e=Sa(Ea(t),e),new Ca(Ea(e.g),Ea(e.h));if(_a(e))return e=Sa(t,Ea(e)),new Ca(Ea(e.g),e.h);if(30<t.g.length){if(_a(t)||_a(e))throw Error("slowDivide_ only works with positive integers.");for(var n=va,r=e;0>=r.X(t);)n=ka(n),r=ka(r);var i=Aa(n,1),s=Aa(r,1);for(r=Aa(r,2),n=Aa(n,2);!ba(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Aa(r,1),n=Aa(n,1)}return e=Ia(t,i.R(e)),new Ca(i,e)}for(i=ya;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ma(n)).R(e);_a(o)||0<o.X(t);)o=(s=ma(n-=r)).R(e);ba(s)&&(s=va),i=i.add(s),t=Ia(t,o)}return new Ca(i,t)}function ka(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new da(n,t.h)}function Aa(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new da(i,t.h)}(br=da.prototype).ea=function(){if(_a(this))return-Ea(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ga+r)*e,e*=ga}return t},br.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(ba(this))return"0";if(_a(this))return"-"+Ea(this).toString(t);for(var e=ma(Math.pow(t,6)),n=this,r="";;){var i=Sa(n,e).g,s=((0<(n=Ia(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(ba(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},br.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},br.X=function(t){return _a(t=Ia(this,t))?-1:ba(t)?0:1},br.abs=function(){return _a(this)?Ea(this):this},br.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new da(n,-2147483648&n[n.length-1]?-1:0)},br.R=function(t){if(ba(this)||ba(t))return ya;if(_a(this))return _a(t)?Ea(this).R(Ea(t)):Ea(Ea(this).R(t));if(_a(t))return Ea(this.R(Ea(t)));if(0>this.X(wa)&&0>t.X(wa))return ma(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,c=65535&t.D(i);n[2*r+2*i]+=o*c,Ta(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Ta(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ta(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ta(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new da(n,0)},br.gb=function(t){return Sa(this,t).h},br.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new da(n,this.h&t.h)},br.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new da(n,this.h|t.h)},br.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new da(n,this.h^t.h)},sa.prototype.createWebChannel=sa.prototype.g,oa.prototype.send=oa.prototype.u,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,us.COMPLETE="complete",fs.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",xi.prototype.listen=xi.prototype.O,Co.prototype.listenOnce=Co.prototype.P,Co.prototype.getLastError=Co.prototype.Sa,Co.prototype.getLastErrorCode=Co.prototype.Ia,Co.prototype.getStatus=Co.prototype.da,Co.prototype.getResponseJson=Co.prototype.Wa,Co.prototype.getResponseText=Co.prototype.ja,Co.prototype.send=Co.prototype.ha,Co.prototype.setWithCredentials=Co.prototype.Oa,ua.prototype.digest=ua.prototype.l,ua.prototype.reset=ua.prototype.reset,ua.prototype.update=ua.prototype.j,da.prototype.add=da.prototype.add,da.prototype.multiply=da.prototype.R,da.prototype.modulo=da.prototype.gb,da.prototype.compare=da.prototype.X,da.prototype.toNumber=da.prototype.ea,da.prototype.toString=da.prototype.toString,da.prototype.getBits=da.prototype.D,da.fromNumber=ma,da.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return Ea(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ma(Math.pow(n,8)),i=ya,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=ma(Math.pow(n,o)),i=i.R(o).add(ma(a))):i=(i=i.R(r)).add(ma(a))}return i};var xa=Er.createWebChannelTransport=function(){return new sa},Ra=Er.getStatEventTarget=function(){return ns()},Na=Er.ErrorCode=ls,Da=Er.EventType=us,Oa=Er.Event=ts,La=Er.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pa=(Er.FetchXmlHttpFactory=vo,Er.WebChannel=fs),Ma=Er.XhrIo=Co,Ua=Er.Md5=ua,Fa=Er.Integer=da;const Va="@firebase/firestore";class ja{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ja.UNAUTHENTICATED=new ja(null),ja.GOOGLE_CREDENTIALS=new ja("google-credentials-uid"),ja.FIRST_PARTY=new ja("first-party-uid"),ja.MOCK_USER=new ja("mock-user");let Ba="10.7.2";const qa=new F("@firebase/firestore");function za(){return qa.logLevel}function $a(t,...e){if(qa.logLevel<=O.DEBUG){const n=e.map(Ga);qa.debug(`Firestore (${Ba}): ${t}`,...n)}}function Ha(t,...e){if(qa.logLevel<=O.ERROR){const n=e.map(Ga);qa.error(`Firestore (${Ba}): ${t}`,...n)}}function Ka(t,...e){if(qa.logLevel<=O.WARN){const n=e.map(Ga);qa.warn(`Firestore (${Ba}): ${t}`,...n)}}function Ga(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Wa(t="Unexpected state"){const e=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+t;throw Ha(e),new Error(e)}function Qa(t,e){t||Wa()}function Xa(t,e){return t}const Ja={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ya extends y{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Za{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class tc{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ec{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ja.UNAUTHENTICATED)))}shutdown(){}}class nc{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class rc{constructor(t){this.t=t,this.currentUser=ja.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Za;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Za,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{$a("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):($a("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Za)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?($a("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Qa("string"==typeof e.accessToken),new tc(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Qa(null===t||"string"==typeof t),new ja(t)}}class ic{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ja.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sc{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new ic(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(ja.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ac{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&$a("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,$a("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{$a("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):$a("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Qa("string"==typeof t.token),this.R=t.token,new oc(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cc(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class lc{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=cc(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function uc(t,e){return t<e?-1:t>e?1:0}function hc(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class dc{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return dc.fromMillis(Date.now())}static fromDate(t){return dc.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new dc(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?uc(this.nanoseconds,t.nanoseconds):uc(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fc{constructor(t){this.timestamp=t}static fromTimestamp(t){return new fc(t)}static min(){return new fc(new dc(0,0))}static max(){return new fc(new dc(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pc{constructor(t,e,n){void 0===e?e=0:e>t.length&&Wa(),void 0===n?n=t.length-e:n>t.length-e&&Wa(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===pc.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof pc?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class mc extends pc{construct(t,e,n){return new mc(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ya(Ja.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new mc(e)}static emptyPath(){return new mc([])}}const gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yc extends pc{construct(t,e,n){return new yc(t,e,n)}static isValidIdentifier(t){return gc.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yc.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yc(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ya(Ja.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Ya(Ja.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ya(Ja.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Ya(Ja.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new yc(e)}static emptyPath(){return new yc([])}}class vc{constructor(t){this.path=t}static fromPath(t){return new vc(mc.fromString(t))}static fromName(t){return new vc(mc.fromString(t).popFirst(5))}static empty(){return new vc(mc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===mc.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return mc.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vc(new mc(t.slice()))}}function wc(t){return new bc(t.readTime,t.key,-1)}class bc{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new bc(fc.min(),vc.empty(),-1)}static max(){return new bc(fc.max(),vc.empty(),-1)}}function _c(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=vc.comparator(t.documentKey,e.documentKey),0!==n?n:uc(t.largestBatchId,e.largestBatchId))}const Ec="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Tc(t){if(t.code!==Ja.FAILED_PRECONDITION||t.message!==Ec)throw t;$a("LocalStore","Unexpectedly lost primary lease")}class Cc{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Wa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Cc(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Cc?e:Cc.resolve(e)}catch(t){return Cc.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Cc.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Cc.reject(e)}static resolve(t){return new Cc(((e,n)=>{e(t)}))}static reject(t){return new Cc(((e,n)=>{n(t)}))}static waitFor(t){return new Cc(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=Cc.resolve(!1);for(const n of t)e=e.next((t=>t?Cc.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new Cc(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new Cc(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}class Sc{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Za,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new xc(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Lc(e.target.error);this.V.reject(new xc(t,n))}}static open(t,e,n,r){try{return new Sc(e,t.transaction(r,n))}catch(t){throw new xc(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||($a("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Nc(e)}}class kc{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===kc.S(m())&&Ha("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $a("SimpleDb","Removing database:",t),Dc(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!g())return!1;if(kc.C())return!0;const t=m(),e=kc.S(t),n=0<e&&e<10,r=kc.v(t),i=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||i)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||($a("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=t=>{const n=t.target.result;e(n)},r.onblocked=()=>{n(new xc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=e=>{const r=e.target.error;"VersionError"===r.name?n(new Ya(Ja.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ya(Ja.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new xc(t,r))},r.onupgradeneeded=t=>{$a("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,r.transaction,t.oldVersion,this.version).next((()=>{$a("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const i="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=Sc.open(this.db,t,i?"readonly":"readwrite",n),s=r(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Cc.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if($a("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ac{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Dc(this.k.delete())}}class xc extends Ya{constructor(t,e){super(Ja.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Rc(t){return"IndexedDbTransactionError"===t.name}class Nc{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?($a("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):($a("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dc(n)}add(t){return $a("SimpleDb","ADD",this.store.name,t,t),Dc(this.store.add(t))}get(t){return Dc(this.store.get(t)).next((e=>(void 0===e&&(e=null),$a("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return $a("SimpleDb","DELETE",this.store.name,t),Dc(this.store.delete(t))}count(){return $a("SimpleDb","COUNT",this.store.name),Dc(this.store.count())}W(t,e){const n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const t=r.getAll(n.range);return new Cc(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Cc(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){$a("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const r=this.cursor(n);return this.G(r,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.G(r,e)}Z(t){const e=this.cursor({});return new Cc(((n,r)=>{e.onerror=t=>{const e=Lc(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next((t=>{t?r.continue():n()})):n()}}))}G(t,e){const n=[];return new Cc(((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new Ac(i),o=e(i.primaryKey,i.value,s);if(o instanceof Cc){const t=o.catch((t=>(s.done(),Cc.reject(t))));n.push(t)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Cc.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Dc(t){return new Cc(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Lc(t.target.error);n(e)}}))}let Oc=!1;function Lc(t){const e=kc.S(m());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Ya("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oc||(Oc=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Pc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Mc(t){return null==t}function Uc(t){return 0===t&&1/t==-1/0}Pc._e=-1;function Fc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Bc{constructor(t,e){this.comparator=t,this.root=e||zc.EMPTY}insert(t,e){return new Bc(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,zc.BLACK,null,null))}remove(t){return new Bc(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zc.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qc(this.root,t,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qc(this.root,t,this.comparator,!0)}}class qc{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zc{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:zc.RED,this.left=null!=r?r:zc.EMPTY,this.right=null!=i?i:zc.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new zc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zc.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return zc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wa();if(this.right.isRed())throw Wa();const t=this.left.check();if(t!==this.right.check())throw Wa();return t+(this.isRed()?0:1)}}zc.EMPTY=null,zc.RED=!0,zc.BLACK=!1,zc.EMPTY=new class{constructor(){this.size=0}get key(){throw Wa()}get value(){throw Wa()}get color(){throw Wa()}get left(){throw Wa()}get right(){throw Wa()}copy(t,e,n,r,i){return this}insert(t,e,n){return new zc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $c{constructor(t){this.comparator=t,this.data=new Bc(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Hc(this.data.getIterator())}getIteratorFrom(t){return new Hc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof $c))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new $c(this.comparator);return e.data=t,e}}class Hc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kc{constructor(t){this.fields=t,t.sort(yc.comparator)}static empty(){return new Kc([])}unionWith(t){let e=new $c(yc.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Kc(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return hc(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Gc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wc{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Gc("Invalid base64 string: "+t):t}}(t);return new Wc(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Wc(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return uc(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Wc.EMPTY_BYTE_STRING=new Wc("");const Qc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xc(t){if(Qa(!!t),"string"==typeof t){let e=0;const n=Qc.exec(t);if(Qa(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jc(t.seconds),nanos:Jc(t.nanos)}}function Jc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Yc(t){return"string"==typeof t?Wc.fromBase64String(t):Wc.fromUint8Array(t)}function Zc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tl(t){const e=t.mapValue.fields.__previous_value__;return Zc(e)?tl(e):e}function el(t){const e=Xc(t.mapValue.fields.__local_write_time__.timestampValue);return new dc(e.seconds,e.nanos)}class nl{constructor(t,e,n,r,i,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class rl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof rl&&t.projectId===this.projectId&&t.database===this.database}}const il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zc(t)?4:wl(t)?9007199254740991:10:Wa()}function ol(t,e){if(t===e)return!0;const n=sl(t);if(n!==sl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return el(t).isEqual(el(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Xc(t.timestampValue),r=Xc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Yc(t.bytesValue).isEqual(Yc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jc(t.geoPointValue.latitude)===Jc(e.geoPointValue.latitude)&&Jc(t.geoPointValue.longitude)===Jc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jc(t.integerValue)===Jc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Jc(t.doubleValue),r=Jc(e.doubleValue);return n===r?Uc(n)===Uc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return hc(t.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Fc(n)!==Fc(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!ol(n[t],r[t])))return!1;return!0}(t,e);default:return Wa()}}function al(t,e){return void 0!==(t.values||[]).find((t=>ol(t,e)))}function cl(t,e){if(t===e)return 0;const n=sl(t),r=sl(e);if(n!==r)return uc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return uc(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Jc(t.integerValue||t.doubleValue),r=Jc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ll(t.timestampValue,e.timestampValue);case 4:return ll(el(t),el(e));case 5:return uc(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Yc(t),r=Yc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=uc(n[t],r[t]);if(0!==e)return e}return uc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=uc(Jc(t.latitude),Jc(e.latitude));return 0!==n?n:uc(Jc(t.longitude),Jc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=cl(n[t],r[t]);if(e)return e}return uc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===il.mapValue&&e===il.mapValue)return 0;if(t===il.mapValue)return 1;if(e===il.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=uc(r[t],s[t]);if(0!==e)return e;const o=cl(n[r[t]],i[s[t]]);if(0!==o)return o}return uc(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Wa()}}function ll(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return uc(t,e);const n=Xc(t),r=Xc(e),i=uc(n.seconds,r.seconds);return 0!==i?i:uc(n.nanos,r.nanos)}function ul(t){return hl(t)}function hl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Xc(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Yc(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return vc.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=hl(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${hl(t.fields[i])}`;return n+"}"}(t.mapValue):Wa()}function dl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fl(t){return!!t&&"integerValue"in t}function pl(t){return!!t&&"arrayValue"in t}function ml(t){return!!t&&"nullValue"in t}function gl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vc(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=vl(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wl(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class bl{constructor(t){this.value=t}static empty(){return new bl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!yl(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=vl(e)}setAll(t){let e=yc.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=vl(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());yl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ol(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];yl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Vc(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new bl(vl(this.value))}}function _l(t){const e=[];return Vc(t.fields,((t,n)=>{const r=new yc([t]);if(yl(n)){const t=_l(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new Kc(e)}class El{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new El(t,0,fc.min(),fc.min(),fc.min(),bl.empty(),0)}static newFoundDocument(t,e,n,r){return new El(t,1,e,fc.min(),n,r,0)}static newNoDocument(t,e){return new El(t,2,e,fc.min(),fc.min(),bl.empty(),0)}static newUnknownDocument(t,e){return new El(t,3,e,fc.min(),fc.min(),bl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(fc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fc.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof El&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new El(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Il{constructor(t,e){this.position=t,this.inclusive=e}}function Tl(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?vc.comparator(vc.fromName(o.referenceValue),n.key):cl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Cl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ol(t.position[n],e.position[n]))return!1;return!0}class Sl{constructor(t,e="asc"){this.field=t,this.dir=e}}function kl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Al{}class xl extends Al{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Ml(t,e,n):"array-contains"===e?new jl(t,n):"in"===e?new Bl(t,n):"not-in"===e?new ql(t,n):"array-contains-any"===e?new zl(t,n):new xl(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ul(t,n):new Fl(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(cl(e,this.value)):null!==e&&sl(this.value)===sl(e)&&this.matchesComparison(cl(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rl extends Al{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Rl(t,e)}matches(t){return Nl(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Nl(t){return"and"===t.op}function Dl(t){return function(t){for(const e of t.filters)if(e instanceof Rl)return!1;return!0}(t)&&Nl(t)}function Ol(t){if(t instanceof xl)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(Dl(t))return t.filters.map((t=>Ol(t))).join(",");{const e=t.filters.map((t=>Ol(t))).join(",");return`${t.op}(${e})`}}function Ll(t,e){return t instanceof xl?function(t,e){return e instanceof xl&&t.op===e.op&&t.field.isEqual(e.field)&&ol(t.value,e.value)}(t,e):t instanceof Rl?function(t,e){return e instanceof Rl&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&Ll(n,e.filters[r])),!0)}(t,e):void Wa()}function Pl(t){return t instanceof xl?function(t){return`${t.field.canonicalString()} ${t.op} ${ul(t.value)}`}(t):t instanceof Rl?function(t){return t.op.toString()+" {"+t.getFilters().map(Pl).join(" ,")+"}"}(t):"Filter"}class Ml extends xl{constructor(t,e,n){super(t,e,n),this.key=vc.fromName(n.referenceValue)}matches(t){const e=vc.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ul extends xl{constructor(t,e){super(t,"in",e),this.keys=Vl(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Fl extends xl{constructor(t,e){super(t,"not-in",e),this.keys=Vl(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Vl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>vc.fromName(t.referenceValue)))}class jl extends xl{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return pl(e)&&al(e.arrayValue,this.value)}}class Bl extends xl{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&al(this.value.arrayValue,e)}}class ql extends xl{constructor(t,e){super(t,"not-in",e)}matches(t){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!al(this.value.arrayValue,e)}}class zl extends xl{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!pl(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>al(this.value.arrayValue,t)))}}class $l{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Hl(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $l(t,e,n,r,i,s,o)}function Kl(t){const e=Xa(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Ol(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ul(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ul(t))).join(",")),e.ce=t}return e.ce}function Gl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ll(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cl(t.startAt,e.startAt)&&Cl(t.endAt,e.endAt)}function Wl(t){return vc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ql{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Xl(t){return new Ql(t)}function Jl(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Yl(t){return null!==t.collectionGroup}function Zl(t){const e=Xa(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new $c(yc.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.le.push(new Sl(r,n))})),t.has(yc.keyField().canonicalString())||e.le.push(new Sl(yc.keyField(),n))}return e.le}function tu(t){const e=Xa(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return Hl(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Sl(t.field,e)}));const n=t.endAt?new Il(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Il(t.startAt.position,t.startAt.inclusive):null;return Hl(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Zl(t))),e.he}function eu(t,e){const n=t.filters.concat([e]);return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nu(t,e,n){return new Ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ru(t,e){return Gl(tu(t),tu(e))&&t.limitType===e.limitType}function iu(t){return`${Kl(tu(t))}|lt:${t.limitType}`}function su(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Pl(t))).join(", ")}]`),Mc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ul(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ul(t))).join(",")),`Target(${e})`}(tu(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):vc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Zl(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=Tl(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Zl(t),e)||t.endAt&&!function(t,e,n){const r=Tl(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Zl(t),e))}(t,e)}function au(t){return(e,n)=>{let r=!1;for(const i of Zl(t)){const t=cu(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function cu(t,e,n){const r=t.field.isKeyField()?vc.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?cl(r,i):Wa()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wa()}}class lu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Vc(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return jc(this.inner)}size(){return this.innerSize}}const uu=new Bc(vc.comparator);function hu(){return uu}const du=new Bc(vc.comparator);function fu(...t){let e=du;for(const n of t)e=e.insert(n.key,n);return e}function pu(t){let e=du;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function mu(){return yu()}function gu(){return yu()}function yu(){return new lu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const vu=new Bc(vc.comparator),wu=new $c(vc.comparator);function bu(...t){let e=wu;for(const n of t)e=e.add(n);return e}const _u=new $c(uc);function Eu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function Iu(t){return{integerValue:""+t}}function Tu(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Iu(e):Eu(t,e)}class Cu{constructor(){this._=void 0}}function Su(t,e,n){return t instanceof xu?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Zc(e)&&(e=tl(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ru?Nu(t,e):t instanceof Du?Ou(t,e):function(t,e){const n=Au(t,e),r=Pu(n)+Pu(t.Ie);return fl(n)&&fl(t.Ie)?Iu(r):Eu(t.serializer,r)}(t,e)}function ku(t,e,n){return t instanceof Ru?Nu(t,e):t instanceof Du?Ou(t,e):n}function Au(t,e){return t instanceof Lu?function(t){return fl(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class xu extends Cu{}class Ru extends Cu{constructor(t){super(),this.elements=t}}function Nu(t,e){const n=Mu(e);for(const e of t.elements)n.some((t=>ol(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Du extends Cu{constructor(t){super(),this.elements=t}}function Ou(t,e){let n=Mu(e);for(const e of t.elements)n=n.filter((t=>!ol(t,e)));return{arrayValue:{values:n}}}class Lu extends Cu{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Pu(t){return Jc(t.integerValue||t.doubleValue)}function Mu(t){return pl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Uu{constructor(t,e){this.version=t,this.transformResults=e}}class Fu{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Fu}static exists(t){return new Fu(void 0,t)}static updateTime(t){return new Fu(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ju{}function Bu(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ju(t.key,Fu.none()):new Ku(t.key,t.data,Fu.none());{const n=t.data,r=bl.empty();let i=new $c(yc.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Gu(t.key,r,new Kc(i.toArray()),Fu.none())}}function qu(t,e,n){t instanceof Ku?function(t,e,n){const r=t.value.clone(),i=Qu(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Gu?function(t,e,n){if(!Vu(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Qu(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Wu(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function zu(t,e,n,r){return t instanceof Ku?function(t,e,n,r){if(!Vu(t.precondition,e))return n;const i=t.value.clone(),s=Xu(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gu?function(t,e,n,r){if(!Vu(t.precondition,e))return n;const i=Xu(t.fieldTransforms,r,e),s=e.data;return s.setAll(Wu(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Vu(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function $u(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=Au(r.transform,t||null);null!=i&&(null===n&&(n=bl.empty()),n.set(r.field,i))}return n||null}function Hu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&hc(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ru&&e instanceof Ru||t instanceof Du&&e instanceof Du?hc(t.elements,e.elements,ol):t instanceof Lu&&e instanceof Lu?ol(t.Ie,e.Ie):t instanceof xu&&e instanceof xu}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ku extends ju{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gu extends ju{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wu(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Qu(t,e,n){const r=new Map;Qa(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ku(o,a,n[i]))}return r}function Xu(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Su(t,s,e))}return r}class Ju extends ju{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yu extends ju{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zu{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&qu(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=zu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=zu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=gu();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=Bu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(fc.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),bu())}isEqual(t){return this.batchId===t.batchId&&hc(this.mutations,t.mutations,((t,e)=>Hu(t,e)))&&hc(this.baseMutations,t.baseMutations,((t,e)=>Hu(t,e)))}}class th{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Qa(t.mutations.length===n.length);let r=vu;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new th(t,e,n,r)}}class eh{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nh{constructor(t,e){this.count=t,this.unchangedNames=e}}var rh,ih;function sh(t){if(void 0===t)return Ha("GRPC error has no .code"),Ja.UNKNOWN;switch(t){case rh.OK:return Ja.OK;case rh.CANCELLED:return Ja.CANCELLED;case rh.UNKNOWN:return Ja.UNKNOWN;case rh.DEADLINE_EXCEEDED:return Ja.DEADLINE_EXCEEDED;case rh.RESOURCE_EXHAUSTED:return Ja.RESOURCE_EXHAUSTED;case rh.INTERNAL:return Ja.INTERNAL;case rh.UNAVAILABLE:return Ja.UNAVAILABLE;case rh.UNAUTHENTICATED:return Ja.UNAUTHENTICATED;case rh.INVALID_ARGUMENT:return Ja.INVALID_ARGUMENT;case rh.NOT_FOUND:return Ja.NOT_FOUND;case rh.ALREADY_EXISTS:return Ja.ALREADY_EXISTS;case rh.PERMISSION_DENIED:return Ja.PERMISSION_DENIED;case rh.FAILED_PRECONDITION:return Ja.FAILED_PRECONDITION;case rh.ABORTED:return Ja.ABORTED;case rh.OUT_OF_RANGE:return Ja.OUT_OF_RANGE;case rh.UNIMPLEMENTED:return Ja.UNIMPLEMENTED;case rh.DATA_LOSS:return Ja.DATA_LOSS;default:return Wa()}}(ih=rh||(rh={}))[ih.OK=0]="OK",ih[ih.CANCELLED=1]="CANCELLED",ih[ih.UNKNOWN=2]="UNKNOWN",ih[ih.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ih[ih.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ih[ih.NOT_FOUND=5]="NOT_FOUND",ih[ih.ALREADY_EXISTS=6]="ALREADY_EXISTS",ih[ih.PERMISSION_DENIED=7]="PERMISSION_DENIED",ih[ih.UNAUTHENTICATED=16]="UNAUTHENTICATED",ih[ih.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ih[ih.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ih[ih.ABORTED=10]="ABORTED",ih[ih.OUT_OF_RANGE=11]="OUT_OF_RANGE",ih[ih.UNIMPLEMENTED=12]="UNIMPLEMENTED",ih[ih.INTERNAL=13]="INTERNAL",ih[ih.UNAVAILABLE=14]="UNAVAILABLE",ih[ih.DATA_LOSS=15]="DATA_LOSS";const oh=new Fa([4294967295,4294967295],0);function ah(t){const e=(new TextEncoder).encode(t),n=new Ua;return n.update(e),new Uint8Array(n.digest())}function ch(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fa([n,r],0),new Fa([i,s],0)]}class lh{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new uh(`Invalid padding: ${e}`);if(n<0)throw new uh(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new uh(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new uh(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=Fa.fromNumber(this.Te)}de(t,e,n){let r=t.add(e.multiply(Fa.fromNumber(n)));return 1===r.compare(oh)&&(r=new Fa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=ah(t),[n,r]=ch(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,r,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new lh(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=ah(t),[n,r]=ch(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,r,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hh{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,dh.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new hh(fc.min(),r,new Bc(uc),hu(),bu())}}class dh{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new dh(n,e,bu(),bu(),bu())}}class fh{constructor(t,e,n,r){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=r}}class ph{constructor(t,e){this.targetId=t,this.fe=e}}class mh{constructor(t,e,n=Wc.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class gh{constructor(){this.ge=0,this.pe=wh(),this.ye=Wc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=bu(),e=bu(),n=bu();return this.pe.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wa()}})),new dh(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=wh()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Qa(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yh{constructor(t){this.Le=t,this.ke=new Map,this.qe=hu(),this.Qe=vh(),this.Ke=new Bc(uc)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:Wa()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,r=this.Ye(e);if(r){const i=r.target;if(Wl(i))if(0===n){const t=new vc(i.path);this.We(e,t,El.newNoDocument(t,fc.min()))}else Qa(1===n);else{const r=this.Ze(e);if(r!==n){const n=this.Xe(t),i=n?this.et(n,t,r):1;if(0!==i){this.He(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=Yc(n).toUint8Array()}catch(t){if(t instanceof Gc)return Ka("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new lh(s,r,i)}catch(t){return Ka(t instanceof uh?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),r++)})),r}it(t){const e=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Wl(i.target)){const e=new vc(i.target.path);null!==this.qe.get(e)||this.st(r,e)||this.We(r,e,El.newNoDocument(e,t))}n.De&&(e.set(r,n.ve()),n.Fe())}}));let n=bu();this.Qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const r=new hh(t,e,this.Ke,this.qe,n);return this.qe=hu(),this.Qe=vh(),this.Ke=new Bc(uc),r}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const r=this.ze(t);this.st(t,e)?r.Me(e,1):r.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new gh,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new $c(uc),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||$a("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new gh),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function vh(){return new Bc(vc.comparator)}function wh(){return new Bc(vc.comparator)}const bh={asc:"ASCENDING",desc:"DESCENDING"},_h={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eh={and:"AND",or:"OR"};class Ih{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Th(t,e){return t.useProto3Json||Mc(e)?e:{value:e}}function Ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sh(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kh(t,e){return Ch(t,e.toTimestamp())}function Ah(t){return Qa(!!t),fc.fromTimestamp(function(t){const e=Xc(t);return new dc(e.seconds,e.nanos)}(t))}function xh(t,e){return Rh(t,e).canonicalString()}function Rh(t,e){const n=function(t){return new mc(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Nh(t){const e=mc.fromString(t);return Qa(Qh(e)),e}function Dh(t,e){return xh(t.databaseId,e.path)}function Oh(t,e){const n=Nh(e);if(n.get(1)!==t.databaseId.projectId)throw new Ya(Ja.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ya(Ja.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vc(Mh(n))}function Lh(t,e){return xh(t.databaseId,e)}function Ph(t){return new mc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mh(t){return Qa(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Uh(t,e,n){return{name:Dh(t,e),fields:n.value.mapValue.fields}}function Fh(t,e){return{documents:[Lh(t,e.path)]}}function Vh(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lh(t,i);const s=function(t){if(0!==t.length)return Gh(Rl.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Hh(t.field),direction:qh(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Th(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:i}}function jh(t){let e=function(t){const e=Nh(t);return 4===e.length?mc.emptyPath():Mh(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qa(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Bh(t);return e instanceof Rl&&Dl(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Sl(Kh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Mc(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Il(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Il(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new Ql(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,l)}function Bh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Kh(t.unaryFilter.field);return xl.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Kh(t.unaryFilter.field);return xl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kh(t.unaryFilter.field);return xl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kh(t.unaryFilter.field);return xl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wa()}}(t):void 0!==t.fieldFilter?function(t){return xl.create(Kh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wa()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Rl.create(t.compositeFilter.filters.map((t=>Bh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Wa()}}(t.compositeFilter.op))}(t):Wa()}function qh(t){return bh[t]}function zh(t){return _h[t]}function $h(t){return Eh[t]}function Hh(t){return{fieldPath:t.canonicalString()}}function Kh(t){return yc.fromServerFormat(t.fieldPath)}function Gh(t){return t instanceof xl?function(t){if("=="===t.op){if(gl(t.value))return{unaryFilter:{field:Hh(t.field),op:"IS_NAN"}};if(ml(t.value))return{unaryFilter:{field:Hh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gl(t.value))return{unaryFilter:{field:Hh(t.field),op:"IS_NOT_NAN"}};if(ml(t.value))return{unaryFilter:{field:Hh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hh(t.field),op:zh(t.op),value:t.value}}}(t):t instanceof Rl?function(t){const e=t.getFilters().map((t=>Gh(t)));return 1===e.length?e[0]:{compositeFilter:{op:$h(t.op),filters:e}}}(t):Wa()}function Wh(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Qh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Xh{constructor(t,e,n,r,i=fc.min(),s=fc.min(),o=Wc.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Xh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Jh{constructor(t){this.ct=t}}function Yh(t){const e=jh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?nu(e,e.limit,"L"):e}class Zh{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Jc(t.integerValue));else if("doubleValue"in t){const n=Jc(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Uc(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Yc(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?wl(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Wa()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),vc.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}Zh.bt=new Zh;class td{constructor(){this._n=new ed}addToCollectionParentIndex(t,e){return this._n.add(e),Cc.resolve()}getCollectionParents(t,e){return Cc.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Cc.resolve()}deleteFieldIndex(t,e){return Cc.resolve()}deleteAllFieldIndexes(t){return Cc.resolve()}createTargetIndexes(t,e){return Cc.resolve()}getDocumentsMatchingTarget(t,e){return Cc.resolve(null)}getIndexType(t,e){return Cc.resolve(0)}getFieldIndexes(t,e){return Cc.resolve([])}getNextCollectionGroupToUpdate(t){return Cc.resolve(null)}getMinOffset(t,e){return Cc.resolve(bc.min())}getMinOffsetFromCollectionGroup(t,e){return Cc.resolve(bc.min())}updateCollectionGroup(t,e,n){return Cc.resolve()}updateIndexEntries(t,e){return Cc.resolve()}}class ed{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new $c(mc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new $c(mc.comparator)).toArray()}}new Uint8Array(0);class nd{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new nd(t,nd.DEFAULT_COLLECTION_PERCENTILE,nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}nd.DEFAULT_COLLECTION_PERCENTILE=10,nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nd.DEFAULT=new nd(41943040,nd.DEFAULT_COLLECTION_PERCENTILE,nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nd.DISABLED=new nd(-1,0,0);class rd{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new rd(0)}static Bn(){return new rd(-1)}}class id{constructor(){this.changes=new lu((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,El.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Cc.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class sd{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class od{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&zu(n.mutation,t,Kc.empty(),dc.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,bu()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=bu()){const r=mu();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=fu();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=mu();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,bu())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=hu();const s=yu(),o=yu();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Gu)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),zu(o.mutation,e,o.mutation.getFieldMask(),dc.now())):s.set(e.key,Kc.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new sd(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=yu();let r=new Bc(((t,e)=>t-e)),i=bu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Kc.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||bu()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=gu();c.forEach((t=>{if(!i.has(t)){const r=Bu(e.get(t),n.get(t));null!==r&&l.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Cc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return vc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Yl(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):Cc.resolve(mu());let o=-1,a=i;return s.next((e=>Cc.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?Cc.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,bu()))).next((t=>({batchId:o,changes:pu(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new vc(e)).next((t=>{let e=fu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=fu();return this.indexManager.getCollectionParents(t,i).next((o=>Cc.forEach(o,(o=>{const a=function(t,e){return new Ql(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,El.newInvalidDocument(r)))}));let n=fu();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&zu(s.mutation,r,Kc.empty(),dc.now()),ou(e,r)&&(n=n.insert(t,r))})),n}))}}class ad{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Cc.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Ah(t.createTime)}}(e)),Cc.resolve()}getNamedQuery(t,e){return Cc.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:Yh(t.bundledQuery),readTime:Ah(t.readTime)}}(e)),Cc.resolve()}}class cd{constructor(){this.overlays=new Bc(vc.comparator),this.hr=new Map}getOverlay(t,e){return Cc.resolve(this.overlays.get(e))}getOverlays(t,e){const n=mu();return Cc.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ht(t,e,r)})),Cc.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Cc.resolve()}getOverlaysForCollection(t,e,n){const r=mu(),i=e.length+1,s=new vc(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return Cc.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new Bc(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=mu(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=mu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return Cc.resolve(o)}ht(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new eh(e,n));let i=this.hr.get(e);void 0===i&&(i=bu(),this.hr.set(e,i)),this.hr.set(e,i.add(n.key))}}class ld{constructor(){this.Pr=new $c(ud.Ir),this.Tr=new $c(ud.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new ud(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new ud(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new vc(new mc([])),n=new ud(e,t),r=new ud(e,t+1),i=[];return this.Tr.forEachInRange([n,r],(t=>{this.Ar(t),i.push(t.key)})),i}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new vc(new mc([])),n=new ud(e,t),r=new ud(e,t+1);let i=bu();return this.Tr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new ud(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class ud{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return vc.comparator(t.key,e.key)||uc(t.pr,e.pr)}static Er(t,e){return uc(t.pr,e.pr)||vc.comparator(t.key,e.key)}}class hd{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new $c(ud.Ir)}checkEmpty(t){return Cc.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Zu(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.wr=this.wr.add(new ud(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Cc.resolve(s)}lookupMutationBatch(t,e){return Cc.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),i=r<0?0:r;return Cc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Cc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Cc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new ud(e,0),r=new ud(e,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(t=>{const e=this.Sr(t.pr);i.push(e)})),Cc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new $c(uc);return e.forEach((t=>{const e=new ud(t,0),r=new ud(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,r],(t=>{n=n.add(t.pr)}))})),Cc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;vc.isDocumentKey(i)||(i=i.child(""));const s=new ud(new vc(i),0);let o=new $c(uc);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.pr)),!0)}),s),Cc.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Qa(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Cc.forEach(e.mutations,(r=>{const i=new ud(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new ud(e,0),r=this.wr.firstAfterOrEqual(n);return Cc.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Cc.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class dd{constructor(t){this.vr=t,this.docs=new Bc(vc.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Cc.resolve(n?n.document.mutableCopy():El.newInvalidDocument(e))}getEntries(t,e){let n=hu();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():El.newInvalidDocument(t))})),Cc.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=hu();const s=e.path,o=new vc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||_c(wc(o),n)<=0||(r.has(o.key)||ou(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Cc.resolve(i)}getAllFromCollectionGroup(t,e,n,r){Wa()}Fr(t,e){return Cc.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new fd(this)}getSize(t){return Cc.resolve(this.size)}}class fd extends id{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)})),Cc.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class pd{constructor(t){this.persistence=t,this.Mr=new lu((t=>Kl(t)),Gl),this.lastRemoteSnapshotVersion=fc.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ld,this.targetCount=0,this.Br=rd.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Cc.resolve()}getLastRemoteSnapshotVersion(t){return Cc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Cc.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Cc.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Cc.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new rd(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Cc.resolve()}updateTargetData(t,e){return this.qn(e),Cc.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Cc.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),Cc.waitFor(i).next((()=>r))}getTargetCount(t){return Cc.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Cc.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Cc.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),Cc.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Cc.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Cc.resolve(n)}containsKey(t,e){return Cc.resolve(this.Nr.containsKey(e))}}class md{constructor(t,e){this.Lr={},this.overlays={},this.kr=new Pc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new pd(this),this.indexManager=new td,this.remoteDocumentCache=function(t){return new dd(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Jh(e),this.$r=new ad(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new cd,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new hd(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){$a("MemoryPersistence","Starting transaction:",t);const r=new gd(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((t=>this.referenceDelegate.Wr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Gr(t,e){return Cc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class gd extends Ic{constructor(t){super(),this.currentSequenceNumber=t}}class yd{constructor(t){this.persistence=t,this.zr=new ld,this.jr=null}static Hr(t){return new yd(t)}get Jr(){if(this.jr)return this.jr;throw Wa()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Cc.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Cc.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Cc.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cc.forEach(this.Jr,(n=>{const r=vc.fromPath(n);return this.Yr(t,r).next((t=>{t||e.removeEntry(r,fc.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Cc.or([()=>Cc.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class vd{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=bu(),r=bu();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new vd(t,e.fromCache,n,r)}}class wd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class bd{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){var t;const e=null===(t=c())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()||!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome")?kc.v(m())>0?6:4:8}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.ji(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Hi(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new wd;return this.Ji(t,e,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(t,e,n,r.size)}))})).next((()=>i.result))}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(za()<=O.DEBUG&&$a("QueryEngine","SDK will not create cache indexes for query:",su(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Cc.resolve()):(za()<=O.DEBUG&&$a("QueryEngine","Query:",su(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(za()<=O.DEBUG&&$a("QueryEngine","The SDK decides to create cache indexes for query:",su(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,tu(e))):Cc.resolve())}ji(t,e){if(Jl(e))return Cc.resolve(null);let n=tu(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=nu(e,null,"F"),n=tu(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=bu(...r);return this.zi.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,r);return this.Xi(e,s,i,n.readTime)?this.ji(t,nu(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,r){return Jl(e)||r.isEqual(fc.min())?Cc.resolve(null):this.zi.getDocuments(t,n).next((i=>{const s=this.Zi(e,i);return this.Xi(e,s,n,r)?Cc.resolve(null):(za()<=O.DEBUG&&$a("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),su(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fc.fromTimestamp(1e9===r?new dc(n+1,0):new dc(n,r));return new bc(i,vc.empty(),e)}(r,-1)).next((t=>t)))}))}Zi(t,e){let n=new $c(au(t));return e.forEach(((e,r)=>{ou(t,r)&&(n=n.add(r))})),n}Xi(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(t,e,n){return za()<=O.DEBUG&&$a("QueryEngine","Using full collection scan to execute query:",su(e)),this.zi.getDocumentsMatchingQuery(t,e,bc.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class _d{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Bc(uc),this.rs=new lu((t=>Kl(t)),Gl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new od(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function Ed(t,e){const n=Xa(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=bu();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Id(t){const e=Xa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function Td(t,e){const n=Xa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Cd(t,e,n){const r=Xa(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Rc(t))throw t;$a("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Sd(t,e,n){const r=Xa(t);let i=fc.min(),s=bu();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=Xa(t),i=r.rs.get(n);return void 0!==i?Cc.resolve(r.ns.get(i)):r.Qr.getTargetData(e,n)}(r,t,tu(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.ts.getDocumentsMatchingQuery(t,e,n?i:fc.min(),n?s:bu()))).next((t=>(function(t,e,n){let r=t.ss.get(e)||fc.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.ss.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,hs:s})))))}class kd{constructor(){this.activeTargetIds=_u}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ad{constructor(){this.no=new kd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new kd,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class xd{io(t){}shutdown(){}}class Rd{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$a("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){$a("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nd=null;function Dd(){return null===Nd?Nd=268435456+Math.round(2147483648*Math.random()):Nd++,"0x"+Nd.toString(16)}const Od={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ld{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const Pd="WebChannelConnection";class Md extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${r}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get wo(){return!1}So(t,e,n,r,i){const s=Dd(),o=this.bo(t,e.toUriEncodedString());$a("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(t,o,a,n).then((e=>($a("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Ka("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,r,i,s){return this.So(t,e,n,r,i)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ba,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Od[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,r){const i=Dd();return new Promise(((s,o)=>{const a=new Ma;a.setWithCredentials(!0),a.listenOnce(Da.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Na.NO_ERROR:const e=a.getResponseJson();$a(Pd,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case Na.TIMEOUT:$a(Pd,`RPC '${t}' ${i} timed out`),o(new Ya(Ja.DEADLINE_EXCEEDED,"Request time out"));break;case Na.HTTP_ERROR:const n=a.getStatus();if($a(Pd,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ja).indexOf(e)>=0?e:Ja.UNKNOWN}(e.status);o(new Ya(t,e.message))}else o(new Ya(Ja.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ya(Ja.UNAVAILABLE,"Connection failed."));break;default:Wa()}}finally{$a(Pd,`RPC '${t}' ${i} completed.`)}}));const c=JSON.stringify(r);$a(Pd,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const r=Dd(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=xa(),o=Ra(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=i.join("");$a(Pd,`Creating RPC '${t}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Ld({lo:e=>{d?$a(Pd,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(h||($a(Pd,`Opening RPC '${t}' stream ${r} transport.`),u.open(),h=!0),$a(Pd,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},ho:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,Pa.EventType.OPEN,(()=>{d||$a(Pd,`RPC '${t}' stream ${r} transport opened.`)})),p(u,Pa.EventType.CLOSE,(()=>{d||(d=!0,$a(Pd,`RPC '${t}' stream ${r} transport closed`),f.Vo())})),p(u,Pa.EventType.ERROR,(e=>{d||(d=!0,Ka(Pd,`RPC '${t}' stream ${r} transport errored:`,e),f.Vo(new Ya(Ja.UNAVAILABLE,"The operation could not be completed")))})),p(u,Pa.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];Qa(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){$a(Pd,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=rh[t];if(void 0!==e)return sh(e)}(e),i=o.message;void 0===n&&(n=Ja.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.Vo(new Ya(n,i)),u.close()}else $a(Pd,`RPC '${t}' stream ${r} received:`,i),f.mo(i)}})),p(o,Oa.STAT_EVENT,(e=>{e.stat===La.PROXY?$a(Pd,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===La.NOPROXY&&$a(Pd,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function Ud(){return"undefined"!=typeof document?document:null}function Fd(t){return new Ih(t,!0)}class Vd{constructor(t,e,n=1e3,r=1.5,i=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,e-n);r>0&&$a("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class jd{constructor(t,e,n,r,i,s,o,a){this.oi=t,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Vd(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===Ja.RESOURCE_EXHAUSTED?(Ha(e.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===Ja.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new Ya(Ja.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return $a("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():($a("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bd extends jd{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wa()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(Qa(void 0===e||"string"==typeof e),Wc.fromBase64String(e||"")):(Qa(void 0===e||e instanceof Uint8Array),Wc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Ja.UNKNOWN:sh(t.code);return new Ya(e,t.message||"")}(o);n=new mh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oh(t,r.document.name),s=Ah(r.document.updateTime),o=r.document.createTime?Ah(r.document.createTime):fc.min(),a=new bl({mapValue:{fields:r.document.fields}}),c=El.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new fh(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Oh(t,r.document),s=r.readTime?Ah(r.readTime):fc.min(),o=El.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Oh(t,r.document),s=r.removedTargetIds||[];n=new fh([],s,i,null)}else{if(!("filter"in e))return Wa();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new nh(r,i),o=t.targetId;n=new ph(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return fc.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?fc.min():e.readTime?Ah(e.readTime):fc.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=Ph(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Wl(r)?{documents:Fh(t,r)}:{query:Vh(t,r).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Sh(t,e.resumeToken);const r=Th(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(fc.min())>0){n.readTime=Ch(t,e.snapshotVersion.toTimestamp());const r=Th(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wa()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=Ph(this.serializer),e.removeTarget=t,this.t_(e)}}class qd extends jd{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(Qa(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(Qa(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Ah(t.updateTime):Ah(e);return n.isEqual(fc.min())&&(n=Ah(e)),new Uu(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Ah(t.commitTime);return this.listener.T_(n,e)}return Qa(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Ph(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ku)n={update:Uh(t,e.key,e.value)};else if(e instanceof Ju)n={delete:Dh(t,e.key)};else if(e instanceof Gu)n={update:Uh(t,e.key,e.data),updateMask:Wh(e.fieldMask)};else{if(!(e instanceof Yu))return Wa();n={verify:Dh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof xu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ru)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Du)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lu)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw Wa()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:kh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wa()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class zd extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Ya(Ja.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.So(t,Rh(e,n),r,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ja.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ya(Ja.UNKNOWN,t.toString())}))}vo(t,e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Rh(e,n),r,s,o,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ja.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ya(Ja.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class $d{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ha(e),this.g_=!1):$a("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Hd{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((t=>{n.enqueueAndForget((async()=>{tf(this)&&($a("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Xa(t);e.v_.add(4),await Gd(e),e.x_.set("Unknown"),e.v_.delete(4),await Kd(e)}(this))}))})),this.x_=new $d(n,r)}}async function Kd(t){if(tf(t))for(const e of t.F_)await e(!0)}async function Gd(t){for(const e of t.F_)await e(!1)}function Wd(t,e){const n=Xa(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Zd(n)?Yd(n):vf(n).Jo()&&Xd(n,e))}function Qd(t,e){const n=Xa(t),r=vf(n);n.C_.delete(e),r.Jo()&&Jd(n,e),0===n.C_.size&&(r.Jo()?r.Xo():tf(n)&&n.x_.set("Unknown"))}function Xd(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fc.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vf(t).c_(e)}function Jd(t,e){t.O_.Oe(e),vf(t).l_(e)}function Yd(t){t.O_=new yh({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),vf(t).start(),t.x_.p_()}function Zd(t){return tf(t)&&!vf(t).Ho()&&t.C_.size>0}function tf(t){return 0===Xa(t).v_.size}function ef(t){t.O_=void 0}async function nf(t){t.C_.forEach(((e,n)=>{Xd(t,e)}))}async function rf(t,e){ef(t),Zd(t)?(t.x_.S_(e),Yd(t)):t.x_.set("Unknown")}async function sf(t,e,n){if(t.x_.set("Online"),e instanceof mh&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.C_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.C_.delete(r),t.O_.removeTarget(r))}(t,e)}catch(n){$a("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await of(t,n)}else if(e instanceof fh?t.O_.$e(e):e instanceof ph?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(fc.min()))try{const e=await Id(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.C_.get(r);i&&t.C_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.C_.get(e);if(!r)return;t.C_.set(e,r.withResumeToken(Wc.EMPTY_BYTE_STRING,r.snapshotVersion)),Jd(t,e);const i=new Xh(r.target,e,n,r.sequenceNumber);Xd(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){$a("RemoteStore","Failed to raise snapshot:",e),await of(t,e)}}async function of(t,e,n){if(!Rc(e))throw e;t.v_.add(1),await Gd(t),t.x_.set("Offline"),n||(n=()=>Id(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{$a("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Kd(t)}))}function af(t,e){return e().catch((n=>of(t,n,e)))}async function cf(t){const e=Xa(t),n=wf(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;lf(e);)try{const t=await Td(e.localStore,r);if(null===t){0===e.D_.length&&n.Xo();break}r=t.batchId,uf(e,t)}catch(t){await of(e,t)}hf(e)&&df(e)}function lf(t){return tf(t)&&t.D_.length<10}function uf(t,e){t.D_.push(e);const n=wf(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function hf(t){return tf(t)&&!wf(t).Ho()&&t.D_.length>0}function df(t){wf(t).start()}async function ff(t){wf(t).d_()}async function pf(t){const e=wf(t);for(const n of t.D_)e.I_(n.mutations)}async function mf(t,e,n){const r=t.D_.shift(),i=th.from(r,e,n);await af(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await cf(t)}async function gf(t,e){e&&wf(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return Wa();case Ja.CANCELLED:case Ja.UNKNOWN:case Ja.DEADLINE_EXCEEDED:case Ja.RESOURCE_EXHAUSTED:case Ja.INTERNAL:case Ja.UNAVAILABLE:case Ja.UNAUTHENTICATED:return!1;case Ja.INVALID_ARGUMENT:case Ja.NOT_FOUND:case Ja.ALREADY_EXISTS:case Ja.PERMISSION_DENIED:case Ja.FAILED_PRECONDITION:case Ja.ABORTED:case Ja.OUT_OF_RANGE:case Ja.UNIMPLEMENTED:case Ja.DATA_LOSS:return!0}}(t)&&t!==Ja.ABORTED}(e.code)){const n=t.D_.shift();wf(t).Zo(),await af(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await cf(t)}}(t,e),hf(t)&&df(t)}async function yf(t,e){const n=Xa(t);n.asyncQueue.verifyOperationInProgress(),$a("RemoteStore","RemoteStore received new credentials");const r=tf(n);n.v_.add(3),await Gd(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Kd(n)}function vf(t){return t.N_||(t.N_=function(t,e,n){const r=Xa(t);return r.R_(),new Bd(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Po:nf.bind(null,t),To:rf.bind(null,t),u_:sf.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),Zd(t)?Yd(t):t.x_.set("Unknown")):(await t.N_.stop(),ef(t))}))),t.N_}function wf(t){return t.B_||(t.B_=function(t,e,n){const r=Xa(t);return r.R_(),new qd(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Po:ff.bind(null,t),To:gf.bind(null,t),E_:pf.bind(null,t),T_:mf.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await cf(t)):(await t.B_.stop(),t.D_.length>0&&($a("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class bf{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new bf(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ya(Ja.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _f(t,e){if(Ha("AsyncQueue",`${e}: ${t}`),Rc(t))return new Ya(Ja.UNAVAILABLE,`${e}: ${t}`);throw t}class Ef{constructor(t){this.comparator=t?(e,n)=>t(e,n)||vc.comparator(e.key,n.key):(t,e)=>vc.comparator(t.key,e.key),this.keyedMap=fu(),this.sortedSet=new Bc(this.comparator)}static emptySet(t){return new Ef(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ef))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ef;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class If{constructor(){this.L_=new Bc(vc.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):Wa():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Tf{constructor(t,e,n,r,i,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Tf(t,e,Ef.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ru(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Cf{constructor(){this.q_=void 0,this.Q_=[]}}class Sf{constructor(){this.queries=new lu((t=>iu(t)),ru),this.onlineState="Unknown",this.K_=new Set}}async function kf(t,e){const n=Xa(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Cf),i)try{s.q_=await n.onListen(r)}catch(t){const n=_f(t,`Initialization of query '${su(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&Nf(n)}async function Af(t,e){const n=Xa(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function xf(t,e){const n=Xa(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.Q_)e.W_(t)&&(r=!0);i.q_=t}}r&&Nf(n)}function Rf(t,e,n){const r=Xa(t),i=r.queries.get(e);if(i)for(const t of i.Q_)t.onError(n);r.queries.delete(e)}function Nf(t){t.K_.forEach((t=>{t.next()}))}class Df{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Tf(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=Tf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}class Of{constructor(t){this.key=t}}class Lf{constructor(t){this.key=t}}class Pf{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=bu(),this.mutatedKeys=bu(),this.ua=au(t),this.ca=new Ef(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new If,r=e?e.ca:this.ca;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const l=r.get(t),u=ou(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wa()}};return n(t)-n(e)}(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),r=null!=r&&r;const o=e&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new Tf(this.query,t.ca,i,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new If,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=bu(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new Lf(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new Of(n))})),e}Ra(t){this.oa=t.hs,this.aa=bu();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Tf.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Mf{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Uf{constructor(t){this.key=t,this.ma=!1}}class Ff{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new lu((t=>iu(t)),ru),this.pa=new Map,this.ya=new Set,this.wa=new Bc(vc.comparator),this.Sa=new Map,this.ba=new ld,this.Da={},this.Ca=new Map,this.va=rd.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Vf(t,e){const n=function(t){const e=Xa(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ep.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zf.bind(null,e),e.fa.u_=xf.bind(null,e.eventManager),e.fa.xa=Rf.bind(null,e.eventManager),e}(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const t=await function(t,e){const n=Xa(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Qr.getTargetData(t,e).next((i=>i?(r=i,Cc.resolve(r)):n.Qr.allocateTargetId(t).next((i=>(r=new Xh(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.ns.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}(n.localStore,tu(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await async function(t,e,n,r,i){t.Ma=(e,n,r)=>async function(t,e,n,r){let i=e.view.ha(n);i.Xi&&(i=await Sd(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return Xf(t,e.targetId,a.da),a.snapshot}(t,e,n,r);const s=await Sd(t.localStore,e,!0),o=new Pf(e,s.hs),a=o.ha(s.documents),c=dh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,c);Xf(t,n,l.da);const u=new Mf(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}(n,e,r,"current"===s,t.resumeToken),n.isPrimaryClient&&Wd(n.remoteStore,t)}return i}async function jf(t,e){const n=Xa(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((t=>!ru(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Cd(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Qd(n.remoteStore,r.targetId),Wf(n,r.targetId)})).catch(Tc)):(Wf(n,r.targetId),await Cd(n.localStore,r.targetId,!0))}async function Bf(t,e){const n=Xa(t);try{const t=await function(t,e){const n=Xa(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Wc.EMPTY_BYTE_STRING,fc.min()).withLastLimboFreeSnapshotVersion(fc.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(t,l))}));let a=hu(),c=bu();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=bu(),i=bu();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=hu();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(fc.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):$a("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.cs,c=t.ls}))),!r.isEqual(fc.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return Cc.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ns=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Sa.get(e);r&&(Qa(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.ma=!0:t.modifiedDocuments.size>0?Qa(r.ma):t.removedDocuments.size>0&&(Qa(r.ma),r.ma=!1))})),await Zf(n,t,e)}catch(t){await Tc(t)}}function qf(t,e,n){const r=Xa(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=Xa(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(r=!0)})),r&&Nf(n)}(r.eventManager,e),t.length&&r.fa.u_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zf(t,e,n){const r=Xa(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let t=new Bc(vc.comparator);t=t.insert(s,El.newNoDocument(s,fc.min()));const n=bu().add(s),i=new hh(fc.min(),new Map,new Bc(uc),t,n);await Bf(r,i),r.wa=r.wa.remove(s),r.Sa.delete(e),Yf(r)}else await Cd(r.localStore,e,!1).then((()=>Wf(r,e,n))).catch(Tc)}async function $f(t,e){const n=Xa(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Xa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=Cc.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Qa(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=bu();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);Gf(n,r,null),Kf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zf(n,t)}catch(t){await Tc(t)}}async function Hf(t,e,n){const r=Xa(t);try{const t=await function(t,e){const n=Xa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Qa(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);Gf(r,e,n),Kf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zf(r,t)}catch(n){await Tc(n)}}function Kf(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function Gf(t,e,n){const r=Xa(t);let i=r.Da[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||Qf(t,e)}))}function Qf(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Qd(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Yf(t))}function Xf(t,e,n){for(const r of n)r instanceof Of?(t.ba.addReference(r.key,e),Jf(t,r)):r instanceof Lf?($a("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||Qf(t,r.key)):Wa()}function Jf(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||($a("SyncEngine","New document in limbo: "+n),t.ya.add(r),Yf(t))}function Yf(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new vc(mc.fromString(e)),r=t.va.next();t.Sa.set(r,new Uf(n)),t.wa=t.wa.insert(n,r),Wd(t.remoteStore,new Xh(tu(Xl(n.path)),r,"TargetPurposeLimboResolution",Pc._e))}}async function Zf(t,e,n){const r=Xa(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((t,a)=>{o.push(r.Ma(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=vd.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.fa.u_(i),await async function(t,e){const n=Xa(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Cc.forEach(e,(e=>Cc.forEach(e.qi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>Cc.forEach(e.Qi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!Rc(t))throw t;$a("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function tp(t,e){const n=Xa(t);if(!n.currentUser.isEqual(e)){$a("SyncEngine","User change. New user:",e.toKey());const t=await Ed(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new Ya(Ja.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Zf(n,t.us)}}function ep(t,e){const n=Xa(t),r=n.Sa.get(e);if(r&&r.ma)return bu().add(r.key);{let t=bu();const r=n.pa.get(e);if(!r)return t;for(const e of r){const r=n.ga.get(e);t=t.unionWith(r.view.la)}return t}}function np(t){const e=Xa(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$f.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Hf.bind(null,e),e}class rp{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Fd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,r){return new _d(t,e,n,r)}(this.persistence,new bd,t.initialUser,this.serializer)}createPersistence(t){return new md(yd.Hr,this.serializer)}createSharedClientState(t){return new Ad}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ip{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>qf(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=tp.bind(null,this.syncEngine),await async function(t,e){const n=Xa(t);e?(n.v_.delete(2),await Kd(n)):e||(n.v_.add(2),await Gd(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Sf}createDatastore(t){const e=Fd(t.databaseInfo.databaseId),n=function(t){return new Md(t)}(t.databaseInfo);return function(t,e,n,r){return new zd(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new Hd(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>qf(this.syncEngine,t,0)),Rd.D()?new Rd:new xd)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Ff(t,e,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=Xa(t);$a("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await Gd(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class sp{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Ha("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class op{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=ja.UNAUTHENTICATED,this.clientId=lc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{$a("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>($a("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ya(Ja.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=_f(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function ap(t,e){t.asyncQueue.verifyOperationInProgress(),$a("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Ed(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$a("FirestoreClient","Using user provided OfflineComponentProvider");try{await ap(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Ja.FAILED_PRECONDITION||t.code===Ja.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ka("Error using user provided cache. Falling back to memory cache: "+n),await ap(t,new rp)}}else $a("FirestoreClient","Using default OfflineComponentProvider"),await ap(t,new rp);return t._offlineComponents}(t);$a("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>yf(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>yf(e.remoteStore,n))),t._onlineComponents=e}async function lp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($a("FirestoreClient","Using user provided OnlineComponentProvider"),await cp(t,t._uninitializedComponentsProvider._online)):($a("FirestoreClient","Using default OnlineComponentProvider"),await cp(t,new ip))),t._onlineComponents}async function up(t){const e=await lp(t),n=e.eventManager;return n.onListen=Vf.bind(null,e.syncEngine),n.onUnlisten=jf.bind(null,e.syncEngine),n}function hp(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const dp=new Map;function fp(t,e,n){if(!n)throw new Ya(Ja.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pp(t){if(!vc.isDocumentKey(t))throw new Ya(Ja.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mp(t){if(vc.isDocumentKey(t))throw new Ya(Ja.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Wa()}function yp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ya(Ja.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gp(t);throw new Ya(Ja.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class vp{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ya(Ja.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ya(Ja.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new Ya(Ja.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hp(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ya(Ja.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Ya(Ja.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Ya(Ja.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wp{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ya(Ja.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ya(Ja.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vp(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new ec;switch(t.type){case"firstParty":return new sc(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ya(Ja.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=dp.get(t);e&&($a("ComponentProvider","Removing Datastore"),dp.delete(t),e.terminate())}(this),Promise.resolve()}}class bp{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new bp(this.firestore,t,this._query)}}class _p{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ep(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _p(this.firestore,t,this._key)}}class Ep extends bp{constructor(t,e,n){super(t,e,Xl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _p(this.firestore,null,new vc(t))}withConverter(t){return new Ep(this.firestore,t,this._path)}}function Ip(t,e,...n){if(t=k(t),fp("collection","path",e),t instanceof wp){const r=mc.fromString(e,...n);return mp(r),new Ep(t,null,r)}{if(!(t instanceof _p||t instanceof Ep))throw new Ya(Ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mc.fromString(e,...n));return mp(r),new Ep(t.firestore,null,r)}}function Tp(t,e,...n){if(t=k(t),1===arguments.length&&(e=lc.newId()),fp("doc","path",e),t instanceof wp){const r=mc.fromString(e,...n);return pp(r),new _p(t,null,new vc(r))}{if(!(t instanceof _p||t instanceof Ep))throw new Ya(Ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mc.fromString(e,...n));return pp(r),new _p(t.firestore,t instanceof Ep?t.converter:null,new vc(r))}}class Cp{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Vd(this,"async_queue_retry"),this._u=()=>{const t=Ud();t&&$a("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=Ud();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=Ud();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new Za;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Rc(t))throw t;$a("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Ha("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const r=bf.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(r),r}au(){this.ru&&Wa()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class Sp extends wp{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Cp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ap(this),this._firestoreClient.terminate()}}function kp(t){return t._firestoreClient||Ap(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ap(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new nl(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hp(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new op(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class xp{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xp(Wc.fromBase64String(t))}catch(t){throw new Ya(Ja.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new xp(Wc.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Rp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ya(Ja.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yc(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Np{constructor(t){this._methodName=t}}class Dp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ya(Ja.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ya(Ja.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return uc(this._lat,t._lat)||uc(this._long,t._long)}}const Op=/^__.*__$/;class Lp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Gu(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ku(t,this.data,e,this.fieldTransforms)}}class Pp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Gu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Mp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wa()}}class Up{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Up(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Au({path:n,Vu:!1});return r.mu(t),r}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Qp(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Mp(this.du)&&Op.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Fp{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Fd(t)}Su(t,e,n,r=!1){return new Up({du:t,methodName:e,wu:n,path:yc.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vp(t){const e=t._freezeSettings(),n=Fd(t._databaseId);return new Fp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jp(t,e,n,r,i,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);Hp("Data must be an object, but it was:",o,r);const a=zp(r,o);let c,l;if(s.merge)c=new Kc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=Kp(e,r,n);if(!o.contains(i))throw new Ya(Ja.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Xp(t,i)||t.push(i)}c=new Kc(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Lp(new bl(a),c,l)}class Bp extends Np{_toFieldTransform(t){if(2!==t.du)throw 1===t.du?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Bp}}function qp(t,e){if($p(t=k(t)))return Hp("Unsupported field value:",e,t),zp(t,e);if(t instanceof Np)return function(t,e){if(!Mp(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=qp(i,e.gu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=k(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=dc.fromDate(t);return{timestampValue:Ch(e.serializer,n)}}if(t instanceof dc){const n=new dc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ch(e.serializer,n)}}if(t instanceof Dp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xp)return{bytesValue:Sh(e.serializer,t._byteString)};if(t instanceof _p){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.pu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:xh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${gp(t)}`)}(t,e)}function zp(t,e){const n={};return jc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vc(t,((t,r)=>{const i=qp(r,e.Ru(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function $p(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof dc||t instanceof Dp||t instanceof xp||t instanceof _p||t instanceof Np)}function Hp(t,e,n){if(!$p(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=gp(n);throw"an object"===r?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function Kp(t,e,n){if((e=k(e))instanceof Rp)return e._internalPath;if("string"==typeof e)return Wp(t,e);throw Qp("Field path arguments must be of type string or ",t,!1,void 0,n)}const Gp=new RegExp("[~\\*/\\[\\]]");function Wp(t,e,n){if(e.search(Gp)>=0)throw Qp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rp(...e.split("."))._internalPath}catch(r){throw Qp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ya(Ja.INVALID_ARGUMENT,a+t+c)}function Xp(t,e){return t.some((t=>t.isEqual(e)))}class Jp{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _p(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Yp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Zp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Yp extends Jp{data(){return super.data()}}function Zp(t,e){return"string"==typeof e?Wp(t,e):e instanceof Rp?e._internalPath:e._delegate._internalPath}class tm{}class em extends tm{}class nm extends em{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new nm(t,e,n)}_apply(t){const e=this._parse(t);return om(t._query,e),new bp(t.firestore,t.converter,eu(t._query,e))}_parse(t){const e=Vp(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ya(Ja.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){sm(o,s);const e=[];for(const n of o)e.push(im(r,t,n));a={arrayValue:{values:e}}}else a=im(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||sm(o,s),a=function(t,e,n,r=!1){return qp(n,t.Su(r?4:3,e))}(n,"where",o,"in"===s||"not-in"===s);return xl.create(i,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class rm extends tm{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new rm(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Rl.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const t of r)om(n,t),n=eu(n,t)}(t._query,e),new bp(t.firestore,t.converter,eu(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function im(t,e,n){if("string"==typeof(n=k(n))){if(""===n)throw new Ya(Ja.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yl(e)&&-1!==n.indexOf("/"))throw new Ya(Ja.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mc.fromString(n));if(!vc.isDocumentKey(r))throw new Ya(Ja.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dl(t,new vc(r))}if(n instanceof _p)return dl(t,n._key);throw new Ya(Ja.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gp(n)}.`)}function sm(t,e){if(!Array.isArray(t)||0===t.length)throw new Ya(Ja.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function om(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Ya(Ja.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ya(Ja.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class am{convertValue(t,e="none"){switch(sl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Yc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Wa()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Vc(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Dp(Jc(t.latitude),Jc(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=tl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(el(t));default:return null}}convertTimestamp(t){const e=Xc(t);return new dc(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=mc.fromString(t);Qa(Qh(n));const r=new rl(n.get(1),n.get(3)),i=new vc(n.popFirst(5));return r.isEqual(e)||Ha(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function cm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class lm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class um extends Jp{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new hm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Zp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class hm extends um{data(t={}){return super.data(t)}}class dm{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new lm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new hm(this._firestore,this._userDataWriter,n.key,n,new lm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ya(Ja.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new hm(t._firestore,t._userDataWriter,n.doc.key,n.doc,new lm(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new hm(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:fm(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function fm(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wa()}}class pm extends am{constructor(t){super(),this.firestore=t}convertBytes(t){return new xp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _p(this.firestore,null,e)}}function mm(t){t=yp(t,bp);const e=yp(t.firestore,Sp),n=kp(e),r=new pm(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ya(Ja.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const r=new Za;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new sp({next:n=>{e.enqueueAndForget((()=>Af(t,o))),n.fromCache&&"server"===r.source?i.reject(new Ya(Ja.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Df(n,s,{includeMetadataChanges:!0,Z_:!0});return kf(t,o)}(await up(t),t.asyncQueue,e,n,r))),r.promise}(n,t._query).then((n=>new dm(e,r,t,n)))}function gm(t,e,n,...r){t=yp(t,_p);const i=yp(t.firestore,Sp),s=Vp(i);let o;return o="string"==typeof(e=k(e))||e instanceof Rp?function(t,e,n,r,i,s){const o=t.Su(1,e,n),a=[Kp(e,r,n)],c=[i];if(s.length%2!=0)throw new Ya(Ja.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)a.push(Kp(e,s[t])),c.push(s[t+1]);const l=[],u=bl.empty();for(let t=a.length-1;t>=0;--t)if(!Xp(l,a[t])){const e=a[t];let n=c[t];n=k(n);const r=o.fu(e);if(n instanceof Bp)l.push(e);else{const t=qp(n,r);null!=t&&(l.push(e),u.set(e,t))}}const h=new Kc(l);return new Pp(u,h,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function(t,e,n,r){const i=t.Su(1,e,n);Hp("Data must be an object, but it was:",i,r);const s=[],o=bl.empty();Vc(r,((t,r)=>{const a=Wp(e,t,n);r=k(r);const c=i.fu(a);if(r instanceof Bp)s.push(a);else{const t=qp(r,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new Kc(s);return new Pp(o,a,i.fieldTransforms)}(s,"updateDoc",t._key,e),vm(i,[o.toMutation(t._key,Fu.exists(!0))])}function ym(t,e){const n=yp(t.firestore,Sp),r=Tp(t),i=cm(t.converter,e);return vm(n,[jp(Vp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Fu.exists(!1))]).then((()=>r))}function vm(t,e){return function(t,e){const n=new Za;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=np(t);try{const t=await function(t,e){const n=Xa(t),r=dc.now(),i=e.reduce(((t,e)=>t.add(e.key)),bu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=hu(),c=bu();return n.os.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=$u(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Gu(t.key,e,_l(e.value.mapValue),Fu.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:pu(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Da[t.currentUser.toKey()];r||(r=new Bc(uc)),r=r.insert(e,n),t.Da[t.currentUser.toKey()]=r}(r,t.batchId,n),await Zf(r,t.changes),await cf(r.remoteStore)}catch(t){const e=_f(t,"Failed to persist write");n.reject(e)}}(await function(t){return lp(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(kp(t),e)}new WeakMap,function(t,e=!0){!function(t){Ba=t}(mt),ht(new A("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Sp(new rc(t.getProvider("auth-internal")),new ac(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ya(Ja.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),vt(Va,"4.4.1",t),vt(Va,"4.4.1","esm2017")}();const wm="firebasestorage.googleapis.com",bm="storageBucket";class _m extends y{constructor(t,e,n=0){super(Tm(t),`Firebase Storage: ${e} (${Tm(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_m.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Tm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Em,Im;function Tm(t){return"storage/"+t}function Cm(){return new _m(Em.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Sm(t){return new _m(Em.INVALID_ARGUMENT,t)}function km(){return new _m(Em.APP_DELETED,"The Firebase app was deleted.")}function Am(t,e){return new _m(Em.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xm(t){throw new _m(Em.INTERNAL_ERROR,"Internal error: "+t)}!function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Em||(Em={}));class Rm{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=Rm.makeFromUrl(t,e)}catch(e){return new Rm(t,"")}if(""===n.path)return n;throw r=t,new _m(Em.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(t,e){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${e===wm?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let e=0;e<a.length;e++){const r=a[e],i=r.regex.exec(t);if(i){const t=i[r.indices.bucket];let e=i[r.indices.path];e||(e=""),n=new Rm(t,e),r.postModify(n);break}}if(null==n)throw function(t){return new _m(Em.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return n}}class Nm{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function Dm(t){return"string"==typeof t||t instanceof String}function Om(t){return Lm()&&t instanceof Blob}function Lm(){return"undefined"!=typeof Blob}function Pm(t,e,n,r){if(r<e)throw Sm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Sm(`Invalid value for '${t}'. Expected ${n} or less.`)}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Im||(Im={}));class Mm{constructor(t,e,n,r,i,s,o,a,c,l,u,h=!0){this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{const n=this.resolve_,r=this.reject_,i=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(i,i.getResponse());!function(t){return void 0!==t}(t)?n():n(t)}catch(t){r(t)}else if(null!==i){const t=Cm();t.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,t)):r(t)}else e.canceled?r(this.appDelete_?km():new _m(Em.CANCELED,"User canceled the upload/download.")):r(new _m(Em.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Um(!1,null,!0)):this.backoffId_=function(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...t){l||(l=!0,e.apply(null,t))}function h(e){i=setTimeout((()=>{i=null,t(f,c())}),e)}function d(){s&&clearTimeout(s)}function f(t,...e){if(l)return void d();if(t)return d(),void u.call(null,t,...e);if(c()||o)return d(),void u.call(null,t,...e);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function m(t){p||(p=!0,d(),l||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(((t,e)=>{if(e)return void t(!1,new Um(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=t=>{const e=t.loaded,n=t.lengthComputable?t.total:-1;null!==this.progressCallback_&&this.progressCallback_(e,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const e=n.getErrorCode()===Im.NO_ERROR,i=n.getStatus();if(!e||function(t,e){const n=t>=500&&t<600,r=-1!==[408,429].indexOf(t),i=-1!==e.indexOf(t);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const e=n.getErrorCode()===Im.ABORT;return void t(!1,new Um(!1,null,e))}const s=-1!==this.successCodes_.indexOf(i);t(!0,new Um(s,n))}))}),t,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Um{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function Fm(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vm(...t){const e=Fm();if(void 0!==e){const n=new e;for(let e=0;e<t.length;e++)n.append(t[e]);return n.getBlob()}if(Lm())return new Blob(t);throw new _m(Em.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const jm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bm{constructor(t,e){this.data=t,this.contentType=e||null}}function qm(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zm(t,e){switch(t){case jm.BASE64:{const n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Am(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case jm.BASE64URL:{const n=-1!==e.indexOf("+"),r=-1!==e.indexOf("/");if(n||r)throw Am(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function(t){if("undefined"==typeof atob)throw new _m(Em.UNSUPPORTED_ENVIRONMENT,"base-64 is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.");return atob(t)}(e)}catch(e){if(e.message.includes("polyfill"))throw e;throw Am(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r}class $m{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Am(jm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;var r,i;null!=n&&(this.base64=(i=";base64",(r=n).length>=7&&r.substring(r.length-7)===i),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}class Hm{constructor(t,e){let n=0,r="";Om(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(Om(this.data_)){const s=(n=this.data_,r=t,i=e,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new Hm(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,t,e-t);return new Hm(n,!0)}}static getBlob(...t){if(Lm()){const e=t.map((t=>t instanceof Hm?t.data_:t));return new Hm(Vm.apply(null,e))}{const e=t.map((t=>Dm(t)?function(t,e){switch(t){case jm.RAW:return new Bm(qm(e));case jm.BASE64:case jm.BASE64URL:return new Bm(zm(t,e));case jm.DATA_URL:return new Bm(function(t){const e=new $m(t);return e.base64?zm(jm.BASE64,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(t){throw Am(jm.DATA_URL,"Malformed data URL.")}return qm(e)}(e.rest)}(e),new $m(e).contentType)}throw Cm()}(jm.RAW,t).data:t.data_));let n=0;e.forEach((t=>{n+=t.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((t=>{for(let e=0;e<t.length;e++)r[i++]=t[e]})),new Hm(r,!0)}}uploadData(){return this.data_}}function Km(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Gm(t,e){return e}class Wm{constructor(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Gm}}let Qm=null;function Xm(t,e,n){const r=function(t){let e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}(e);return null===r?null:function(t,e,n){const r={type:"file"},i=n.length;for(let t=0;t<i;t++){const i=n[t];r[i.local]=i.xform(r,e[i.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,r=t.fullPath,i=new Rm(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}class Jm{constructor(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ym(t,e){return function(n,r){const i=Xm(t,r,e);return function(t){if(!t)throw Cm()}(null!==i),i}}function Zm(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}(e,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Hm.getBlob(l,r,u);if(null===h)throw new _m(Em.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const d={name:c.fullPath},f=function(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}(s,t.host,t._protocol),p=t.maxUploadRetryTime,m=new Jm(f,"POST",Ym(t,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=function(t){return function(e,n){let r;var i,s;return 401===e.getStatus()?r=e.getErrorText().includes("Firebase App Check token is invalid")?new _m(Em.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new _m(Em.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,r=new _m(Em.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new _m(Em.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=e.getStatus(),r.serverResponse=n.serverResponse,r}}(e),m}let tg=null;class eg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Im.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Im.ABORT,t()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Im.NETWORK_ERROR,t()})),this.xhr_.addEventListener("load",(()=>{t()}))}))}send(t,e,n,r){if(this.sent_)throw xm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const t in r)r.hasOwnProperty(t)&&this.xhr_.setRequestHeader(t,r[t].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw xm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class ng extends eg{initXhr(){this.xhr_.responseType="text"}}function rg(){return tg?tg():new ng}class ig{constructor(t,e){this._service=t,this._location=e instanceof Rm?e:Rm.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new ig(t,e)}get root(){const t=new Rm(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Km(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new Rm(this._location.bucket,t);return new ig(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new _m(Em.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function sg(t,e,n){t._throwIfRoot("uploadBytes");const r=Zm(t.storage,t._location,function(){if(Qm)return Qm;const t=[];t.push(new Wm("bucket")),t.push(new Wm("generation")),t.push(new Wm("metageneration")),t.push(new Wm("name","fullPath",!0));const e=new Wm("name");e.xform=function(t,e){return function(t){return!Dm(t)||t.length<2?t:Km(t)}(e)},t.push(e);const n=new Wm("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Wm("timeCreated")),t.push(new Wm("updated")),t.push(new Wm("md5Hash",null,!0)),t.push(new Wm("cacheControl",null,!0)),t.push(new Wm("contentDisposition",null,!0)),t.push(new Wm("contentEncoding",null,!0)),t.push(new Wm("contentLanguage",null,!0)),t.push(new Wm("contentType",null,!0)),t.push(new Wm("metadata","customMetadata",!0)),Qm=t,Qm}(),new Hm(e,!0),n);return t.storage.makeRequestWithTokens(r,rg).then((e=>({metadata:e,ref:t})))}function og(t,e){if(t instanceof cg){const n=t;if(null==n._bucket)throw new _m(Em.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bm+"' property when initializing the app?");const r=new ig(n,n._bucket);return null!=e?og(r,e):r}return void 0!==e?function(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Rm(t._location.bucket,n);return new ig(t.storage,r)}(t,e):t}function ag(t,e){const n=null==e?void 0:e[bm];return null==n?null:Rm.makeFromBucketSpec(n,t)}class cg{constructor(t,e,n,r,i){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=wm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Rm.makeFromBucketSpec(r,this._host):ag(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=Rm.makeFromBucketSpec(this._url,t):this._bucket=ag(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Pm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Pm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ig(this,t)}_makeRequest(t,e,n,r,i=!0){if(this._deleted)return new Nm(km());{const s=function(t,e,n,r,i,s,o=!0){const a=function(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(l,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(l,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(l,r),new Mm(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(t,this._appId,n,r,e,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(t,e){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,r).getPromise()}}const lg="@firebase/storage",ug="0.12.0",hg="storage";ht(new A(hg,(function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new cg(n,r,i,e,mt)}),"PUBLIC").setMultipleInstances(!0)),vt(lg,ug,""),vt(lg,ug,"esm2017");var dg=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};const fg=gt({apiKey:"AIzaSyAS_sGDbQYUNZAoF-ZqZcpjWtLQtBmDvsw",authDomain:"proyecto-dca-1b72d.firebaseapp.com",projectId:"proyecto-dca-1b72d",storageBucket:"proyecto-dca-1b72d.appspot.com",messagingSenderId:"272880735350",appId:"1:272880735350:web:f0dbcec16d1c028a4afb57",measurementId:"G-L13XCXHTB8"}),pg=function(t,e){const n="string"==typeof t?t:"(default)",r=dt("object"==typeof t?t:yt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=u("firestore");t&&function(t,e,n,r={}){var i;const s=(t=yp(t,wp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=ja.MOCK_USER;else{e=p(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ya(Ja.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ja(s)}t._authCredentials=new nc(new tc(e,n))}}(r,...t)}return r}(fg),mg=function(t=yt()){const e=dt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=dt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(b(n.getOptions(),null!=e?e:{}))return t;Pt(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:fr,persistence:[Ln,yn,wn]}),r=d("authTokenSyncURL");if(r){const t=(i=r,async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>yr)return;const r=null==e?void 0:e.token;vr!==r&&(vr=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(t,e,n){k(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(e,n,r,i){k(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}var i;const s=l("auth");return s&&function(t,e,n){const r=Pe(t);Ft(r._canInitEmulator,r,"emulator-config-failed"),Ft(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=qe(e),{host:o,port:a}=function(t){const e=qe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const t=i[1];return{host:t,port:ze(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:ze(e)}}}(e),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${s}`),n}(fg),gg=function(t=yt(),e){const n=dt(t=k(t),hg).getImmediate({identifier:e}),r=u("storage");return r&&function(t,e,n,r={}){!function(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:p(i,t.app.options.projectId))}(t,e,n,r)}(n,...r),n}();let yg=null;const vg=t=>{console.log(t),function(t,e,n){return async function(t,e){return dn(Pe(t),e)}(k(t),Ze.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&fn(t),e}))}(mg,t.email,t.password).then((t=>dg(void 0,void 0,void 0,(function*(){const e=t.user;console.log(e.uid)})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n)}))},wg=t=>dg(void 0,void 0,void 0,(function*(){const e=Tp(pg,"users",t);return(yield function(t){t=yp(t,_p);const e=yp(t.firestore,Sp);return function(t,e,n={}){const r=new Za;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new sp({next:s=>{e.enqueueAndForget((()=>Af(t,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Ya(Ja.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Ya(Ja.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new Df(Xl(n.path),s,{includeMetadataChanges:!0,Z_:!0});return kf(t,o)}(await up(t),t.asyncQueue,e,n,r))),r.promise}(kp(e),t._key).then((n=>function(t,e,n){const r=n.docs.get(e._key),i=new pm(t);return new um(t,i,e._key,r,new lm(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}(e)).data()})),bg=t=>dg(void 0,void 0,void 0,(function*(){console.log(`userId: ${t}`);const e=function(t,e,...n){let r=[];e instanceof tm&&r.push(e),r=r.concat(n),function(t){const e=t.filter((t=>t instanceof rm)).length,n=t.filter((t=>t instanceof nm)).length;if(e>1||e>0&&n>0)throw new Ya(Ja.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const e of r)t=e._apply(t);return t}(Ip(pg,"playlist"),function(t,e,n){const r=Zp("where","idUser");return nm._create(r,"==",n)}(0,0,t)),n=yield mm(e),r=[];return n.forEach((t=>{const e=t.data();r.push(Object.assign({id:t.id},e))})),console.log("User posts:",r),r})),_g=(t,e)=>dg(void 0,void 0,void 0,(function*(){var n,r,i;(n="imgsProfile/"+e,r=function(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof cg)return new ig(t,e);throw Sm("To use ref(service, url), the first argument must be a Storage instance.")}return og(t,e)}(k(gg),n),i=t,sg(r=k(r),i,void 0)).then((t=>{console.log("Uploaded a blob or file!")}))}));const Eg=t=>({action:"navigate",payload:t});var Ig;!function(t){t.LOGIN="LOGIN",t.HOME="HOME"}(Ig||(Ig={})),function(t,e,n,r){k(t).onAuthStateChanged((t=>{t?(null!==t.uid&&Sg((t=>({action:"SETUSER",payload:t}))(t.uid)),Sg(Eg(Ig.HOME))):Sg(Eg(Ig.LOGIN))}),void 0,void 0)}(mg);let Tg={screen:"",userId:"",userSongs:[],myUserSongs:[]},Cg=[];const Sg=t=>{const e=((t,e)=>{const{action:n,payload:r}=t;switch(n){case"navigate":e.screen=r;break;case"SETUSER":e.userId=r;break;case"GETUSERSONGS":e.userSongs=r;break;case"GETMYUSERSONGS":e.myUserSongs=r}return e})(t,JSON.parse(JSON.stringify(Tg)));Tg=e,Cg.forEach((t=>t.render()))},kg=t=>{Cg=[...Cg,t]};var Ag;!function(t){t.uid="uid",t.iconohome="iconohome",t.iconoexplore="iconoexplore",t.iconoprofile="iconoprofile"}(Ag||(Ag={}));class xg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,iconohome:null,iconoexplore:null,iconoprofile:null})}attributeChangedCallback(t,e,n){t===Ag.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}render(){var t,n,r,i;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class="menubar">\n\t\t<svg id="home">${this.iconohome}</svg>\n\t\t<img id="explore" src=${this.iconoexplore}></svg>\n\t\t<svg id="profile">${this.iconoprofile}</svg>\n\t\t\t</section>`);const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#home");null==s||s.addEventListener("click",(()=>{Sg(Eg("HOME"))}));const o=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#explore");null==o||o.addEventListener("click",(()=>{Sg(Eg("EXPLORE"))}));const a=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#profile");null==a||a.addEventListener("click",(()=>{Sg(Eg("PROFILE"))}));const c=this.ownerDocument.createElement("style");c.innerHTML=e.A,null===(i=this.shadowRoot)||void 0===i||i.appendChild(c)}}customElements.define("my-iconos",xg);const Rg=[{id:1,logo:"https://i.pinimg.com/736x/4e/97/d6/4e97d610dfc03d8fde6969d5be6434f4.jpg"}];var Ng,Dg=n(507);!function(t){t.uid="uid",t.logo="logo"}(Ng||(Ng={}));class Og extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,logo:null})}attributeChangedCallback(t,e,n){t===Ng.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}render(){var t,e;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n    <section class="header">\n\t\t<section class="logo">\n    <img src='${this.logo}'></img>\n\t\t</section>\n    </section>`);const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".logo");null==n||n.addEventListener("click",(()=>{Sg(Eg("HOME"))}));const r=this.ownerDocument.createElement("style");r.innerHTML=Dg.A,null===(e=this.shadowRoot)||void 0===e||e.appendChild(r)}}customElements.define("my-header",Og);const Lg=[{id:1,name:"Susana GarcÃ­a",wave:"",image:"https://images.pexels.com/photos/3646160/pexels-photo-3646160.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",unlike:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6b6" d="M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20c0 0-.1-.1-.1-.1c0 0 0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"/></svg>',like:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6bc" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>',cantidadlike:"6,4k",share:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6b6" d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>',cantidadshare:"49k",comentar:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec6b6" d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"/></svg>',cantidadcomentar:"6,9k"}];var Pg,Mg=n(357);!function(t){t.unlike="unlike",t.like="like",t.cantidadlike="cantidadlike",t.share="share",t.cantidadshare="cantidadshare",t.comentar="comentar",t.cantidadcomentar="cantidadcomentar",t.profileuid="profileuid",t.name="name",t.image="image",t.wave="wave"}(Pg||(Pg={}));class Ug extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({unlike:null,like:null,cantidadlike:null,share:null,cantidadshare:null,comentar:null,cantidadcomentar:null,profileuid:null,name:null,image:null,wave:null})}attributeChangedCallback(t,e,n){t===Pg.profileuid?this.profileuid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render(),this.attachEventHandlers()}attachEventHandlers(){var t,e;const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".like"),r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".unlike");n&&r&&(n.addEventListener("click",(()=>{n.style.display="none",r.style.display="block",localStorage.setItem("likeState","block")})),r.addEventListener("click",(()=>{n.style.display="block",r.style.display="none",localStorage.setItem("likeState","none")})),"none"===localStorage.getItem("likeState")&&(n.style.display="none",r.style.display="block"))}render(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){var t;if(this.shadowRoot){this.shadowRoot.innerHTML="";const e=this.ownerDocument.createElement("style");e.innerHTML=Mg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e),(yield dg(void 0,void 0,void 0,(function*(){const t=yield mm(Ip(pg,"waves")),e=[];return t.forEach((t=>{const n=t.data();e.push(Object.assign({id:t.id},n))})),e}))).forEach((t=>{var e;const n=document.createElement("section");n.className="cardEntera";const r=document.createElement("section");r.className="profile";const i=document.createElement("section");i.className="image";const s=document.createElement("img");s.src=this.image||"undefined",i.appendChild(s);const o=document.createElement("p");o.className="username",o.textContent=this.name||"No Username",r.appendChild(i),r.appendChild(o);const a=document.createElement("section");a.className="wave";const c=this.ownerDocument.createElement("p");c.innerText=t.wave,a.appendChild(c);const l=document.createElement("section");l.className="interacciones";const u=document.createElement("section");u.className="like_group";const h=document.createElement("svg");h.id="svg",h.className="unlike",h.innerHTML=this.unlike||"undefined";const d=document.createElement("svg");d.id="svg_like",d.className="like",d.style.display="none",d.innerHTML=this.like||"undefined";const f=document.createElement("p");f.textContent=this.cantidadlike||"undefined",u.appendChild(h),u.appendChild(d),u.appendChild(f);const p=document.createElement("section");p.className="share";const m=document.createElement("svg");m.id="svg",m.innerHTML=this.share||"undefined";const g=document.createElement("p");g.textContent=this.cantidadshare||"undefined",p.appendChild(m),p.appendChild(g);const y=document.createElement("section");y.className="comment";const v=document.createElement("svg");v.id="svg",v.innerHTML=this.comentar||"undefined";const w=document.createElement("p");w.textContent=this.cantidadcomentar||"undefined",y.appendChild(v),y.appendChild(w),l.appendChild(u),l.appendChild(p),l.appendChild(y),n.appendChild(r),n.appendChild(a),n.appendChild(l),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}}))}}customElements.define("my-card",Ug);var Fg=n(9),Vg=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};const jg={wave:""};class Bg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}connectedCallback(){return Vg(this,void 0,void 0,(function*(){const t=yield wg(Tg.userId);this.render(t)}))}changeWave(t){jg.wave=t.target.value}submitForm(){var t;t=jg,dg(void 0,void 0,void 0,(function*(){try{const e=Ip(pg,"waves");yield ym(e,t),console.log("se aÃ±adiÃ³ con Ã©xito")}catch(t){console.error(t)}}))}render(e){return Vg(this,void 0,void 0,(function*(){var n,r,i,s;if(this.shadowRoot){Rg.forEach((t=>{var e;const n=document.createElement("my-header");n.setAttribute(Ng.logo,t.logo),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const o=this.ownerDocument.createElement("h1");o.textContent="Share your wave!",null===(n=this.shadowRoot)||void 0===n||n.appendChild(o);const a=this.ownerDocument.createElement("input");a.placeholder="Enter your Wave",a.classList.add("image"),a.addEventListener("change",this.changeWave),this.shadowRoot.appendChild(a);const c=this.ownerDocument.createElement("button");c.innerText="Share",c.classList.add("save"),c.addEventListener("click",this.submitForm.bind(this)),null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);const l=this.ownerDocument.createElement("h2");l.textContent="For You",null===(i=this.shadowRoot)||void 0===i||i.appendChild(l),Lg.forEach((t=>{var n;const r=document.createElement("my-card");r.setAttribute(Pg.name,e.username),r.setAttribute(Pg.image,e.profile_image||"https://static.vecteezy.com/system/resources/thumbnails/005/129/844/small_2x/profile-user-icon-isolated-on-white-background-eps10-free-vector.jpg"),r.setAttribute(Pg.unlike,t.unlike),r.setAttribute(Pg.like,t.like),r.setAttribute(Pg.cantidadlike,t.cantidadlike),r.setAttribute(Pg.share,t.share),r.setAttribute(Pg.cantidadshare,t.cantidadshare),r.setAttribute(Pg.comentar,t.comentar),r.setAttribute(Pg.cantidadcomentar,t.cantidadcomentar),null===(n=this.shadowRoot)||void 0===n||n.appendChild(r)})),t.forEach((t=>{var e;const n=document.createElement("my-iconos");n.setAttribute(Ag.iconohome,t.iconohome),n.setAttribute(Ag.iconoexplore,t.iconoexplore),n.setAttribute(Ag.iconoprofile,t.iconoprofile),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const u=this.ownerDocument.createElement("style");u.innerHTML=Fg.A,null===(s=this.shadowRoot)||void 0===s||s.appendChild(u)}}))}}customElements.define("app-dashboard",Bg);const qg=[{id:1,logo:"https://i.pinimg.com/736x/4e/97/d6/4e97d610dfc03d8fde6969d5be6434f4.jpg",log_out:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1e1e1e" d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/></svg>'}];var zg;!function(t){t.uid="uid",t.logo="logo",t.log_out="log_out"}(zg||(zg={}));class $g extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,logo:null,log_out:null})}attributeChangedCallback(t,e,n){t===zg.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}logout(){indexedDB.deleteDatabase("firebase-heartbeat-database"),indexedDB.deleteDatabase("firebaseLocalStorageDb"),window.location.reload()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n\t\t\t\t<section class="header">\n\t\t\t\t\t<section class="logo">\n\t\t\t\t\t\t<img src='${this.logo}'></img>\n\t\t\t\t\t</section>\n\n\t\t\t\t\t<button id="log_out">\n\t\t\t\t\t\t<svg class="log_out" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">\n\t\t\t\t\t\t\t\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e\n\t\t\t\t\t\t\t<path fill="#1e1e1e" d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</section>\n\n\t\t\t\t<section class="modalContainer" style="display:none;">\n\t\t\t\t\t<form class="logout">\n\t\t\t\t\t\t<h2>You are logging out</h2>\n\t\t\t\t\t\t<section class="botones">\n\t\t\t\t\t\t<span role="button" class="Cancel">Cancel</span>\n\t\t\t\t\t\t<span role="button" class="Accept">Accept</span>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</form>\n\t\t\t\t</section>\n\t\t\t`;const t=this.shadowRoot.querySelector(".modalContainer"),e=this.shadowRoot.querySelector("#log_out"),n=this.shadowRoot.querySelector(".Accept"),r=this.shadowRoot.querySelector(".Cancel");e.addEventListener("click",(()=>{t.style.display="block",document.body.style.overflow="hidden"})),window.addEventListener("click",(e=>{e.target==t&&(t.style.display="none",document.body.style.overflow="auto")})),n.addEventListener("click",(()=>{this.logout()})),r.addEventListener("click",(()=>{t.style.display="none",document.body.style.overflow="auto"}));const i=this.shadowRoot.querySelector(".logo");null==i||i.addEventListener("click",(()=>{Sg(Eg("HOME"))}));const s=this.ownerDocument.createElement("style");s.innerHTML=Dg.A,this.shadowRoot.appendChild(s)}}}customElements.define("my-headerprofile",$g);const Hg=[{id:1,iconohome:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1E1E1E" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>',iconoexplore:'"https://i.pinimg.com/originals/94/67/f5/9467f504e83345d60816f9b87ac84588.jpg"',iconoprofile:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#ff9f1c" d="M399 384.2C376.9 345.8 335.4 320 288 320H224c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"/></svg>'}];var Kg,Gg=n(831),Wg=n(471);!function(t){t.artist="artist",t.song_title="song_title",t.image="image",t.top="top"}(Kg||(Kg={}));class Qg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({artist:null,song_title:null,image:null,top:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t\t<section class = "card">\n\n\n\t\t\t<p class="top">${this.top}</p>\n\n\t\t\t<section class= "imagen">\n\t\t\t<img src="${this.image}" alt= "cover album"></img>\n\t\t\t</section>\n\n\t\t\t<section class = "letters">\n\n\t\t\t<section class = "title">\n\t\t\t<p>${this.song_title}</p>\n\t\t\t</section>\n\n\t\t<section class = "artist">\n\t\t<p>${this.artist}</p>\n\t\t</section>\n\n\n\t\t</section>\n\n\t\t</section>\n    `);const e=this.ownerDocument.createElement("style");e.innerHTML=Wg.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-songs",Qg);var Xg=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};const Jg={top:"",artist:"",song_title:"",image:"",duration:"",idUser:""};var Yg;!function(t){t.profile_image="profile_image",t.username="username",t.fav_song="fav_song",t.completeName="completeName"}(Yg||(Yg={}));class Zg extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}static get observedAttributes(){return Object.keys({profile_image:null,username:null,fav_song:null,completeName:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){return Xg(this,void 0,void 0,(function*(){if(0===Tg.myUserSongs.length){const e=yield(t=Tg.userId,function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}(void 0,void 0,void 0,(function*(){return{action:"GETMYUSERSONGS",payload:yield bg(t)}})));Sg(e)}else this.render();var t}))}submitForm(){var t;Jg.idUser=Tg.userId,t=Jg,dg(void 0,void 0,void 0,(function*(){try{const e=Ip(pg,"playlist");yield ym(e,t),console.log("se aÃ±adiÃ³ con Ã©xito")}catch(t){console.error(t)}}))}changeArtist(t){Jg.artist=t.target.value}changeTitle(t){Jg.song_title=t.target.value}changeImage(t){Jg.image=t.target.value}render(){return Xg(this,void 0,void 0,(function*(){var t,e,n,r,i,s,o,a,c,l,u,h,d,f,p;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\t\t<section class="todo">\n\t\t<section class="profile">\n\t\t<section class="profileimg">\n\t\t<img src="${this.profile_image}"></img>\n\t\t</section>\n\t\t<h1>${this.username}</h1>\n\t\t<Button class="edit" id="edit">Edit picture</Button>\n\t\t<button id="ButtonSong">\n\t\t<p class="fav_song"><svg class="pin"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(46, 196, 182);transform: ;msFilter:;"><path d="M15 11.586V6h2V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2h2v5.586l-2.707 1.707A.996.996 0 0 0 6 14v2a1 1 0 0 0 1 1h4v3l1 2 1-2v-3h4a1 1 0 0 0 1-1v-2a.996.996 0 0 0-.293-.707L15 11.586z"></path></svg></svg>\n\t\t${this.fav_song}</p>\n\t\t</section>\n\t\t<section class="name-following">\n\t\t<p class="name">${this.completeName}</p>\n\t\t<p class="following">100 following</p>\n\t\t</section>\n\t\t<p class="followers">238 followers</p>\n\t\t<Button class="playlist">Playlists</Button>\n\t\t</section>\n\t\t</section>\n\n\t\t<section class="modalContainer" style="display:none;">\n\t\t<form class="waveSong">\n\t\t    <span class="close">X</span>\n\t\t    <h2>What's your wave song at the moment?</h2>\n\t\t    <textarea id="writtenSong" name="wave"></textarea>\n\t\t    <span role="button" class="post">Post</span>\n\t\t</form>\n\t\t</section>\n\n\t\t<section id="modalContainerProfileImg" style="display:none;">\n\t\t<form class="profileImgForm">\n\t\t    <h2>Set your new profile image</h2>\n\t\t\t\t<section class="fileContainer">\n\t\t\t\t<input role="button" class="File"></input>\n\t\t\t\t</section>\n\t\t\t\t<textarea id="newProfileImage" name="profileImage" placeholder="Or insert URL"></textarea>\n\t\t\t\t<section class="botones">\n\t\t\t\t<span role="button" class="Cancel">Cancel</span>\n\t\t    <span role="button" class="Accept">Done</span>\n\t\t\t\t</section>\n\t\t</form>\n\t\t</section>\n\t\t`);const m=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".File");m.type="file",m.addEventListener("change",(()=>{var t,e;const n=null===(t=m.files)||void 0===t?void 0:t[0];n&&_g(n,Tg.userId),null===(e=this.shadowRoot)||void 0===e||e.appendChild(m)}));const g=this.ownerDocument.createElement("h1");g.textContent="Add your own song",g.classList.add("h1Add"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(g);const y=this.ownerDocument.createElement("section");y.classList.add("create-song");const v=this.ownerDocument.createElement("input");v.placeholder="Add an artist",v.classList.add("artist"),v.addEventListener("change",this.changeArtist),y.appendChild(v);const w=this.ownerDocument.createElement("input");w.placeholder="Add the song title",w.classList.add("title"),w.addEventListener("change",this.changeTitle),y.appendChild(w);const b=this.ownerDocument.createElement("input");b.placeholder="Add the album cover",b.classList.add("coverImage"),b.addEventListener("change",this.changeImage),y.appendChild(b),null===(n=this.shadowRoot)||void 0===n||n.appendChild(y);const _=this.ownerDocument.createElement("button");_.innerText="Save",_.classList.add("save"),_.addEventListener("click",this.submitForm),null===(r=this.shadowRoot)||void 0===r||r.appendChild(_),Tg.myUserSongs.forEach((t=>{var e;const n=this.ownerDocument.createElement("my-songs");n.setAttribute(Kg.top,"â"),n.setAttribute(Kg.image,t.image),n.setAttribute(Kg.artist,t.artist),n.setAttribute(Kg.song_title,t.song_title),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const E=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".modalContainer"),I=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector("#ButtonSong"),T=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(".close");(null===(a=this.shadowRoot)||void 0===a?void 0:a.querySelector(".post")).addEventListener("click",(()=>Xg(this,void 0,void 0,(function*(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#writtenSong"),n=e.value;var r;r=n,dg(void 0,void 0,void 0,(function*(){const t=Tp(pg,"users",Tg.userId);yield gm(t,{fav_song:r})})),e.value="",E.style.display="none",document.body.style.overflow="auto"})))),(null===(c=this.shadowRoot)||void 0===c?void 0:c.querySelector(".post")).addEventListener("click",(t=>{var e;t.preventDefault();const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#writtenSong"),r=n.value;console.log("Entered wave:",r),n.value="",E.style.display="none",C.style.overflow="auto"}));const C=document.body;C&&(I.addEventListener("click",(()=>{E.style.display="block",C.style.overflow="hidden"})),T.addEventListener("click",(()=>{E.style.display="none",C.style.overflow="auto",window.addEventListener("click",(t=>{t.target==E&&(E.style.display="none",C.style.overflow="auto")}))})));const S=null===(l=this.shadowRoot)||void 0===l?void 0:l.querySelector("#modalContainerProfileImg"),k=null===(u=this.shadowRoot)||void 0===u?void 0:u.querySelector("#edit"),A=null===(h=this.shadowRoot)||void 0===h?void 0:h.querySelector(".Accept"),x=null===(d=this.shadowRoot)||void 0===d?void 0:d.querySelector(".Cancel");k.addEventListener("click",(()=>{S.style.display="block",document.body.style.overflow="hidden"})),A.addEventListener("click",(()=>Xg(this,void 0,void 0,(function*(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#newProfileImage");var n;n=e.value,dg(void 0,void 0,void 0,(function*(){const t=Tp(pg,"users",Tg.userId);yield gm(t,{profile_image:n})})),e.value="",S.style.display="none",document.body.style.overflow="auto"})))),(null===(f=this.shadowRoot)||void 0===f?void 0:f.querySelector(".Accept")).addEventListener("click",(t=>{var e;t.preventDefault();const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#newProfileImage"),r=n.value;console.log("Entered wave:",r),n.value="",S.style.display="none",C.style.overflow="auto"})),x.addEventListener("click",(()=>{S.style.display="none",document.body.style.overflow="auto"})),window.addEventListener("click",(t=>{t.target===S&&(S.style.display="none",document.body.style.overflow="auto")}));const R=this.ownerDocument.createElement("style");R.innerHTML=Gg.A,null===(p=this.shadowRoot)||void 0===p||p.appendChild(R)}))}}customElements.define("my-perfil",Zg);var ty=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};class ey extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}connectedCallback(){return ty(this,void 0,void 0,(function*(){const t=yield wg(Tg.userId);this.render(t)}))}render(t){return ty(this,void 0,void 0,(function*(){var e;this.shadowRoot&&qg.forEach((t=>{var e;const n=document.createElement("my-headerprofile");n.setAttribute(zg.logo,t.logo),n.setAttribute(zg.log_out,t.log_out),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const n=document.createElement("my-perfil");n.setAttribute(Yg.profile_image,t.profile_image||"https://static.vecteezy.com/system/resources/thumbnails/005/129/844/small_2x/profile-user-icon-isolated-on-white-background-eps10-free-vector.jpg"),n.setAttribute(Yg.username,t.username),n.setAttribute(Yg.completeName,t.completeName),n.setAttribute(Yg.fav_song,t.fav_song||"Add Your Wave Song"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n),Hg.forEach((t=>{var e;const n=document.createElement("my-iconos");n.setAttribute(Ag.iconohome,t.iconohome),n.setAttribute(Ag.iconoexplore,t.iconoexplore),n.setAttribute(Ag.iconoprofile,t.iconoprofile),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}))}}customElements.define("app-perfil",ey);var ny,ry=n(499);!function(t){t.uid="uid",t.name="name",t.photo="photo",t.profile="profile",t.song="song"}(ny||(ny={}));class iy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({uid:null,photo:null,name:null,profile:null,song:null})}attributeChangedCallback(t,e,n){t===ny.uid?this.uid=n?Number(n):void 0:this[t]=n}connectedCallback(){this.render()}render(){var t;this.shadowRoot&&(this.shadowRoot.innerHTML=`\n\n\t\t<section class="card" style="background-image: url('${this.photo}');background-position-x: center;background-size: cover;">\n\t\t<section class="todo">\n\t\t<section class= "image">\n\t\t<img src='${this.profile}'></img>\n    <p>${this.name}</p>\n\t\t</section>\n\t\t<section class="song">\n    <h3>${this.song}</h3>\n\t\t</section>\n\t\t</section>\n\t\t</section>\n\t\t`);const e=this.ownerDocument.createElement("style");e.innerHTML=ry.A,null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}}customElements.define("my-friend",iy);const sy=[{id:1,iconohome:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#1E1E1E" d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>',iconoexplore:'\t"https://i.pinimg.com/originals/33/ff/00/33ff00839226a94f68b571016bc6d99c.jpg"',iconoprofile:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(32, 32, 32);transform: ;msFilter:;"><path d="M12 2C6.579 2 2 6.579 2 12s4.579 10 10 10 10-4.579 10-10S17.421 2 12 2zm0 5c1.727 0 3 1.272 3 3s-1.273 3-3 3c-1.726 0-3-1.272-3-3s1.274-3 3-3zm-5.106 9.772c.897-1.32 2.393-2.2 4.106-2.2h2c1.714 0 3.209.88 4.106 2.2C15.828 18.14 14.015 19 12 19s-3.828-.86-5.106-2.228z"></path></svg>'}];var oy=n(628);class ay extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}connectedCallback(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const t=yield dg(void 0,void 0,void 0,(function*(){const t=[];return(yield mm(Ip(pg,"Friends-playlist"))).forEach((e=>{t.push(e.data())})),t})),e=yield dg(void 0,void 0,void 0,(function*(){const t=[];return(yield mm(Ip(pg,"Songs"))).forEach((e=>{t.push(e.data())})),t}));console.log(t,e),this.render(t,e)}))}render(t,e){var n,r,i,s;this.shadowRoot&&Rg.forEach((t=>{var e;const n=document.createElement("my-header");n.setAttribute(Ng.logo,t.logo),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)})),sy.forEach((t=>{var e;const n=document.createElement("my-iconos");n.setAttribute(Ag.iconohome,t.iconohome),n.setAttribute(Ag.iconoexplore,t.iconoexplore),n.setAttribute(Ag.iconoprofile,t.iconoprofile),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}));const o=this.ownerDocument.createElement("h1");o.textContent="On trending",null===(n=this.shadowRoot)||void 0===n||n.appendChild(o),e.forEach(((t,e)=>{var n;const r=document.createElement("my-songs");r.setAttribute(Kg.top,t.top),r.setAttribute(Kg.song_title,t.song_title),r.setAttribute(Kg.artist,t.artist),r.setAttribute(Kg.image,t.image),r.setAttribute("data-index",(e+1).toString()),null===(n=this.shadowRoot)||void 0===n||n.appendChild(r)}));const a=this.ownerDocument.createElement("h1");a.textContent="My friends playlist",null===(r=this.shadowRoot)||void 0===r||r.appendChild(a);const c=this.ownerDocument.createElement("section");c.classList.add("playlists"),t.forEach((t=>{const e=document.createElement("my-friend");console.log(t),e.setAttribute(ny.name,t.name),e.setAttribute(ny.profile,t.profile),e.setAttribute(ny.photo,t.photo),e.setAttribute(ny.song,t.song),c.appendChild(e)})),null===(i=this.shadowRoot)||void 0===i||i.appendChild(c);const l=this.ownerDocument.createElement("style");l.innerHTML=oy.A,null===(s=this.shadowRoot)||void 0===s||s.appendChild(l)}}customElements.define("app-explore",ay);var cy=n(835);const ly={email:"",username:"",completeName:"",password:""};var uy;!function(t){t.logo="logo",t.google="google",t.facebook="facebook",t.outlook="outlook"}(uy||(uy={}));class hy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({logo:null,google:null,facebook:null,outlook:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}changeEmail(t){var e;ly.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;ly.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeUsername(t){var e;ly.username=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changeCompleteName(t){var e;ly.completeName=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){var t;(async function(t,e,n){const r=Pe(t),i=Be(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",an),s=await i.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&fn(t),e})),o=await cn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o})(mg,(t=ly).email,t.password).then((e=>dg(void 0,void 0,void 0,(function*(){const n=e.user;yg=n.uid,console.log(n.uid);try{const e=Tp(pg,"users",n.uid),r={id:n.uid,username:t.username,completeName:t.completeName};console.log(r),yield function(t,e,n){t=yp(t,_p);const r=yp(t.firestore,Sp),i=cm(t.converter,e,n);return vm(r,[jp(Vp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Fu.none())])}(e,r),alert("Se creÃ³ el usuario")}catch(t){console.error(t)}})))).catch((t=>{const e=t.code,n=t.message;console.error(e,n)}))}render(){if(this.shadowRoot){const t=this.ownerDocument.createElement("section");t.classList.add("todo");const e=this.ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("svg"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("height","35"),e.setAttribute("width","35"),e.setAttribute("viewBox","0 0 320 512"),e.innerHTML='\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="#2ec4b6" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/>',t.appendChild(e);const n=this.ownerDocument.createElement("img");n.classList.add("logo"),n.src=this.logo||"undefined",t.appendChild(n);const r=this.ownerDocument.createElement("section");r.classList.add("info");const i=this.ownerDocument.createElement("h1");i.classList.add("text_create"),i.textContent="Create your account",r.appendChild(i),t.appendChild(r),this.shadowRoot.appendChild(t);const s=this.ownerDocument.createElement("section");s.classList.add("inputs");const o=this.ownerDocument.createElement("input");o.placeholder="Correo electronico",o.addEventListener("change",this.changeEmail),s.appendChild(o);const a=this.ownerDocument.createElement("input");a.placeholder="Username",a.addEventListener("change",this.changeUsername),s.appendChild(a);const c=this.ownerDocument.createElement("input");c.placeholder="Name and Last name",c.addEventListener("change",this.changeCompleteName),s.appendChild(c);const l=this.ownerDocument.createElement("input");l.placeholder="ContraseÃ±a",l.addEventListener("change",this.changePassword),s.appendChild(l);const u=this.ownerDocument.createElement("button");u.innerText="Registrarme",u.addEventListener("click",this.submitForm),s.appendChild(u),this.shadowRoot.appendChild(s);const h=this.ownerDocument.createElement("section");h.classList.add("todo");const d=this.ownerDocument.createElement("p");d.classList.add("text"),d.textContent="Or sign up with",h.appendChild(d);const f=this.ownerDocument.createElement("section");f.id="apps";const p=this.ownerDocument.createElement("img");p.classList.add("google"),p.src=this.google||"undefined",f.appendChild(p);const m=this.ownerDocument.createElement("img");m.classList.add("facebook"),m.src=this.facebook||"undefined",f.appendChild(m);const g=this.ownerDocument.createElement("img");g.classList.add("outlook"),g.src=this.outlook||"undefined",f.appendChild(g),h.appendChild(f);const y=this.ownerDocument.createElement("section");y.classList.add("already_have");const v=this.ownerDocument.createElement("p");v.classList.add("text"),v.textContent="Already have an account?",y.appendChild(v);const w=this.ownerDocument.createElement("p");w.classList.add("signup_btn"),w.textContent="Log In",y.appendChild(w),h.appendChild(y),this.shadowRoot.appendChild(h),e.addEventListener("click",(()=>{Sg(Eg("PROFILE"))})),w.addEventListener("click",(()=>{Sg(Eg("LOGIN"))}));const b=this.ownerDocument.createElement("style");b.innerHTML=cy.A,this.shadowRoot.appendChild(b)}}}customElements.define("my-register",hy);const dy=[{id:1,logo:"https://i.pinimg.com/736x/4e/97/d6/4e97d610dfc03d8fde6969d5be6434f4.jpg",google:"https://cdn1.iconfinder.com/data/icons/google-s-logo/150/Google_Icons-09-512.png",facebook:"https://upload.wikimedia.org/wikipedia/commons/6/6c/Facebook_Logo_2023.png",outlook:"https://seeklogo.com/images/M/microsoft-outlook-logo-188AB32C94-seeklogo.com.png"}];class fy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}connectedCallback(){this.render()}render(){this.shadowRoot&&dy.forEach((t=>{var e;const n=document.createElement("my-register");n.setAttribute(uy.logo,t.logo),n.setAttribute(uy.google,t.google),n.setAttribute(uy.facebook,t.facebook),n.setAttribute(uy.outlook,t.outlook),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}}customElements.define("app-register",fy);const py={email:"",password:""};var my;!function(t){t.logo="logo",t.google="google",t.facebook="facebook",t.outlook="outlook"}(my||(my={}));class gy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys({logo:null,google:null,facebook:null,outlook:null})}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){this.render()}changeEmail(t){var e;py.email=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}changePassword(t){var e;py.password=null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value}submitForm(){vg(py)}render(){var t,e,n,r,i;this.shadowRoot&&(this.shadowRoot.innerHTML="");const s=document.createElement("section");s.className="todo";const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class","svg"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("height","35"),o.setAttribute("width","35"),o.setAttribute("viewBox","0 0 320 512");const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("fill","#2ec4b6"),a.setAttribute("d","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"),o.appendChild(a);const c=document.createElement("img");c.className="logo",c.src=this.logo||"undefined";const l=document.createElement("section");l.className="info";const u=document.createElement("h1");u.className="text_create",u.textContent="Log in to your account";const h=document.createElement("section");h.className="inputs";const d=document.createElement("form"),f=document.createElement("input");f.type="Email",f.addEventListener("change",this.changeEmail),f.placeholder="Email";const p=document.createElement("input");p.type="Password",p.addEventListener("change",this.changePassword),p.placeholder="Password",h.appendChild(d),d.appendChild(f),d.appendChild(p);const m=document.createElement("button");m.id="login",m.type="submit",m.addEventListener("click",this.submitForm),m.textContent="Log In",d.appendChild(m);const g=document.createElement("p");g.className="text",g.textContent="Or sign in with";const y=document.createElement("section");y.id="apps";const v=document.createElement("img");v.className="google",v.src=this.google||"undefined";const w=document.createElement("img");w.className="facebook",w.src=this.facebook||"undefined";const b=document.createElement("img");b.className="outlook",b.src=this.outlook||"undefined",y.appendChild(v),y.appendChild(w),y.appendChild(b);const _=document.createElement("section");_.className="already_have";const E=document.createElement("p");E.className="text",E.textContent="Don't have an account?";const I=document.createElement("p");I.className="signup_btn",I.textContent="Sign Up",_.appendChild(E),_.appendChild(I),l.appendChild(u),l.appendChild(h),s.appendChild(o),s.appendChild(c),s.appendChild(l),s.appendChild(g),s.appendChild(y),s.appendChild(_),null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);const T=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".svg");null==T||T.addEventListener("click",(()=>{Sg(Eg("PROFILE"))}));const C=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector(".signup_btn");null==C||C.addEventListener("click",(()=>{Sg(Eg("REGISTER"))}));const S=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("#login");null==S||S.addEventListener("click",(()=>{Sg(Eg("DASHBOARD"))}));const k=this.ownerDocument.createElement("style");k.innerHTML=cy.A,null===(i=this.shadowRoot)||void 0===i||i.appendChild(k)}}customElements.define("my-login",gy);class yy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}connectedCallback(){this.render()}render(){this.shadowRoot&&dy.forEach((t=>{var e;const n=document.createElement("my-login");n.setAttribute(my.logo,t.logo),n.setAttribute(my.google,t.google),n.setAttribute(my.facebook,t.facebook),n.setAttribute(my.outlook,t.outlook),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}))}}customElements.define("app-login",yy);class vy extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),kg(this)}connectedCallback(){this.render()}render(){var t,e,n,r,i;switch(this.shadowRoot&&(this.shadowRoot.innerHTML=""),Tg.screen){case"HOME":const s=this.ownerDocument.createElement("app-dashboard");null===(t=this.shadowRoot)||void 0===t||t.appendChild(s);break;case"EXPLORE":const o=this.ownerDocument.createElement("app-explore");null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);break;case"PROFILE":const a=this.ownerDocument.createElement("app-perfil");null===(n=this.shadowRoot)||void 0===n||n.appendChild(a);break;case"REGISTER":const c=this.ownerDocument.createElement("app-register");null===(r=this.shadowRoot)||void 0===r||r.appendChild(c);break;case"LOGIN":const l=this.ownerDocument.createElement("app-login");null===(i=this.shadowRoot)||void 0===i||i.appendChild(l)}}}customElements.define("app-container",vy)})()})();